"use strict";var slideUp=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideDown=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.removeProperty("display");var s=window.getComputedStyle(e).display;e.style.display=s="none"===s?"block":s;s=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=s+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideToggle=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;return("none"===window.getComputedStyle(e).display?slideDown:slideUp)(e,t)};window.onload=function(){var e=document.querySelector(".burger"),t=document.querySelector(".header"),s=document.querySelectorAll(".technology-card"),n=(document.querySelectorAll(".technology-card__body"),document.querySelectorAll(".tabs__item")),i=document.querySelectorAll(".tabs__trigger"),o=document.querySelector(".treatments .dropdown__trigger .dropdown__trigger-text"),r=document.querySelector(".treatments .dropdown"),a=document.querySelector(".treatments .dropdown__list");window.addEventListener("scroll",function(){1<=$(window).scrollTop()?(t.classList.add("js-scroll-down"),t.classList.remove("js-scroll-top")):(t.classList.add("js-scroll-top"),t.classList.remove("js-scroll-down","js-nav-open","js-nav-close"))});for(var l=0;l<i.length;l++)!function(e){i[e].addEventListener("click",function(){n.forEach(function(e){e.classList.remove("js-active")}),i.forEach(function(e){e.classList.remove("js-active")}),n[e].classList.add("js-active"),i[e].classList.add("js-active"),o.textContent=document.querySelector(".tabs__trigger.js-active").textContent})}(l);OverlayScrollbars(document.querySelectorAll(".tooth"),{});var c,d,p,g=document.getElementById("file"),v=document.querySelector(".files__table");if(g&&g.addEventListener("change",function(){!function(){for(var e="",t=0;t<g.files.length;++t)e+='<div class="files__wrapper"><div class="files-item"><i class="icon-file"></i><span class="files-item__name">'+g.files.item(t).name+'</span/><i class="files-item__remove icon-trash-can" onclick="return this.parentNode.parentNode.remove();"></i></div></div>';0<=(v.innerHTML=e).length?v.style.display="flex":v.style.display="none"}()}),o&&(o.textContent=document.querySelector(".tabs__trigger.js-active").textContent),window.matchMedia("(min-width: 992px)").matches)e.addEventListener("click",function(){t.classList.contains("js-nav-open")?(t.classList.remove("js-nav-open"),t.classList.add("js-nav-close")):(t.classList.add("js-nav-open"),t.classList.remove("js-nav-close"))}),$(".technology__wrapper").click(function(){$(".technology__wrapper").not($(this).closest(".technology__wrapper")).removeClass("js-active"),$(this).closest(".technology__wrapper").addClass("js-active"),$(this).hasClass("js-active")&&($(".technology-card__body").not($(this).find(".technology-card__body")).slideUp(300),$(this).find(".technology-card__body").slideDown(300))}),window.homepagecheck=function(){var e=!1;return e="/"===document.location.pathname||"/index.html"===document.location.pathname?!0:e},window.homepagecheck()&&(gsap.registerPlugin(ScrollTrigger),c=gsap.utils.toArray(".treatments-horizontal"),d=0,(p=function(){d=0,c.forEach(function(e){d+=e.offsetWidth})})(),ScrollTrigger.addEventListener("refreshInit",p),p=document.querySelector(".treatments"),gsap.to(c,{x:function(){return"-".concat(d-window.innerWidth)},ease:"none",scrollTrigger:{start:"-120px top",trigger:p,pin:!0,scrub:!0,end:function(){return"+=".concat(d)},invalidateOnRefresh:!0}}),c.forEach(function(e,t){ScrollTrigger.create({trigger:e,start:function(){return"top top-="+(e.offsetLeft-window.innerWidth/2)*(d/(d-window.innerWidth))},end:function(){return"+="+e.offsetWidth*(d/(d-window.innerWidth))},toggleClass:{targets:e,className:"active"}})}));else{window.addEventListener("scroll",function(){var e=document.querySelector(".header").offsetHeight;window.scrollY>e+64?(r.classList.add("js-scroll-down"),a.style.display="none"):(r.classList.remove("js-scroll-down"),a.style.display="block")}),r.addEventListener("click",function(){r.classList.contains("js-scroll-down")&&slideToggle(a,300)}),e.addEventListener("click",function(){t.classList.toggle("js-nav-open"),document.body.classList.toggle("js-lock")});for(var y=0;y<s.length;y++)!function(e){s[e].addEventListener("click",function(){s.forEach(function(e){e.classList.remove("js-active")}),s[e].classList.add("js-active")})}(y);new Swiper(".treatments-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".treatments-button-next",prevEl:".treatments-button-prev"},pagination:{el:".treatments-pagination"},breakpoints:{768:{slidesPerView:2}}})}new Swiper(".practices-slider",{slidesPerView:1,spaceBetween:40,navigation:{nextEl:".practices-button-next",prevEl:".practices-button-prev"},pagination:{el:".practices-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".testimonials-slider",{slidesPerView:1,spaceBetween:30,loop:!0,navigation:{nextEl:".testimonials-button-next",prevEl:".testimonials-button-prev"},pagination:{el:".testimonials-pagination"},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:"auto",centeredSlides:!0}}}),new Swiper(".cases-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".cases-button-next",prevEl:".cases-button-prev"},pagination:{el:".cases-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".socials__slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".socials-button-next",prevEl:".socials-button-prev"},pagination:{el:".socials-pagination"},breakpoints:{768:{slidesPerView:2}}})};var textarea=document.querySelector("textarea");function autosizeTextarea(){var e=this;setTimeout(function(){e.style.cssText="height:auto; padding:0",e.style.cssText="-moz-box-sizing:content-box",e.style.cssText="height:"+e.scrollHeight+"px"},0)}textarea&&textarea.addEventListener("keydown",autosizeTextarea),$("select").each(function(){var t=$(this),e=$(this).children("option").length;t.addClass("select__hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select__styled"></div>');var s=t.next("div.select__styled");s.append('<span></span><i class="icon-arrow-dropdown"></i>'),s.find("span").text(t.children("option").eq(0).text());for(var n=$("<ul />",{class:"select__options"}).insertAfter(s),i=0;i<e;i++)$("<li />",{text:t.children("option").eq(i).text(),rel:t.children("option").eq(i).val()}).appendTo(n);var o=n.children("li");s.click(function(e){e.stopPropagation(),$("div.select__styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select__options").slideUp(300)}),$(this).toggleClass("active").next("ul.select__options").slideToggle(300)}),o.click(function(e){e.stopPropagation(),s.find("span").text($(this).text()).removeClass("active"),t.val($(this).attr("rel")),n.slideUp(300)}),$(document).click(function(){s.removeClass("active"),n.slideUp(300)})}),$(".show__trigger").click(function(){$(this).parent().find(".show__item").toggle(),$(this).toggleClass("js-active"),$(this).hasClass("js-active")?$(this).find("span").text("See less"):$(this).find("span").text("See all")});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJVSS9jb250YWN0cy1mb3JtL2NvbnRhY3RzLWZvcm0uanMiLCJibG9ja3MvY29udGFjdHMtcGFnZS9jb250YWN0cy9jb250YWN0cy5qcyJdLCJuYW1lcyI6WyJzbGlkZVVwIiwidGFyZ2V0IiwiZHVyYXRpb24iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJzdHlsZSIsInRyYW5zaXRpb25Qcm9wZXJ0eSIsInRyYW5zaXRpb25EdXJhdGlvbiIsImhlaWdodCIsIm9mZnNldEhlaWdodCIsIm92ZXJmbG93IiwicGFkZGluZ1RvcCIsInBhZGRpbmdCb3R0b20iLCJtYXJnaW5Ub3AiLCJtYXJnaW5Cb3R0b20iLCJ3aW5kb3ciLCJzZXRUaW1lb3V0IiwiZGlzcGxheSIsInJlbW92ZVByb3BlcnR5Iiwic2xpZGVEb3duIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsInNsaWRlVG9nZ2xlIiwib25sb2FkIiwiYnVyZ2VyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGVhZGVyIiwidGVjaG5vbG9neUNhcmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFiQ29udGVudCIsInRhYkl0ZW0iLCJ0YWJEcm9wZG93blRyaWdnZXIiLCJ0cmVhdG1lbnRzRHJvcGRvd24iLCJ0cmVhdG1lbnRzRHJvcGRvd25MaXN0IiwiYWRkRXZlbnRMaXN0ZW5lciIsIiQiLCJzY3JvbGxUb3AiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJpIiwiZm9yRWFjaCIsIml0ZW0iLCJ0ZXh0Q29udGVudCIsIl9sb29wIiwiT3ZlcmxheVNjcm9sbGJhcnMiLCJzZWN0aW9ucyIsIm1heFdpZHRoIiwidHJpZ2dlckl0ZW0iLCJmaWxlc1RyaWdnZXIiLCJnZXRFbGVtZW50QnlJZCIsImZpbGVzVGFibGUiLCJjaGlsZHJlbiIsImZpbGVzIiwibmFtZSIsImlubmVySFRNTCIsInVwZGF0ZUZpbGVzTGlzdCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiY29udGFpbnMiLCJjbGljayIsIm5vdCIsInRoaXMiLCJjbG9zZXN0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImhhc0NsYXNzIiwiZmluZCIsImhvbWVwYWdlY2hlY2siLCJjaGVjayIsImxvY2F0aW9uIiwicGF0aG5hbWUiLCJnc2FwIiwicmVnaXN0ZXJQbHVnaW4iLCJTY3JvbGxUcmlnZ2VyIiwidXRpbHMiLCJ0b0FycmF5IiwiZ2V0TWF4V2lkdGgiLCJzZWN0aW9uIiwib2Zmc2V0V2lkdGgiLCJ0byIsIngiLCJjb25jYXQiLCJpbm5lcldpZHRoIiwiZWFzZSIsInNjcm9sbFRyaWdnZXIiLCJzdGFydCIsInRyaWdnZXIiLCJwaW4iLCJzY3J1YiIsImVuZCIsImludmFsaWRhdGVPblJlZnJlc2giLCJzY3QiLCJjcmVhdGUiLCJvZmZzZXRMZWZ0IiwidG9nZ2xlQ2xhc3MiLCJ0YXJnZXRzIiwiY2xhc3NOYW1lIiwib2Zmc2V0SXRlbTEiLCJzY3JvbGxZIiwidG9nZ2xlIiwiYm9keSIsImVsZW1lbnQiLCJfbG9vcDIiLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsInBhZ2luYXRpb24iLCJlbCIsImJyZWFrcG9pbnRzIiwiNzY4IiwibG9vcCIsIjk5MiIsImNlbnRlcmVkU2xpZGVzIiwidGV4dGFyZWEiLCJhdXRvc2l6ZVRleHRhcmVhIiwiY3NzVGV4dCIsInNjcm9sbEhlaWdodCIsImVhY2giLCIkdGhpcyIsIm51bWJlck9mT3B0aW9ucyIsIndyYXAiLCJhZnRlciIsIiRzdHlsZWRTZWxlY3QiLCJuZXh0IiwiYXBwZW5kIiwidGV4dCIsImVxIiwiJGxpc3QiLCJjbGFzcyIsImluc2VydEFmdGVyIiwicmVsIiwidmFsIiwiYXBwZW5kVG8iLCIkbGlzdEl0ZW1zIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImF0dHIiLCJwYXJlbnQiXSwibWFwcGluZ3MiOiJhQUtBLElBQUlBLFFBQVUsU0FBQ0MsR0FBeUIsSUFBakJDLEVBQWlCLEVBQUFD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LEtBQUsiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTY3JvbGwgdG8gdGhlIHRvcCBiZWZvcmUgdGhlIHBhZ2UgbG9hZHNcclxuLy8gd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4vLyAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuLy8gfVxyXG5cclxubGV0IHNsaWRlVXAgPSAodGFyZ2V0LCBkdXJhdGlvbj01MDApID0+IHtcclxuXHJcbiAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9ICdoZWlnaHQsIG1hcmdpbiwgcGFkZGluZyc7XHJcbiAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uICsgJ21zJztcclxuICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodCArICdweCc7XHJcbiAgdGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICB0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gMDtcclxuICB0YXJnZXQuc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdCb3R0b20gPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5tYXJnaW5Ub3AgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAwO1xyXG4gIHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiB7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLXRvcCcpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tZHVyYXRpb24nKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcclxuICAgICAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICB9LCBkdXJhdGlvbik7XHJcbn1cclxuXHJcbmxldCBzbGlkZURvd24gPSAodGFyZ2V0LCBkdXJhdGlvbj01MDApID0+IHtcclxuXHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XHJcbiAgbGV0IGRpc3BsYXkgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmRpc3BsYXk7XHJcbiAgaWYgKGRpc3BsYXkgPT09ICdub25lJykgZGlzcGxheSA9ICdibG9jayc7XHJcbiAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xyXG4gIGxldCBoZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gIHRhcmdldC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gIHRhcmdldC5zdHlsZS5oZWlnaHQgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuICB0YXJnZXQuc3R5bGUucGFkZGluZ0JvdHRvbSA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpblRvcCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XHJcbiAgdGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gXCJoZWlnaHQsIG1hcmdpbiwgcGFkZGluZ1wiO1xyXG4gIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdtcyc7XHJcbiAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLXRvcCcpO1xyXG4gIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy1ib3R0b20nKTtcclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi10b3AnKTtcclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi1ib3R0b20nKTtcclxuICB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1kdXJhdGlvbicpO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLXByb3BlcnR5Jyk7XHJcbiAgfSwgZHVyYXRpb24pO1xyXG59XHJcblxyXG52YXIgc2xpZGVUb2dnbGUgPSAodGFyZ2V0LCBkdXJhdGlvbiA9IDUwMCkgPT4ge1xyXG4gIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmRpc3BsYXkgPT09ICdub25lJykge1xyXG4gICAgcmV0dXJuIHNsaWRlRG93bih0YXJnZXQsIGR1cmF0aW9uKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHNsaWRlVXAodGFyZ2V0LCBkdXJhdGlvbik7XHJcbiAgfVxyXG59XHJcblxyXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG4gIC8vIFZhcmlhYmVsc1xyXG4gIGxldCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlclwiKTtcclxuICBsZXQgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJcIik7XHJcbiAgbGV0IHRlY2hub2xvZ3lDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRlY2hub2xvZ3ktY2FyZCcpO1xyXG4gIGxldCB0ZWNobm9sb2d5Q2FyZEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVjaG5vbG9neS1jYXJkX19ib2R5JylcclxuICBsZXQgdGFiQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFic19faXRlbVwiKTtcclxuICBsZXQgdGFiSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFic19fdHJpZ2dlclwiKTtcclxuICBsZXQgdGFiRHJvcGRvd25UcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmVhdG1lbnRzIC5kcm9wZG93bl9fdHJpZ2dlciAuZHJvcGRvd25fX3RyaWdnZXItdGV4dFwiKTtcclxuICBsZXQgdHJlYXRtZW50c0Ryb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmVhdG1lbnRzIC5kcm9wZG93blwiKTtcclxuICBsZXQgdHJlYXRtZW50c0Ryb3Bkb3duTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJlYXRtZW50cyAuZHJvcGRvd25fX2xpc3RcIilcclxuXHJcbiAgLy8gTWFuaXB1bGF0aW9ucyB3aXRoIGhlYWRlciBjbGFzc2VzIG9uIHNjcm9sbFxyXG4gIGxldCBzY3JvbGxDaGFuZ2UgPSAxO1xyXG5cclxuICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XHJcbiAgICBsZXQgc2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG5cclxuICAgIGlmIChzY3JvbGwgPj0gc2Nyb2xsQ2hhbmdlKSB7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwianMtc2Nyb2xsLWRvd25cIik7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwianMtc2Nyb2xsLXRvcFwiKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwianMtc2Nyb2xsLXRvcFwiKTtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1zY3JvbGwtZG93blwiLCBcImpzLW5hdi1vcGVuXCIsIFwianMtbmF2LWNsb3NlXCIpO1xyXG4gICAgfVxyXG4gIH0pO1xyXG5cclxuICAvLyBUcmVhdG1lbnRzIHBhZ2UgdGFic1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGFiSXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgdGFiSXRlbVtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cclxuICAgICAgdGFiQ29udGVudC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRhYkl0ZW0uZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0YWJDb250ZW50W2ldLmNsYXNzTGlzdC5hZGQoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIHRhYkl0ZW1baV0uY2xhc3NMaXN0LmFkZChcImpzLWFjdGl2ZVwiKTtcclxuXHJcbiAgICAgIHRhYkRyb3Bkb3duVHJpZ2dlci50ZXh0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFic19fdHJpZ2dlci5qcy1hY3RpdmVcIikudGV4dENvbnRlbnRcclxuICAgIH0pO1xyXG4gIH0gXHJcbiAgXHJcbiAgLy8gQ3VzdG9tIHNjcm9sbGJhciBpbiB0b290aCB0YWJsZVxyXG4gIE92ZXJsYXlTY3JvbGxiYXJzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9vdGhcIiksIHt9KTtcclxuXHJcbiAgLy8gRmlsZXMgaW5wdXRcclxuICBsZXQgZmlsZXNUcmlnZ2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUnKTtcclxuICBsZXQgZmlsZXNUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWxlc19fdGFibGUnKTtcclxuICBcclxuICBsZXQgdXBkYXRlRmlsZXNMaXN0ID0gKCkgPT4ge1xyXG4gICAgbGV0IGNoaWxkcmVuID0gXCJcIjtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXNUcmlnZ2VyLmZpbGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIGNoaWxkcmVuICs9ICAnPGRpdiBjbGFzcz1cImZpbGVzX193cmFwcGVyXCI+JyArICc8ZGl2IGNsYXNzPVwiZmlsZXMtaXRlbVwiPicgKyAnPGkgY2xhc3M9XCJpY29uLWZpbGVcIj48L2k+JyArICc8c3BhbiBjbGFzcz1cImZpbGVzLWl0ZW1fX25hbWVcIj4nICsgZmlsZXNUcmlnZ2VyLmZpbGVzLml0ZW0oaSkubmFtZSArICc8L3NwYW4vPicgKyAnPGkgY2xhc3M9XCJmaWxlcy1pdGVtX19yZW1vdmUgaWNvbi10cmFzaC1jYW5cIiBvbmNsaWNrPVwicmV0dXJuIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZSgpO1wiPjwvaT4nICsgJzwvZGl2PicgKyAnPC9kaXY+J1xyXG4gICAgfVxyXG4gICAgZmlsZXNUYWJsZS5pbm5lckhUTUwgPSBjaGlsZHJlbjtcclxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPj0gMCkge1xyXG4gICAgICBmaWxlc1RhYmxlLnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZpbGVzVGFibGUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGZpbGVzVHJpZ2dlcikge1xyXG4gICAgZmlsZXNUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICB1cGRhdGVGaWxlc0xpc3QoKVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIGlmICh0YWJEcm9wZG93blRyaWdnZXIpIHtcclxuICAgIHRhYkRyb3Bkb3duVHJpZ2dlci50ZXh0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFic19fdHJpZ2dlci5qcy1hY3RpdmVcIikudGV4dENvbnRlbnRcclxuICB9XHJcbiAgXHJcbiAgLy8gTWVkaWEgOTkyID09PT09PlxyXG4gIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDk5MnB4KVwiKS5tYXRjaGVzKSB7XHJcbiAgICAvLyBPcGVuaW5nIGRlc2t0b3AgbWVudSB3aXRoIGJ1cmdlclxyXG4gICAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwianMtbmF2LW9wZW5cIikpIHtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLW5hdi1vcGVuXCIpO1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwianMtbmF2LWNsb3NlXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwianMtbmF2LW9wZW5cIik7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1uYXYtY2xvc2VcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9wZW5pbmcgdGVjaG5vbG9neSBhY2NvcmRpb25cclxuICAgICQoJy50ZWNobm9sb2d5X193cmFwcGVyJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAkKFwiLnRlY2hub2xvZ3lfX3dyYXBwZXJcIikubm90KCQodGhpcykuY2xvc2VzdChcIi50ZWNobm9sb2d5X193cmFwcGVyXCIpKS5yZW1vdmVDbGFzcyhcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiLnRlY2hub2xvZ3lfX3dyYXBwZXJcIikuYWRkQ2xhc3MoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdqcy1hY3RpdmUnKSkge1xyXG4gICAgICAgICQoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKS5ub3QoJCh0aGlzKS5maW5kKCcudGVjaG5vbG9neS1jYXJkX19ib2R5JykpLnNsaWRlVXAoMzAwKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKS5zbGlkZURvd24oMzAwKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRlY2hub2xvZ3lDYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAvLyAgIHRlY2hub2xvZ3lDYXJkW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgdGVjaG5vbG9neUNhcmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgLy8gICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwianMtYWN0aXZlXCIpO1xyXG4gICAgLy8gICAgIH0pO1xyXG5cclxuICAgIC8vICAgICB0ZWNobm9sb2d5Q2FyZFtpXS5jbGFzc0xpc3QuYWRkKCdqcy1hY3RpdmUnKTtcclxuXHJcbiAgICAvLyAgICAgLy8gQWRkIGNsYXNzIHRvIHRoZSBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWRcclxuICAgIC8vICAgICBzbGlkZURvd24odGVjaG5vbG9neUNhcmRCb2R5W2ldLCAzMDApXHJcbiAgICAvLyAgIH0pO1xyXG4gICAgLy8gfVxyXG4gICAgXHJcbiAgICAvLyBDaGVja2luZyBpZiB0aGUgYWN0aXZlIHBhZ2UgaXMgdGhlIGhvbWUgcGFnZVxyXG4gICAgd2luZG93LmhvbWVwYWdlY2hlY2sgPSAoKSA9PiB7XHJcbiAgICAgIHZhciBjaGVjayA9IGZhbHNlO1xyXG4gICAgICBpZihkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSA9PT0gXCIvXCIgfHwgZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUgPT09IFwiL2luZGV4Lmh0bWxcIil7XHJcbiAgICAgICAgY2hlY2s9dHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIHJldHVybiBjaGVjaztcclxuICAgIH1cclxuICBcclxuICAgIGlmKHdpbmRvdy5ob21lcGFnZWNoZWNrKCkpe1xyXG4gICAgICAvLyBIb3Jpem9udGFsIHNjcm9sbCBpbiBUcmVhdG1lbnRzID09PT09PlxyXG4gICAgICBnc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRyaWdnZXIpO1xyXG4gIFxyXG4gICAgICBjb25zdCBzZWN0aW9ucyA9IGdzYXAudXRpbHMudG9BcnJheShcIi50cmVhdG1lbnRzLWhvcml6b250YWxcIik7XHJcbiAgICAgIGxldCBtYXhXaWR0aCA9IDA7XHJcbiAgXHJcbiAgICAgIGNvbnN0IGdldE1heFdpZHRoID0gKCkgPT4ge1xyXG4gICAgICAgIG1heFdpZHRoID0gMDtcclxuICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICBtYXhXaWR0aCArPSBzZWN0aW9uLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICBnZXRNYXhXaWR0aCgpO1xyXG4gICAgICBTY3JvbGxUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWZyZXNoSW5pdFwiLCBnZXRNYXhXaWR0aCk7XHJcbiAgXHJcbiAgICAgIGxldCB0cmlnZ2VySXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmVhdG1lbnRzJyk7XHJcbiAgXHJcbiAgICAgIGdzYXAudG8oc2VjdGlvbnMsIHtcclxuICAgICAgICB4OiAoKSA9PiBgLSR7bWF4V2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aH1gLFxyXG4gICAgICAgIGVhc2U6IFwibm9uZVwiLFxyXG4gICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcclxuICAgICAgICAgIHN0YXJ0OiBcIi0xMjBweCB0b3BcIixcclxuICAgICAgICAgIHRyaWdnZXI6IHRyaWdnZXJJdGVtLFxyXG4gICAgICAgICAgcGluOiB0cnVlLFxyXG4gICAgICAgICAgc2NydWI6IHRydWUsXHJcbiAgICAgICAgICBlbmQ6ICgpID0+IGArPSR7bWF4V2lkdGh9YCxcclxuICAgICAgICAgIGludmFsaWRhdGVPblJlZnJlc2g6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICBzZWN0aW9ucy5mb3JFYWNoKChzY3QsIGkpID0+IHtcclxuICAgICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICB0cmlnZ2VyOiBzY3QsXHJcbiAgICAgICAgICBzdGFydDogKCkgPT4gJ3RvcCB0b3AtPScgKyAoc2N0Lm9mZnNldExlZnQgLSB3aW5kb3cuaW5uZXJXaWR0aC8yKSAqIChtYXhXaWR0aCAvIChtYXhXaWR0aCAtIHdpbmRvdy5pbm5lcldpZHRoKSksXHJcbiAgICAgICAgICBlbmQ6ICgpID0+ICcrPScgKyBzY3Qub2Zmc2V0V2lkdGggKiAobWF4V2lkdGggLyAobWF4V2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aCkpLFxyXG4gICAgICAgICAgdG9nZ2xlQ2xhc3M6IHt0YXJnZXRzOiBzY3QsIGNsYXNzTmFtZTogXCJhY3RpdmVcIn1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBudWxsXHJcbiAgICB9XHJcblxyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBUcmVhdG1lbnRzIHBhZ2UgdGFicyBuYXZpZ2F0aW9uXHJcbiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XHJcbiAgICAgIGxldCBvZmZzZXRJdGVtMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHRcclxuICBcclxuICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZID4gb2Zmc2V0SXRlbTEgKyA2NCApIHtcclxuICAgICAgICB0cmVhdG1lbnRzRHJvcGRvd24uY2xhc3NMaXN0LmFkZChcImpzLXNjcm9sbC1kb3duXCIpO1xyXG4gICAgICAgIHRyZWF0bWVudHNEcm9wZG93bkxpc3Quc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRyZWF0bWVudHNEcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKFwianMtc2Nyb2xsLWRvd25cIik7XHJcbiAgICAgICAgdHJlYXRtZW50c0Ryb3Bkb3duTGlzdC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuXHJcbiAgICB0cmVhdG1lbnRzRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgIGlmICh0cmVhdG1lbnRzRHJvcGRvd24uY2xhc3NMaXN0LmNvbnRhaW5zKFwianMtc2Nyb2xsLWRvd25cIikpIHtcclxuICAgICAgICBzbGlkZVRvZ2dsZSh0cmVhdG1lbnRzRHJvcGRvd25MaXN0LCAzMDApO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG51bGxcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gT3BlbmluZyBtb2JpbGUgbWVudSB3aXRoIGJ1cmdlclxyXG4gICAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKFwianMtbmF2LW9wZW5cIik7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWxvY2tcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBPcGVuaW5nIHRlY2hub2xvZ3kgYWNjb3JkaW9ucyAhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhXHJcbiAgICAvLyAkKCcudGVjaG5vbG9neV9fd3JhcHBlciAudGVjaG5vbG9neS1jYXJkJykubm90KCQoJy50ZWNobm9sb2d5X193cmFwcGVyLnNlY29uZGFyeSAudGVjaG5vbG9neS1jYXJkJykpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZWNobm9sb2d5Q2FyZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0ZWNobm9sb2d5Q2FyZFtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIC8vIFJlbW92ZSBjbGFzcyBmcm9tIGFsbCBlbGVtZW50c1xyXG4gICAgICAgIHRlY2hub2xvZ3lDYXJkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGNsYXNzIHRvIHRoZSBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWRcclxuICAgICAgICB0ZWNobm9sb2d5Q2FyZFtpXS5jbGFzc0xpc3QuYWRkKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCbG9jayBzbGlkZXIgJ1RyZWF0bWVudHMnXHJcbiAgICBjb25zdCBzbGlkZXJUcmVhdG1lbnRzID0gbmV3IFN3aXBlcignLnRyZWF0bWVudHMtc2xpZGVyJywge1xyXG4gICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgbmV4dEVsOiBcIi50cmVhdG1lbnRzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgICAgcHJldkVsOiBcIi50cmVhdG1lbnRzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICBlbDogXCIudHJlYXRtZW50cy1wYWdpbmF0aW9uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgNzY4OiB7XHJcbiAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvLyBCbG9jayBzbGlkZXIgJ1ByYWN0aWNlcydcclxuICBjb25zdCBzbGlkZXJQcmFjdGljZXMgPSBuZXcgU3dpcGVyKCcucHJhY3RpY2VzLXNsaWRlcicsIHtcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDQwLFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLnByYWN0aWNlcy1idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLnByYWN0aWNlcy1idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLnByYWN0aWNlcy1wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNzY4OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAvLyBCbG9jayBzbGlkZXIgJ1Rlc3RpbW9uaWFscydcclxuICBjb25zdCBzbGlkZXJUZXN0aW1vbmlhbHMgPSBuZXcgU3dpcGVyKCcudGVzdGltb25pYWxzLXNsaWRlcicsIHtcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgbG9vcDogdHJ1ZSxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi50ZXN0aW1vbmlhbHMtYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi50ZXN0aW1vbmlhbHMtYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi50ZXN0aW1vbmlhbHMtcGFnaW5hdGlvblwiLFxyXG4gICAgfSxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICAgIDk5Mjoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIC8vIEJsb2NrIHNsaWRlciAnQ2FzZXMnXHJcbiAgY29uc3Qgc2xpZGVyQ2FzZXMgPSBuZXcgU3dpcGVyKCcuY2FzZXMtc2xpZGVyJywge1xyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIuY2FzZXMtYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi5jYXNlcy1idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLmNhc2VzLXBhZ2luYXRpb25cIixcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICB9LFxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIC8vIEJsb2NrIHNsaWRlciAnU29jaWFscydcclxuICBjb25zdCBzbGlkZXJTb2NpYWxzID0gbmV3IFN3aXBlcignLnNvY2lhbHNfX3NsaWRlcicsIHtcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLnNvY2lhbHMtYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi5zb2NpYWxzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIuc29jaWFscy1wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNzY4OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9KVxyXG59IiwiLy8gQXV0byBzaXplIHRleHRhcmVhID09PT09PlxyXG52YXIgdGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xyXG5cclxuaWYgKHRleHRhcmVhKSB7XHJcbiAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGF1dG9zaXplVGV4dGFyZWEpO1xyXG59IGVsc2Uge1xyXG4gIG51bGxcclxufVxyXG5cclxuZnVuY3Rpb24gYXV0b3NpemVUZXh0YXJlYSgpe1xyXG5cdHZhciBlbCA9IHRoaXM7XHJcblx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0ZWwuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6YXV0bzsgcGFkZGluZzowJztcclxuXHRcdGVsLnN0eWxlLmNzc1RleHQgPSAnLW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94JztcclxuXHRcdGVsLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OicgKyBlbC5zY3JvbGxIZWlnaHQgKyAncHgnO1xyXG5cdH0sMCk7XHJcbn1cclxuXHJcbi8vIEN1c3RvbSBzZWxlY3QgPT09PT0+XHJcbiQoJ3NlbGVjdCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICB2YXIgJHRoaXMgPSAkKHRoaXMpLCBudW1iZXJPZk9wdGlvbnMgPSAkKHRoaXMpLmNoaWxkcmVuKCdvcHRpb24nKS5sZW5ndGg7XHJcblxyXG4gICR0aGlzLmFkZENsYXNzKCdzZWxlY3RfX2hpZGRlbicpOyBcclxuICAkdGhpcy53cmFwKCc8ZGl2IGNsYXNzPVwic2VsZWN0XCI+PC9kaXY+Jyk7XHJcbiAgJHRoaXMuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJzZWxlY3RfX3N0eWxlZFwiPjwvZGl2PicpO1xyXG5cclxuICB2YXIgJHN0eWxlZFNlbGVjdCA9ICR0aGlzLm5leHQoJ2Rpdi5zZWxlY3RfX3N0eWxlZCcpO1xyXG4gICRzdHlsZWRTZWxlY3QuYXBwZW5kKCc8c3Bhbj48L3NwYW4+PGkgY2xhc3M9XCJpY29uLWFycm93LWRyb3Bkb3duXCI+PC9pPicpXHJcbiAgJHN0eWxlZFNlbGVjdC5maW5kKCdzcGFuJykudGV4dCgkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoMCkudGV4dCgpKTtcclxuXHJcbiAgdmFyICRsaXN0ID0gJCgnPHVsIC8+Jywge1xyXG4gICAgJ2NsYXNzJzogJ3NlbGVjdF9fb3B0aW9ucydcclxuICB9KS5pbnNlcnRBZnRlcigkc3R5bGVkU2VsZWN0KTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJPZk9wdGlvbnM7IGkrKykge1xyXG4gICAgJCgnPGxpIC8+Jywge1xyXG4gICAgICB0ZXh0OiAkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoaSkudGV4dCgpLFxyXG4gICAgICByZWw6ICR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcShpKS52YWwoKVxyXG4gICAgfSkuYXBwZW5kVG8oJGxpc3QpO1xyXG4gIH1cclxuXHJcbiAgdmFyICRsaXN0SXRlbXMgPSAkbGlzdC5jaGlsZHJlbignbGknKTtcclxuXHJcbiAgJHN0eWxlZFNlbGVjdC5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgJCgnZGl2LnNlbGVjdF9fc3R5bGVkLmFjdGl2ZScpLm5vdCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLm5leHQoJ3VsLnNlbGVjdF9fb3B0aW9ucycpLnNsaWRlVXAoMzAwKTtcclxuICAgIH0pO1xyXG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJykubmV4dCgndWwuc2VsZWN0X19vcHRpb25zJykuc2xpZGVUb2dnbGUoMzAwKTtcclxuICB9KTtcclxuXHJcbiAgJGxpc3RJdGVtcy5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgJHN0eWxlZFNlbGVjdC5maW5kKCdzcGFuJykudGV4dCgkKHRoaXMpLnRleHQoKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJHRoaXMudmFsKCQodGhpcykuYXR0cigncmVsJykpO1xyXG4gICAgJGxpc3Quc2xpZGVVcCgzMDApO1xyXG4gIH0pO1xyXG5cclxuICAkKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICRzdHlsZWRTZWxlY3QucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJGxpc3Quc2xpZGVVcCgzMDApO1xyXG4gIH0pO1xyXG5cclxufSk7IiwiJCgnLnNob3dfX3RyaWdnZXInKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgJCh0aGlzKS5wYXJlbnQoKS5maW5kKCcuc2hvd19faXRlbScpLnRvZ2dsZSgpXHJcbiAgJCh0aGlzKS50b2dnbGVDbGFzcygnanMtYWN0aXZlJylcclxuICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnanMtYWN0aXZlJykpIHtcclxuICAgICQodGhpcykuZmluZCgnc3BhbicpLnRleHQoJ1NlZSBsZXNzJylcclxuICB9IGVsc2Uge1xyXG4gICAgJCh0aGlzKS5maW5kKCdzcGFuJykudGV4dCgnU2VlIGFsbCcpXHJcbiAgfVxyXG59KSJdfQ==