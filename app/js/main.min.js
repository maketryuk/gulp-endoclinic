"use strict";function _createForOfIteratorHelper(e,t){var o="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!o){if(Array.isArray(e)||(o=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){o&&(e=o);var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){o=o.call(e)},n:function(){var e=o.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==o.return||o.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(o="Object"===o&&e.constructor?e.constructor.name:o)||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}window.onbeforeunload=function(){window.scrollTo(0,0)};var slideUp=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideDown=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.removeProperty("display");var o=window.getComputedStyle(e).display;e.style.display=o="none"===o?"block":o;o=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=o+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideToggle=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;return("none"===window.getComputedStyle(e).display?slideDown:slideUp)(e,t)};window.onload=function(){var e,i=document.querySelector(".burger"),s=document.querySelector(".header"),l=document.querySelectorAll(".technology-card"),t=(document.querySelectorAll(".technology-card__body"),document.querySelectorAll(".tabs__item")),o=document.querySelectorAll(".tabs__trigger"),n=document.querySelector(".treatments .dropdown__trigger .dropdown__trigger-text"),a=document.querySelector(".treatments .dropdown"),c=document.querySelector(".treatments .dropdown__list"),r=_createForOfIteratorHelper(document.querySelectorAll(".header-contacts__link"));try{for(r.s();!(e=r.n()).done;)e.value.addEventListener("click",d)}catch(e){r.e(e)}finally{r.f()}function d(e){e.preventDefault();e=this.getAttribute("href"),e=document.querySelector(e).offsetTop;scroll({top:e-100,behavior:"smooth"})}window.addEventListener("scroll",function(){1<=$(window).scrollTop()?(s.classList.add("js-scroll-down"),s.classList.remove("js-scroll-top")):(s.classList.add("js-scroll-top"),s.classList.remove("js-scroll-down","js-nav-open","js-nav-close"))});for(var p=0;p<o.length;p++)!function(e){o[e].addEventListener("click",function(){t.forEach(function(e){e.classList.remove("js-active")}),o.forEach(function(e){e.classList.remove("js-active")}),t[e].classList.add("js-active"),o[e].classList.add("js-active"),n.textContent=document.querySelector(".tabs__trigger.js-active").textContent})}(p);n&&(n.textContent=document.querySelector(".tabs__trigger.js-active").textContent),OverlayScrollbars(document.querySelectorAll(".tooth"),{});var u,y,v,f=document.getElementById("file"),g=document.querySelector(".files__table");f&&f.addEventListener("change",function(){!function(){for(var e="",t=0;t<f.files.length;++t)e+='<div class="files__wrapper"><div class="files-item"><i class="icon-file"></i><span class="files-item__name">'+f.files.item(t).name+'</span/><i class="files-item__remove icon-trash-can" onclick="return this.parentNode.parentNode.remove();"></i></div></div>';0<=(g.innerHTML=e).length?g.style.display="flex":g.style.display="none"}()}),window.matchMedia("(min-width: 992px)").matches?(i.addEventListener("click",function(){s.classList.contains("js-nav-open")?(s.classList.remove("js-nav-open"),s.classList.add("js-nav-close")):(s.classList.add("js-nav-open"),s.classList.remove("js-nav-close"))}),$(".technology__wrapper").click(function(){$(".technology__wrapper").not($(this).closest(".technology__wrapper")).removeClass("js-active"),$(this).closest(".technology__wrapper").addClass("js-active"),$(this).hasClass("js-active")&&($(".technology-card__body").not($(this).find(".technology-card__body")).slideUp(300),$(this).find(".technology-card__body").slideDown(300))}),document.querySelector(".horizontal-scroll")&&(gsap.registerPlugin(ScrollTrigger),u=gsap.utils.toArray(".horizontal-scroll"),y=0,(v=function(){y=0,u.forEach(function(e){y+=e.offsetWidth})})(),ScrollTrigger.addEventListener("refreshInit",v),v=document.querySelector(".treatments"),gsap.to(u,{x:function(){return"-".concat(y-window.innerWidth)},ease:"none",scrollTrigger:{start:"-120px top",trigger:v,pin:!0,scrub:!0,end:function(){return"+=".concat(y)},invalidateOnRefresh:!0}}),u.forEach(function(e,t){ScrollTrigger.create({trigger:e,start:function(){return"top top-="+(e.offsetLeft-window.innerWidth/2)*(y/(y-window.innerWidth))},end:function(){return"+="+e.offsetWidth*(y/(y-window.innerWidth))},toggleClass:{targets:e,className:"active"}})}))):function(){for(var e,t=document.querySelectorAll(".show__trigger"),o=document.querySelectorAll(".show__item"),n=0;n<t.length;n++)!function(e){t[e].addEventListener("click",function(){t[e].classList.toggle("js-active"),t[e].classList.contains("js-active")?(t[e].textContent="See less",o.forEach(function(e){e.style.display="block"})):(t[e].textContent="See all",o.forEach(function(e){e.style.display="none"}))})}(n);a&&c&&(e=document.querySelector(".dropdown__list").offsetHeight,document.documentElement.style.setProperty("--treatments-dropdown-offset",e+"px"),window.addEventListener("scroll",function(){window.scrollY>e+64?(a.classList.add("js-scroll-down"),c.style.display="none",document.querySelector(".treatments").classList.add("offset-top")):(a.classList.remove("js-scroll-down"),c.style.display="block",document.querySelector(".treatments").classList.remove("offset-top"))}),a.addEventListener("click",function(){a.classList.contains("js-scroll-down")&&slideToggle(c,300)})),i.addEventListener("click",function(){s.classList.toggle("js-nav-open"),document.body.classList.toggle("js-lock")});for(var r=0;r<l.length;r++)!function(e){l[e].addEventListener("click",function(){l.forEach(function(e){e.classList.remove("js-active")}),l[e].classList.add("js-active")})}(r);new Swiper(".treatments-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".treatments-button-next",prevEl:".treatments-button-prev"},pagination:{el:".treatments-pagination"},breakpoints:{768:{slidesPerView:2}}})}();new Swiper(".practices-slider",{slidesPerView:1,spaceBetween:40,navigation:{nextEl:".practices-button-next",prevEl:".practices-button-prev"},pagination:{el:".practices-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".testimonials-slider",{slidesPerView:1,spaceBetween:30,loop:!0,navigation:{nextEl:".testimonials-button-next",prevEl:".testimonials-button-prev"},pagination:{el:".testimonials-pagination"},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:"auto",centeredSlides:!0}}}),new Swiper(".cases-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".cases-button-next",prevEl:".cases-button-prev"},pagination:{el:".cases-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".socials__slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".socials-button-next",prevEl:".socials-button-prev"},pagination:{el:".socials-pagination"},breakpoints:{768:{slidesPerView:2}}})};var textarea=document.querySelector("textarea");function autosizeTextarea(){var e=this;setTimeout(function(){e.style.cssText="height:auto; padding:0",e.style.cssText="-moz-box-sizing:content-box",e.style.cssText="height:"+e.scrollHeight+"px"},0)}textarea&&textarea.addEventListener("keydown",autosizeTextarea),$("select").each(function(){var t=$(this),e=$(this).children("option").length;t.addClass("select__hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select__styled"></div>');var o=t.next("div.select__styled");o.append('<span></span><i class="icon-arrow-dropdown"></i>'),o.find("span").text(t.children("option").eq(0).text());for(var n=$("<ul />",{class:"select__options"}).insertAfter(o),r=0;r<e;r++)$("<li />",{text:t.children("option").eq(r).text(),rel:t.children("option").eq(r).val()}).appendTo(n);var i=n.children("li");o.click(function(e){e.stopPropagation(),$("div.select__styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select__options").slideUp(300)}),$(this).toggleClass("active").next("ul.select__options").slideToggle(300)}),i.click(function(e){e.stopPropagation(),o.find("span").text($(this).text()).removeClass("active"),t.val($(this).attr("rel")),n.slideUp(300)}),$(document).click(function(){o.removeClass("active"),n.slideUp(300)})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJVSS9jb250YWN0cy1mb3JtL2NvbnRhY3RzLWZvcm0uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25iZWZvcmV1bmxvYWQiLCJzY3JvbGxUbyIsInNsaWRlVXAiLCJ0YXJnZXQiLCJkdXJhdGlvbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInN0eWxlIiwidHJhbnNpdGlvblByb3BlcnR5IiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwib3ZlcmZsb3ciLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSIsIm1hcmdpblRvcCIsIm1hcmdpbkJvdHRvbSIsInNldFRpbWVvdXQiLCJkaXNwbGF5IiwicmVtb3ZlUHJvcGVydHkiLCJzbGlkZURvd24iLCJnZXRDb21wdXRlZFN0eWxlIiwic2xpZGVUb2dnbGUiLCJvbmxvYWQiLCJfc3RlcCIsImJ1cmdlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhlYWRlciIsInRlY2hub2xvZ3lDYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsInRhYkNvbnRlbnQiLCJ0YWJJdGVtIiwidGFiRHJvcGRvd25UcmlnZ2VyIiwidHJlYXRtZW50c0Ryb3Bkb3duIiwidHJlYXRtZW50c0Ryb3Bkb3duTGlzdCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwicyIsIm4iLCJkb25lIiwidmFsdWUiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xpY2tIYW5kbGVyIiwiZXJyIiwiZSIsImYiLCJwcmV2ZW50RGVmYXVsdCIsImhyZWYiLCJ0aGlzIiwiZ2V0QXR0cmlidXRlIiwib2Zmc2V0VG9wIiwic2Nyb2xsIiwidG9wIiwiYmVoYXZpb3IiLCIkIiwic2Nyb2xsVG9wIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaSIsImZvckVhY2giLCJpdGVtIiwidGV4dENvbnRlbnQiLCJfbG9vcCIsIk92ZXJsYXlTY3JvbGxiYXJzIiwic2VjdGlvbnMiLCJtYXhXaWR0aCIsInRyaWdnZXJJdGVtIiwiZmlsZXNUcmlnZ2VyIiwiZ2V0RWxlbWVudEJ5SWQiLCJmaWxlc1RhYmxlIiwiY2hpbGRyZW4iLCJmaWxlcyIsIm5hbWUiLCJpbm5lckhUTUwiLCJ1cGRhdGVGaWxlc0xpc3QiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImNvbnRhaW5zIiwiY2xpY2siLCJub3QiLCJjbG9zZXN0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImhhc0NsYXNzIiwiZmluZCIsImdzYXAiLCJyZWdpc3RlclBsdWdpbiIsIlNjcm9sbFRyaWdnZXIiLCJ1dGlscyIsInRvQXJyYXkiLCJnZXRNYXhXaWR0aCIsInNlY3Rpb24iLCJvZmZzZXRXaWR0aCIsInRvIiwieCIsImNvbmNhdCIsImlubmVyV2lkdGgiLCJlYXNlIiwic2Nyb2xsVHJpZ2dlciIsInN0YXJ0IiwidHJpZ2dlciIsInBpbiIsInNjcnViIiwiZW5kIiwiaW52YWxpZGF0ZU9uUmVmcmVzaCIsInNjdCIsImNyZWF0ZSIsIm9mZnNldExlZnQiLCJ0b2dnbGVDbGFzcyIsInRhcmdldHMiLCJjbGFzc05hbWUiLCJvZmZzZXRJdGVtIiwic2hvd1RyaWdnZXIiLCJzaG93SXRlbSIsInRvZ2dsZSIsImVsZW1lbnQiLCJfbG9vcDIiLCJkb2N1bWVudEVsZW1lbnQiLCJzZXRQcm9wZXJ0eSIsInNjcm9sbFkiLCJib2R5IiwiX2xvb3AzIiwiU3dpcGVyIiwic2xpZGVzUGVyVmlldyIsInNwYWNlQmV0d2VlbiIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJwYWdpbmF0aW9uIiwiZWwiLCJicmVha3BvaW50cyIsIjc2OCIsImxvb3AiLCI5OTIiLCJjZW50ZXJlZFNsaWRlcyIsInRleHRhcmVhIiwiYXV0b3NpemVUZXh0YXJlYSIsImNzc1RleHQiLCJzY3JvbGxIZWlnaHQiLCJlYWNoIiwiJHRoaXMiLCJudW1iZXJPZk9wdGlvbnMiLCJ3cmFwIiwiYWZ0ZXIiLCIkc3R5bGVkU2VsZWN0IiwibmV4dCIsImFwcGVuZCIsInRleHQiLCJlcSIsIiRsaXN0IiwiY2xhc3MiLCJpbnNlcnRBZnRlciIsInJlbCIsInZhbCIsImFwcGVuZFRvIiwiJGxpc3RJdGVtcyIsInN0b3BQcm9wYWdhdGlvbiIsImF0dHIiXSwibWFwcGluZ3MiOiJtcENBQ0FBLE9BQU9DLGVBQWlCLFdBQ3RCRCxPQUFPRSxTQUFTLEVBQUcsSUFHckIsSUFBSUMsUUFBVSxTQUFDQyxHQUF5QixJQUFqQkMsRUFBaUIsRUFBQUMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQVIsSUFFOUJGLEVBQU9LLE1BQU1DLG1CQUFxQiwwQkFDbENOLEVBQU9LLE1BQU1FLG1CQUFxQk4sRUFBVyxLQUM3Q0QsRUFBT0ssTUFBTUcsT0FBU1IsRUFBT1MsYUFBZSxLQUM1Q1QsRUFBT1MsYUFDUFQsRUFBT0ssTUFBTUssU0FBVyxTQUN4QlYsRUFBT0ssTUFBTUcsT0FBUyxFQUN0QlIsRUFBT0ssTUFBTU0sV0FBYSxFQUMxQlgsRUFBT0ssTUFBTU8sY0FBZ0IsRUFDN0JaLEVBQU9LLE1BQU1RLFVBQVksRUFDekJiLEVBQU9LLE1BQU1TLGFBQWUsRUFDNUJsQixPQUFPbUIsV0FBWSxXQUNiZixFQUFPSyxNQUFNVyxRQUFVLE9BQ3ZCaEIsRUFBT0ssTUFBTVksZUFBZSxVQUM1QmpCLEVBQU9LLE1BQU1ZLGVBQWUsZUFDNUJqQixFQUFPSyxNQUFNWSxlQUFlLGtCQUM1QmpCLEVBQU9LLE1BQU1ZLGVBQWUsY0FDNUJqQixFQUFPSyxNQUFNWSxlQUFlLGlCQUM1QmpCLEVBQU9LLE1BQU1ZLGVBQWUsWUFDNUJqQixFQUFPSyxNQUFNWSxlQUFlLHVCQUM1QmpCLEVBQU9LLE1BQU1ZLGVBQWUsd0JBRS9CaEIsSUFHRGlCLFVBQVksU0FBQ2xCLEdBQXlCLElBQWpCQyxFQUFpQixFQUFBQyxVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBUixJQUVoQ0YsRUFBT0ssTUFBTVksZUFBZSxXQUM1QixJQUFJRCxFQUFVcEIsT0FBT3VCLGlCQUFpQm5C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Q2YwRCxFQUFNRSxLQUFLLDhCQUNYRixFQUFNRyxNQUFNLHNDQUVaLElBQUlDLEVBQWdCSixFQUFNSyxLQUFLLHNCQUMvQkQsRUFBY0UsT0FBTyxvREFDckJGLEVBQWM1RCxLQUFLLFFBQVErRCxLQUFLUCxFQUFNdEUsU0FBUyxVQUFVOEUsR0FBRyxHQUFHRCxRQU0vRCxJQUpBLElBQUlFLEVBQVFoRyxFQUFFLFNBQVUsQ0FDdEJpRyxNQUFTLG9CQUNSQyxZQUFZUCxHQUVOdEYsRUFBSSxFQUFHQSxFQUFJbUYsRUFBaUJuRixJQUNuQ0wsRUFBRSxTQUFVLENBQ1Y4RixLQUFNUCxFQUFNdEUsU0FBUyxVQUFVOEUsR0FBRzFGLEdBQUd5RixPQUNyQ0ssSUFBS1osRUFBTXRFLFNBQVMsVUFBVThFLEdBQUcxRixHQUFHK0YsUUFDbkNDLFNBQVNMLEdBR2QsSUFBSU0sRUFBYU4sRUFBTS9FLFNBQVMsTUFFaEMwRSxFQUFjbEUsTUFBTSxTQUFTbkMsR0FDM0JBLEVBQUVpSCxrQkFDRnZHLEVBQUUsNkJBQTZCMEIsSUFBSWhDLE1BQU00RixLQUFLLFdBQzVDdEYsRUFBRU4sTUFBTWtDLFlBQVksVUFBVWdFLEtBQUssc0JBQXNCbEosUUFBUSxPQUVuRXNELEVBQUVOLE1BQU02RCxZQUFZLFVBQVVxQyxLQUFLLHNCQUFzQjdILFlBQVksT0FHdkV1SSxFQUFXN0UsTUFBTSxTQUFTbkMsR0FDeEJBLEVBQUVpSCxrQkFDRlosRUFBYzVELEtBQUssUUFBUStELEtBQUs5RixFQUFFTixNQUFNb0csUUFBUWxFLFlBQVksVUFDNUQyRCxFQUFNYSxJQUFJcEcsRUFBRU4sTUFBTThHLEtBQUssUUFDdkJSLEVBQU10SixRQUFRLE9BR2hCc0QsRUFBRTdCLFVBQVVzRCxNQUFNLFdBQ2hCa0UsRUFBYy9ELFlBQVksVUFDMUJvRSxFQUFNdEosUUFBUSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFNjcm9sbCB0byB0aGUgdG9wIGJlZm9yZSB0aGUgcGFnZSBsb2Fkc1xyXG53aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG59XHJcblxyXG5sZXQgc2xpZGVVcCA9ICh0YXJnZXQsIGR1cmF0aW9uPTUwMCkgPT4ge1xyXG5cclxuICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gJ2hlaWdodCwgbWFyZ2luLCBwYWRkaW5nJztcclxuICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gZHVyYXRpb24gKyAnbXMnO1xyXG4gIHRhcmdldC5zdHlsZS5oZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gIHRhcmdldC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gIHRhcmdldC5zdHlsZS5oZWlnaHQgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuICB0YXJnZXQuc3R5bGUucGFkZGluZ0JvdHRvbSA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpblRvcCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XHJcbiAgd2luZG93LnNldFRpbWVvdXQoICgpID0+IHtcclxuICAgICAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy10b3AnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctYm90dG9tJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tdG9wJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tYm90dG9tJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1kdXJhdGlvbicpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1wcm9wZXJ0eScpO1xyXG4gICAgICAgIC8vYWxlcnQoXCIhXCIpO1xyXG4gIH0sIGR1cmF0aW9uKTtcclxufVxyXG5cclxubGV0IHNsaWRlRG93biA9ICh0YXJnZXQsIGR1cmF0aW9uPTUwMCkgPT4ge1xyXG5cclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTtcclxuICBsZXQgZGlzcGxheSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZGlzcGxheTtcclxuICBpZiAoZGlzcGxheSA9PT0gJ25vbmUnKSBkaXNwbGF5ID0gJ2Jsb2NrJztcclxuICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XHJcbiAgbGV0IGhlaWdodCA9IHRhcmdldC5vZmZzZXRIZWlnaHQ7XHJcbiAgdGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5wYWRkaW5nQm90dG9tID0gMDtcclxuICB0YXJnZXQuc3R5bGUubWFyZ2luVG9wID0gMDtcclxuICB0YXJnZXQuc3R5bGUubWFyZ2luQm90dG9tID0gMDtcclxuICB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSBcImhlaWdodCwgbWFyZ2luLCBwYWRkaW5nXCI7XHJcbiAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uICsgJ21zJztcclxuICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xyXG4gIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLXRvcCcpO1xyXG4gIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xyXG4gIHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiB7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcclxuICB9LCBkdXJhdGlvbik7XHJcbn1cclxuXHJcbnZhciBzbGlkZVRvZ2dsZSA9ICh0YXJnZXQsIGR1cmF0aW9uID0gNTAwKSA9PiB7XHJcbiAgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZGlzcGxheSA9PT0gJ25vbmUnKSB7XHJcbiAgICByZXR1cm4gc2xpZGVEb3duKHRhcmdldCwgZHVyYXRpb24pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gc2xpZGVVcCh0YXJnZXQsIGR1cmF0aW9uKTtcclxuICB9XHJcbn1cclxuXHJcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgLy8gVmFyaWFiZWxzXHJcbiAgbGV0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpO1xyXG4gIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlclwiKTtcclxuICBsZXQgdGVjaG5vbG9neUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVjaG5vbG9neS1jYXJkJyk7XHJcbiAgbGV0IHRlY2hub2xvZ3lDYXJkQm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKVxyXG4gIGxldCB0YWJDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50YWJzX19pdGVtXCIpO1xyXG4gIGxldCB0YWJJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50YWJzX190cmlnZ2VyXCIpO1xyXG4gIGxldCB0YWJEcm9wZG93blRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRyZWF0bWVudHMgLmRyb3Bkb3duX190cmlnZ2VyIC5kcm9wZG93bl9fdHJpZ2dlci10ZXh0XCIpO1xyXG4gIGxldCB0cmVhdG1lbnRzRHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRyZWF0bWVudHMgLmRyb3Bkb3duXCIpO1xyXG4gIGxldCB0cmVhdG1lbnRzRHJvcGRvd25MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmVhdG1lbnRzIC5kcm9wZG93bl9fbGlzdFwiKVxyXG5cclxuICAvLyBTY3JvbGwgdG8gY29udGFjdHMtZm9ybVxyXG4gIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZWFkZXItY29udGFjdHNfX2xpbmtcIik7XHJcblxyXG4gIGZvciAoY29uc3QgbGluayBvZiBsaW5rcykge1xyXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tIYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBocmVmID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xyXG4gICAgY29uc3Qgb2Zmc2V0VG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihocmVmKS5vZmZzZXRUb3A7XHJcblxyXG4gICAgc2Nyb2xsKHtcclxuICAgICAgdG9wOiBvZmZzZXRUb3AgLSAxMDAsXHJcbiAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIE1hbmlwdWxhdGlvbnMgd2l0aCBoZWFkZXIgY2xhc3NlcyBvbiBzY3JvbGxcclxuICBsZXQgc2Nyb2xsQ2hhbmdlID0gMTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gICAgbGV0IHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuXHJcbiAgICBpZiAoc2Nyb2xsID49IHNjcm9sbENoYW5nZSkge1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZChcImpzLXNjcm9sbC1kb3duXCIpO1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLXNjcm9sbC10b3BcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZChcImpzLXNjcm9sbC10b3BcIik7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwianMtc2Nyb2xsLWRvd25cIiwgXCJqcy1uYXYtb3BlblwiLCBcImpzLW5hdi1jbG9zZVwiKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gVGFic1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGFiSXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgdGFiSXRlbVtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cclxuICAgICAgdGFiQ29udGVudC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRhYkl0ZW0uZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0YWJDb250ZW50W2ldLmNsYXNzTGlzdC5hZGQoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIHRhYkl0ZW1baV0uY2xhc3NMaXN0LmFkZChcImpzLWFjdGl2ZVwiKTtcclxuXHJcbiAgICAgIHRhYkRyb3Bkb3duVHJpZ2dlci50ZXh0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFic19fdHJpZ2dlci5qcy1hY3RpdmVcIikudGV4dENvbnRlbnRcclxuICAgIH0pO1xyXG4gIH0gXHJcbiAgXHJcbiAgaWYgKHRhYkRyb3Bkb3duVHJpZ2dlcikge1xyXG4gICAgdGFiRHJvcGRvd25UcmlnZ2VyLnRleHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YWJzX190cmlnZ2VyLmpzLWFjdGl2ZVwiKS50ZXh0Q29udGVudFxyXG4gIH1cclxuICAvLyBDdXN0b20gc2Nyb2xsYmFyIGluIHRvb3RoIHRhYmxlXHJcbiAgT3ZlcmxheVNjcm9sbGJhcnMoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b290aFwiKSwge30pO1xyXG5cclxuICAvLyBGaWxlcyBpbnB1dFxyXG4gIGxldCBmaWxlc1RyaWdnZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZScpO1xyXG4gIGxldCBmaWxlc1RhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbGVzX190YWJsZScpO1xyXG4gIFxyXG4gIGxldCB1cGRhdGVGaWxlc0xpc3QgPSAoKSA9PiB7XHJcbiAgICBsZXQgY2hpbGRyZW4gPSBcIlwiO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlc1RyaWdnZXIuZmlsZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgY2hpbGRyZW4gKz0gICc8ZGl2IGNsYXNzPVwiZmlsZXNfX3dyYXBwZXJcIj4nICsgJzxkaXYgY2xhc3M9XCJmaWxlcy1pdGVtXCI+JyArICc8aSBjbGFzcz1cImljb24tZmlsZVwiPjwvaT4nICsgJzxzcGFuIGNsYXNzPVwiZmlsZXMtaXRlbV9fbmFtZVwiPicgKyBmaWxlc1RyaWdnZXIuZmlsZXMuaXRlbShpKS5uYW1lICsgJzwvc3Bhbi8+JyArICc8aSBjbGFzcz1cImZpbGVzLWl0ZW1fX3JlbW92ZSBpY29uLXRyYXNoLWNhblwiIG9uY2xpY2s9XCJyZXR1cm4gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlKCk7XCI+PC9pPicgKyAnPC9kaXY+JyArICc8L2Rpdj4nXHJcbiAgICB9XHJcbiAgICBmaWxlc1RhYmxlLmlubmVySFRNTCA9IGNoaWxkcmVuO1xyXG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+PSAwKSB7XHJcbiAgICAgIGZpbGVzVGFibGUuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZmlsZXNUYWJsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoZmlsZXNUcmlnZ2VyKSB7XHJcbiAgICBmaWxlc1RyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgIHVwZGF0ZUZpbGVzTGlzdCgpXHJcbiAgICB9KVxyXG4gIH1cclxuICBcclxuICAvLyBNZWRpYSA5OTIgPT09PT0+XHJcbiAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogOTkycHgpXCIpLm1hdGNoZXMpIHtcclxuICAgIC8vIE9wZW5pbmcgZGVza3RvcCBtZW51IHdpdGggYnVyZ2VyXHJcbiAgICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKGhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1uYXYtb3BlblwiKSkge1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwianMtbmF2LW9wZW5cIik7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1uYXYtY2xvc2VcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1uYXYtb3BlblwiKTtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLW5hdi1jbG9zZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gT3BlbmluZyB0ZWNobm9sb2d5IGFjY29yZGlvblxyXG4gICAgJCgnLnRlY2hub2xvZ3lfX3dyYXBwZXInKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICQoXCIudGVjaG5vbG9neV9fd3JhcHBlclwiKS5ub3QoJCh0aGlzKS5jbG9zZXN0KFwiLnRlY2hub2xvZ3lfX3dyYXBwZXJcIikpLnJlbW92ZUNsYXNzKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICAkKHRoaXMpLmNsb3Nlc3QoXCIudGVjaG5vbG9neV9fd3JhcHBlclwiKS5hZGRDbGFzcyhcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2pzLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgJCgnLnRlY2hub2xvZ3ktY2FyZF9fYm9keScpLm5vdCgkKHRoaXMpLmZpbmQoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKSkuc2xpZGVVcCgzMDApO1xyXG4gICAgICAgICQodGhpcykuZmluZCgnLnRlY2hub2xvZ3ktY2FyZF9fYm9keScpLnNsaWRlRG93bigzMDApO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdGVjaG5vbG9neUNhcmQubGVuZ3RoOyBpKyspIHtcclxuICAgIC8vICAgdGVjaG5vbG9neUNhcmRbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIC8vICAgICB0ZWNobm9sb2d5Q2FyZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAvLyAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAvLyAgICAgfSk7XHJcblxyXG4gICAgLy8gICAgIC8vIHRlY2hub2xvZ3lDYXJkQm9keS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAvLyAgICAgLy8gICBzbGlkZVVwKGVsZW1lbnQpXHJcbiAgICAvLyAgICAgLy8gfSk7XHJcblxyXG4gICAgLy8gICAgIHRlY2hub2xvZ3lDYXJkW2ldLmNsYXNzTGlzdC5hZGQoJ2pzLWFjdGl2ZScpO1xyXG5cclxuICAgIC8vICAgICAvLyBBZGQgY2xhc3MgdG8gdGhlIGVsZW1lbnQgdGhhdCB3YXMgY2xpY2tlZFxyXG4gICAgLy8gICAgIHNsaWRlRG93bih0ZWNobm9sb2d5Q2FyZEJvZHlbaV0sIDMwMClcclxuICAgIC8vICAgfSk7XHJcbiAgICAvLyB9XHJcbiAgICBcclxuXHJcbiAgICBsZXQgaG9yaXpvbnRhbFNjcm9sbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5ob3Jpem9udGFsLXNjcm9sbCcpXHJcblxyXG4gICAgaWYgKGhvcml6b250YWxTY3JvbGwpIHtcclxuICAgICAgLy8gSG9yaXpvbnRhbCBzY3JvbGwgaW4gVHJlYXRtZW50cyA9PT09PT5cclxuICAgICAgZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKTtcclxuICBcclxuICAgICAgY29uc3Qgc2VjdGlvbnMgPSBnc2FwLnV0aWxzLnRvQXJyYXkoXCIuaG9yaXpvbnRhbC1zY3JvbGxcIik7XHJcbiAgICAgIGxldCBtYXhXaWR0aCA9IDA7XHJcbiAgXHJcbiAgICAgIGNvbnN0IGdldE1heFdpZHRoID0gKCkgPT4ge1xyXG4gICAgICAgIG1heFdpZHRoID0gMDtcclxuICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICBtYXhXaWR0aCArPSBzZWN0aW9uLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICBnZXRNYXhXaWR0aCgpO1xyXG4gICAgICBTY3JvbGxUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWZyZXNoSW5pdFwiLCBnZXRNYXhXaWR0aCk7XHJcbiAgXHJcbiAgICAgIGxldCB0cmlnZ2VySXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmVhdG1lbnRzJyk7XHJcbiAgXHJcbiAgICAgIGdzYXAudG8oc2VjdGlvbnMsIHtcclxuICAgICAgICB4OiAoKSA9PiBgLSR7bWF4V2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aH1gLFxyXG4gICAgICAgIGVhc2U6IFwibm9uZVwiLFxyXG4gICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcclxuICAgICAgICAgIHN0YXJ0OiBcIi0xMjBweCB0b3BcIixcclxuICAgICAgICAgIHRyaWdnZXI6IHRyaWdnZXJJdGVtLFxyXG4gICAgICAgICAgcGluOiB0cnVlLFxyXG4gICAgICAgICAgc2NydWI6IHRydWUsXHJcbiAgICAgICAgICBlbmQ6ICgpID0+IGArPSR7bWF4V2lkdGh9YCxcclxuICAgICAgICAgIGludmFsaWRhdGVPblJlZnJlc2g6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICBzZWN0aW9ucy5mb3JFYWNoKChzY3QsIGkpID0+IHtcclxuICAgICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICB0cmlnZ2VyOiBzY3QsXHJcbiAgICAgICAgICBzdGFydDogKCkgPT4gJ3RvcCB0b3AtPScgKyAoc2N0Lm9mZnNldExlZnQgLSB3aW5kb3cuaW5uZXJXaWR0aC8yKSAqIChtYXhXaWR0aCAvIChtYXhXaWR0aCAtIHdpbmRvdy5pbm5lcldpZHRoKSksXHJcbiAgICAgICAgICBlbmQ6ICgpID0+ICcrPScgKyBzY3Qub2Zmc2V0V2lkdGggKiAobWF4V2lkdGggLyAobWF4V2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aCkpLFxyXG4gICAgICAgICAgdG9nZ2xlQ2xhc3M6IHt0YXJnZXRzOiBzY3QsIGNsYXNzTmFtZTogXCJhY3RpdmVcIn1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICB9IGVsc2Uge1xyXG4gICAgLy8gVG9nZ2xlIHZpc2libGUgZWxlbWVudHNcclxuICAgIGxldCBzaG93VHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2hvd19fdHJpZ2dlclwiKTtcclxuICAgIGxldCBzaG93SXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2hvd19faXRlbVwiKTtcclxuXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHNob3dUcmlnZ2VyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHNob3dUcmlnZ2VyW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgc2hvd1RyaWdnZXJbaV0uY2xhc3NMaXN0LnRvZ2dsZSgnanMtYWN0aXZlJylcclxuXHJcbiAgICAgICAgaWYgKHNob3dUcmlnZ2VyW2ldLmNsYXNzTGlzdC5jb250YWlucyhcImpzLWFjdGl2ZVwiKSkge1xyXG4gICAgICAgICAgc2hvd1RyaWdnZXJbaV0udGV4dENvbnRlbnQgPSAnU2VlIGxlc3MnXHJcbiAgICAgICAgICBzaG93SXRlbS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwiYmxvY2tcIlxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHNob3dUcmlnZ2VyW2ldLnRleHRDb250ZW50ID0gJ1NlZSBhbGwnXHJcbiAgICAgICAgICBzaG93SXRlbS5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUuZGlzcGxheSA9IFwibm9uZVwiXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgXHJcbiAgICAvLyBUcmVhdG1lbnRzIHBhZ2UgdGFicyBuYXZpZ2F0aW9uXHJcbiAgICBpZiAodHJlYXRtZW50c0Ryb3Bkb3duICYmIHRyZWF0bWVudHNEcm9wZG93bkxpc3QpIHtcclxuICAgICAgbGV0IG9mZnNldEl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuZHJvcGRvd25fX2xpc3QnKS5vZmZzZXRIZWlnaHRcclxuICAgICAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnNldFByb3BlcnR5KFwiLS10cmVhdG1lbnRzLWRyb3Bkb3duLW9mZnNldFwiLCBvZmZzZXRJdGVtICsgXCJweFwiKVxyXG4gICAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcInNjcm9sbFwiLCAoKSA9PiB7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaWYgKHdpbmRvdy5zY3JvbGxZID4gb2Zmc2V0SXRlbSArIDY0ICkge1xyXG4gICAgICAgICAgdHJlYXRtZW50c0Ryb3Bkb3duLmNsYXNzTGlzdC5hZGQoXCJqcy1zY3JvbGwtZG93blwiKTtcclxuICAgICAgICAgIHRyZWF0bWVudHNEcm9wZG93bkxpc3Quc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRyZWF0bWVudHMnKS5jbGFzc0xpc3QuYWRkKFwib2Zmc2V0LXRvcFwiKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0cmVhdG1lbnRzRHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZShcImpzLXNjcm9sbC1kb3duXCIpO1xyXG4gICAgICAgICAgdHJlYXRtZW50c0Ryb3Bkb3duTGlzdC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnRyZWF0bWVudHMnKS5jbGFzc0xpc3QucmVtb3ZlKFwib2Zmc2V0LXRvcFwiKVxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0cmVhdG1lbnRzRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRyZWF0bWVudHNEcm9wZG93bi5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1zY3JvbGwtZG93blwiKSkge1xyXG4gICAgICAgICAgc2xpZGVUb2dnbGUodHJlYXRtZW50c0Ryb3Bkb3duTGlzdCwgMzAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbnVsbFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8vIE9wZW5pbmcgbW9iaWxlIG1lbnUgd2l0aCBidXJnZXJcclxuICAgIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZShcImpzLW5hdi1vcGVuXCIpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJqcy1sb2NrXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gT3BlbmluZyB0ZWNobm9sb2d5IGFjY29yZGlvbnMgISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhIVxyXG4gICAgLy8gJCgnLnRlY2hub2xvZ3lfX3dyYXBwZXIgLnRlY2hub2xvZ3ktY2FyZCcpLm5vdCgkKCcudGVjaG5vbG9neV9fd3JhcHBlci5zZWNvbmRhcnkgLnRlY2hub2xvZ3ktY2FyZCcpKS5yZW1vdmVDbGFzcygnanMtYWN0aXZlJylcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVjaG5vbG9neUNhcmQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGVjaG5vbG9neUNhcmRbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAvLyBSZW1vdmUgY2xhc3MgZnJvbSBhbGwgZWxlbWVudHNcclxuICAgICAgICB0ZWNobm9sb2d5Q2FyZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBjbGFzcyB0byB0aGUgZWxlbWVudCB0aGF0IHdhcyBjbGlja2VkXHJcbiAgICAgICAgdGVjaG5vbG9neUNhcmRbaV0uY2xhc3NMaXN0LmFkZChcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQmxvY2sgc2xpZGVyICdUcmVhdG1lbnRzJ1xyXG4gICAgY29uc3Qgc2xpZGVyVHJlYXRtZW50cyA9IG5ldyBTd2lwZXIoJy50cmVhdG1lbnRzLXNsaWRlcicsIHtcclxuICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgIG5leHRFbDogXCIudHJlYXRtZW50cy1idXR0b24tbmV4dFwiLFxyXG4gICAgICAgIHByZXZFbDogXCIudHJlYXRtZW50cy1idXR0b24tcHJldlwiLFxyXG4gICAgICB9LFxyXG4gICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgZWw6IFwiLnRyZWF0bWVudHMtcGFnaW5hdGlvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgIDc2ODoge1xyXG4gICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gQmxvY2sgc2xpZGVyICdQcmFjdGljZXMnXHJcbiAgY29uc3Qgc2xpZGVyUHJhY3RpY2VzID0gbmV3IFN3aXBlcignLnByYWN0aWNlcy1zbGlkZXInLCB7XHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiA0MCxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi5wcmFjdGljZXMtYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi5wcmFjdGljZXMtYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi5wcmFjdGljZXMtcGFnaW5hdGlvblwiLFxyXG4gICAgfSxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLy8gQmxvY2sgc2xpZGVyICdUZXN0aW1vbmlhbHMnXHJcbiAgY29uc3Qgc2xpZGVyVGVzdGltb25pYWxzID0gbmV3IFN3aXBlcignLnRlc3RpbW9uaWFscy1zbGlkZXInLCB7XHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIudGVzdGltb25pYWxzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIudGVzdGltb25pYWxzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIudGVzdGltb25pYWxzLXBhZ2luYXRpb25cIixcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICB9LFxyXG4gICAgICA5OTI6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcbiAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KVxyXG5cclxuICAvLyBCbG9jayBzbGlkZXIgJ0Nhc2VzJ1xyXG4gIGNvbnN0IHNsaWRlckNhc2VzID0gbmV3IFN3aXBlcignLmNhc2VzLXNsaWRlcicsIHtcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLmNhc2VzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIuY2FzZXMtYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi5jYXNlcy1wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNzY4OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAvLyBCbG9jayBzbGlkZXIgJ1NvY2lhbHMnXHJcbiAgY29uc3Qgc2xpZGVyU29jaWFscyA9IG5ldyBTd2lwZXIoJy5zb2NpYWxzX19zbGlkZXInLCB7XHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi5zb2NpYWxzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIuc29jaWFscy1idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLnNvY2lhbHMtcGFnaW5hdGlvblwiLFxyXG4gICAgfSxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgfSlcclxufSIsIi8vIEF1dG8gc2l6ZSB0ZXh0YXJlYSA9PT09PT5cclxudmFyIHRleHRhcmVhID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKTtcclxuXHJcbmlmICh0ZXh0YXJlYSkge1xyXG4gIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhdXRvc2l6ZVRleHRhcmVhKTtcclxufSBlbHNlIHtcclxuICBudWxsXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGF1dG9zaXplVGV4dGFyZWEoKXtcclxuXHR2YXIgZWwgPSB0aGlzO1xyXG5cdHNldFRpbWVvdXQoZnVuY3Rpb24oKXtcclxuXHRcdGVsLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OmF1dG87IHBhZGRpbmc6MCc7XHJcblx0XHRlbC5zdHlsZS5jc3NUZXh0ID0gJy1tb3otYm94LXNpemluZzpjb250ZW50LWJveCc7XHJcblx0XHRlbC5zdHlsZS5jc3NUZXh0ID0gJ2hlaWdodDonICsgZWwuc2Nyb2xsSGVpZ2h0ICsgJ3B4JztcclxuXHR9LDApO1xyXG59XHJcblxyXG4vLyBDdXN0b20gc2VsZWN0ID09PT09PlxyXG4kKCdzZWxlY3QnKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgdmFyICR0aGlzID0gJCh0aGlzKSwgbnVtYmVyT2ZPcHRpb25zID0gJCh0aGlzKS5jaGlsZHJlbignb3B0aW9uJykubGVuZ3RoO1xyXG5cclxuICAkdGhpcy5hZGRDbGFzcygnc2VsZWN0X19oaWRkZW4nKTsgXHJcbiAgJHRoaXMud3JhcCgnPGRpdiBjbGFzcz1cInNlbGVjdFwiPjwvZGl2PicpO1xyXG4gICR0aGlzLmFmdGVyKCc8ZGl2IGNsYXNzPVwic2VsZWN0X19zdHlsZWRcIj48L2Rpdj4nKTtcclxuXHJcbiAgdmFyICRzdHlsZWRTZWxlY3QgPSAkdGhpcy5uZXh0KCdkaXYuc2VsZWN0X19zdHlsZWQnKTtcclxuICAkc3R5bGVkU2VsZWN0LmFwcGVuZCgnPHNwYW4+PC9zcGFuPjxpIGNsYXNzPVwiaWNvbi1hcnJvdy1kcm9wZG93blwiPjwvaT4nKVxyXG4gICRzdHlsZWRTZWxlY3QuZmluZCgnc3BhbicpLnRleHQoJHRoaXMuY2hpbGRyZW4oJ29wdGlvbicpLmVxKDApLnRleHQoKSk7XHJcblxyXG4gIHZhciAkbGlzdCA9ICQoJzx1bCAvPicsIHtcclxuICAgICdjbGFzcyc6ICdzZWxlY3RfX29wdGlvbnMnXHJcbiAgfSkuaW5zZXJ0QWZ0ZXIoJHN0eWxlZFNlbGVjdCk7XHJcblxyXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtYmVyT2ZPcHRpb25zOyBpKyspIHtcclxuICAgICQoJzxsaSAvPicsIHtcclxuICAgICAgdGV4dDogJHRoaXMuY2hpbGRyZW4oJ29wdGlvbicpLmVxKGkpLnRleHQoKSxcclxuICAgICAgcmVsOiAkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoaSkudmFsKClcclxuICAgIH0pLmFwcGVuZFRvKCRsaXN0KTtcclxuICB9XHJcblxyXG4gIHZhciAkbGlzdEl0ZW1zID0gJGxpc3QuY2hpbGRyZW4oJ2xpJyk7XHJcblxyXG4gICRzdHlsZWRTZWxlY3QuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICQoJ2Rpdi5zZWxlY3RfX3N0eWxlZC5hY3RpdmUnKS5ub3QodGhpcykuZWFjaChmdW5jdGlvbigpe1xyXG4gICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKS5uZXh0KCd1bC5zZWxlY3RfX29wdGlvbnMnKS5zbGlkZVVwKDMwMCk7XHJcbiAgICB9KTtcclxuICAgICQodGhpcykudG9nZ2xlQ2xhc3MoJ2FjdGl2ZScpLm5leHQoJ3VsLnNlbGVjdF9fb3B0aW9ucycpLnNsaWRlVG9nZ2xlKDMwMCk7XHJcbiAgfSk7XHJcblxyXG4gICRsaXN0SXRlbXMuY2xpY2soZnVuY3Rpb24oZSkge1xyXG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICRzdHlsZWRTZWxlY3QuZmluZCgnc3BhbicpLnRleHQoJCh0aGlzKS50ZXh0KCkpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICR0aGlzLnZhbCgkKHRoaXMpLmF0dHIoJ3JlbCcpKTtcclxuICAgICRsaXN0LnNsaWRlVXAoMzAwKTtcclxuICB9KTtcclxuXHJcbiAgJChkb2N1bWVudCkuY2xpY2soZnVuY3Rpb24oKSB7XHJcbiAgICAkc3R5bGVkU2VsZWN0LnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcclxuICAgICRsaXN0LnNsaWRlVXAoMzAwKTtcclxuICB9KTtcclxuXHJcbn0pOyJdfQ==