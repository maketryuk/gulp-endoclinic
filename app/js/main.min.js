"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}window.onbeforeunload=function(){window.scrollTo(0,0)};var slideUp=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideDown=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.removeProperty("display");var n=window.getComputedStyle(e).display;e.style.display=n="none"===n?"block":n;n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideToggle=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;return("none"===window.getComputedStyle(e).display?slideDown:slideUp)(e,t)};window.onload=function(){var e,r=document.querySelector(".burger"),i=document.querySelector(".header"),s=document.querySelectorAll(".technology-card"),t=(document.querySelectorAll(".technology-card__body"),document.querySelectorAll(".tabs__item")),n=document.querySelectorAll(".tabs__trigger"),o=document.querySelector(".treatments .dropdown__trigger .dropdown__trigger-text"),a=document.querySelector(".treatments .dropdown"),l=document.querySelector(".treatments .dropdown__list"),c=_createForOfIteratorHelper(document.querySelectorAll(".header-contacts__link"));try{for(c.s();!(e=c.n()).done;)e.value.addEventListener("click",d)}catch(e){c.e(e)}finally{c.f()}function d(e){e.preventDefault();e=this.getAttribute("href"),e=document.querySelector(e).offsetTop;scroll({top:e-100,behavior:"smooth"})}window.addEventListener("scroll",function(){1<=$(window).scrollTop()?(i.classList.add("js-scroll-down"),i.classList.remove("js-scroll-top")):(i.classList.add("js-scroll-top"),i.classList.remove("js-scroll-down","js-nav-open","js-nav-close"))});for(var p=0;p<n.length;p++)!function(e){n[e].addEventListener("click",function(){t.forEach(function(e){e.classList.remove("js-active")}),n.forEach(function(e){e.classList.remove("js-active")}),t[e].classList.add("js-active"),n[e].classList.add("js-active"),o.textContent=document.querySelector(".tabs__trigger.js-active").textContent})}(p);o&&(o.textContent=document.querySelector(".tabs__trigger.js-active").textContent),OverlayScrollbars(document.querySelectorAll(".tooth"),{});var u,y,v,g=document.getElementById("file"),f=document.querySelector(".files__table");g&&g.addEventListener("change",function(){!function(){for(var e="",t=0;t<g.files.length;++t)e+='<div class="files__wrapper"><div class="files-item"><i class="icon-file"></i><span class="files-item__name">'+g.files.item(t).name+'</span/><i class="files-item__remove icon-trash-can" onclick="return this.parentNode.parentNode.remove();"></i></div></div>';0<=(f.innerHTML=e).length?f.style.display="flex":f.style.display="none"}()}),window.matchMedia("(min-width: 992px)").matches?(r.addEventListener("click",function(){i.classList.contains("js-nav-open")?(i.classList.remove("js-nav-open"),i.classList.add("js-nav-close")):(i.classList.add("js-nav-open"),i.classList.remove("js-nav-close"))}),$(".technology__wrapper").click(function(){$(".technology__wrapper").not($(this).closest(".technology__wrapper")).removeClass("js-active"),$(this).closest(".technology__wrapper").addClass("js-active"),$(this).hasClass("js-active")&&($(".technology-card__body").not($(this).find(".technology-card__body")).slideUp(300),$(this).find(".technology-card__body").slideDown(300))}),document.querySelector(".horizontal-scroll")&&(gsap.registerPlugin(ScrollTrigger),u=gsap.utils.toArray(".horizontal-scroll"),y=0,(v=function(){y=0,u.forEach(function(e){y+=e.offsetWidth})})(),ScrollTrigger.addEventListener("refreshInit",v),v=document.querySelector(".treatments"),gsap.to(u,{x:function(){return"-".concat(y-window.innerWidth)},ease:"none",scrollTrigger:{start:"-120px top",trigger:v,pin:!0,scrub:!0,end:function(){return"+=".concat(y)},invalidateOnRefresh:!0}}),u.forEach(function(e,t){ScrollTrigger.create({trigger:e,start:function(){return"top top-="+(e.offsetLeft-window.innerWidth/2)*(y/(y-window.innerWidth))},end:function(){return"+="+e.offsetWidth*(y/(y-window.innerWidth))},toggleClass:{targets:e,className:"active"}})}))):function(){for(var t=document.querySelectorAll(".show__trigger"),n=document.querySelectorAll(".show__item"),e=0;e<t.length;e++)!function(e){t[e].addEventListener("click",function(){t[e].classList.toggle("js-active"),t[e].classList.contains("js-active")?(t[e].textContent="See less",n.forEach(function(e){e.style.display="block"})):(t[e].textContent="See all",n.forEach(function(e){e.style.display="none"}))})}(e);a&&l&&(window.addEventListener("scroll",function(){var e=document.querySelector(".header").offsetHeight;window.scrollY>e+64?(a.classList.add("js-scroll-down"),l.style.display="none"):(a.classList.remove("js-scroll-down"),l.style.display="block")}),a.addEventListener("click",function(){a.classList.contains("js-scroll-down")&&slideToggle(l,300)})),r.addEventListener("click",function(){i.classList.toggle("js-nav-open"),document.body.classList.toggle("js-lock")});for(var o=0;o<s.length;o++)!function(e){s[e].addEventListener("click",function(){s.forEach(function(e){e.classList.remove("js-active")}),s[e].classList.add("js-active")})}(o);new Swiper(".treatments-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".treatments-button-next",prevEl:".treatments-button-prev"},pagination:{el:".treatments-pagination"},breakpoints:{768:{slidesPerView:2}}})}();new Swiper(".practices-slider",{slidesPerView:1,spaceBetween:40,navigation:{nextEl:".practices-button-next",prevEl:".practices-button-prev"},pagination:{el:".practices-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".testimonials-slider",{slidesPerView:1,spaceBetween:30,loop:!0,navigation:{nextEl:".testimonials-button-next",prevEl:".testimonials-button-prev"},pagination:{el:".testimonials-pagination"},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:"auto",centeredSlides:!0}}}),new Swiper(".cases-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".cases-button-next",prevEl:".cases-button-prev"},pagination:{el:".cases-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".socials__slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".socials-button-next",prevEl:".socials-button-prev"},pagination:{el:".socials-pagination"},breakpoints:{768:{slidesPerView:2}}})};var textarea=document.querySelector("textarea");function autosizeTextarea(){var e=this;setTimeout(function(){e.style.cssText="height:auto; padding:0",e.style.cssText="-moz-box-sizing:content-box",e.style.cssText="height:"+e.scrollHeight+"px"},0)}textarea&&textarea.addEventListener("keydown",autosizeTextarea),$("select").each(function(){var t=$(this),e=$(this).children("option").length;t.addClass("select__hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select__styled"></div>');var n=t.next("div.select__styled");n.append('<span></span><i class="icon-arrow-dropdown"></i>'),n.find("span").text(t.children("option").eq(0).text());for(var o=$("<ul />",{class:"select__options"}).insertAfter(n),r=0;r<e;r++)$("<li />",{text:t.children("option").eq(r).text(),rel:t.children("option").eq(r).val()}).appendTo(o);var i=o.children("li");n.click(function(e){e.stopPropagation(),$("div.select__styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select__options").slideUp(300)}),$(this).toggleClass("active").next("ul.select__options").slideToggle(300)}),i.click(function(e){e.stopPropagation(),n.find("span").text($(this).text()).removeClass("active"),t.val($(this).attr("rel")),o.slideUp(300)}),$(document).click(function(){n.removeClass("active"),o.slideUp(300)})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJVSS9jb250YWN0cy1mb3JtL2NvbnRhY3RzLWZvcm0uanMiXSwibmFtZXMiOlsid2luZG93Iiwib25iZWZvcmV1bmxvYWQiLCJzY3JvbGxUbyIsInNsaWRlVXAiLCJ0YXJnZXQiLCJkdXJhdGlvbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInN0eWxlIiwidHJhbnNpdGlvblByb3BlcnR5IiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwib3ZlcmZsb3ciLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSIsIm1hcmdpblRvcCIsIm1hcmdpbkJvdHRvbSIsInNldFRpbWVvdXQiLCJkaXNwbGF5IiwicmVtb3ZlUHJvcGVydHkiLCJzbGlkZURvd24iLCJnZXRDb21wdXRlZFN0eWxlIiwic2xpZGVUb2dnbGUiLCJvbmxvYWQiLCJfc3RlcCIsImJ1cmdlciIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImhlYWRlciIsInRlY2hub2xvZ3lDYXJkIiwicXVlcnlTZWxlY3RvckFsbCIsInRhYkNvbnRlbnQiLCJ0YWJJdGVtIiwidGFiRHJvcGRvd25UcmlnZ2VyIiwidHJlYXRtZW50c0Ryb3Bkb3duIiwidHJlYXRtZW50c0Ryb3Bkb3duTGlzdCIsIl9pdGVyYXRvciIsIl9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIiwicyIsIm4iLCJkb25lIiwidmFsdWUiLCJhZGRFdmVudExpc3RlbmVyIiwiY2xpY2tIYW5kbGVyIiwiZXJyIiwiZSIsImYiLCJwcmV2ZW50RGVmYXVsdCIsImhyZWYiLCJ0aGlzIiwiZ2V0QXR0cmlidXRlIiwib2Zmc2V0VG9wIiwic2Nyb2xsIiwidG9wIiwiYmVoYXZpb3IiLCIkIiwic2Nyb2xsVG9wIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiaSIsImZvckVhY2giLCJpdGVtIiwidGV4dENvbnRlbnQiLCJfbG9vcCIsIk92ZXJsYXlTY3JvbGxiYXJzIiwic2VjdGlvbnMiLCJtYXhXaWR0aCIsInRyaWdnZXJJdGVtIiwiZmlsZXNUcmlnZ2VyIiwiZ2V0RWxlbWVudEJ5SWQiLCJmaWxlc1RhYmxlIiwiY2hpbGRyZW4iLCJmaWxlcyIsIm5hbWUiLCJpbm5lckhUTUwiLCJ1cGRhdGVGaWxlc0xpc3QiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImNvbnRhaW5zIiwiY2xpY2siLCJub3QiLCJjbG9zZXN0IiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImhhc0NsYXNzIiwiZmluZCIsImdzYXAiLCJyZWdpc3RlclBsdWdpbiIsIlNjcm9sbFRyaWdnZXIiLCJ1dGlscyIsInRvQXJyYXkiLCJnZXRNYXhXaWR0aCIsInNlY3Rpb24iLCJvZmZzZXRXaWR0aCIsInRvIiwieCIsImNvbmNhdCIsImlubmVyV2lkdGgiLCJlYXNlIiwic2Nyb2xsVHJpZ2dlciIsInN0YXJ0IiwidHJpZ2dlciIsInBpbiIsInNjcnViIiwiZW5kIiwiaW52YWxpZGF0ZU9uUmVmcmVzaCIsInNjdCIsImNyZWF0ZSIsIm9mZnNldExlZnQiLCJ0b2dnbGVDbGFzcyIsInRhcmdldHMiLCJjbGFzc05hbWUiLCJzaG93VHJpZ2dlciIsInNob3dJdGVtIiwidG9nZ2xlIiwiZWxlbWVudCIsIl9sb29wMiIsIm9mZnNldEl0ZW0xIiwic2Nyb2xsWSIsImJvZHkiLCJfbG9vcDMiLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsInBhZ2luYXRpb24iLCJlbCIsImJyZWFrcG9pbnRzIiwiNzY4IiwibG9vcCIsIjk5MiIsImNlbnRlcmVkU2xpZGVzIiwidGV4dGFyZWEiLCJhdXRvc2l6ZVRleHRhcmVhIiwiY3NzVGV4dCIsInNjcm9sbEhlaWdodCIsImVhY2giLCIkdGhpcyIsIm51bWJlck9mT3B0aW9ucyIsIndyYXAiLCJhZnRlciIsIiRzdHlsZWRTZWxlY3QiLCJuZXh0IiwiYXBwZW5kIiwidGV4dCIsImVxIiwiJGxpc3QiLCJjbGFzcyIsImluc2VydEFmdGVyIiwicmVsIiwidmFsIiwiYXBwZW5kVG8iLCIkbGlzdEl0ZW1zIiwic3RvcFByb3BhZ2F0aW9uIiwiYXR0ciJdLCJtYXBwaW5ncyI6Im1wQ0FDQUEsT0FBT0MsZUFBaUIsV0FDdEJELE9BQU9FLFNBQVMsRUFBRyxJQUdyQixJQUFJQyxRQUFVLFNBQUNDLEdBQXlCLElBQWpCQyxFQUFpQixFQUFBQyxVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBUixJQUU5QkYsRUFBT0ssTUFBTUMsbUJBQXFCLDBCQUNsQ04sRUFBT0ssTUFBTUUsbUJBQXFCTixFQUFXLEtBQzdDRCxFQUFPSyxNQUFNRyxPQUFTUixFQUFPUyxhQUFlLEtBQzVDVCxFQUFPUyxhQUNQVCxFQUFPSyxNQUFNSyxTQUFXLFNBQ3hCVixFQUFPSyxNQUFNRyxPQUFTLEVBQ3RCUixFQUFPSyxNQUFNTSxXQUFhLEVBQzFCWCxFQUFPSyxNQUFNTyxjQUFnQixFQUM3QlosRUFBT0ssTUFBTVEsVUFBWSxFQUN6QmIsRUFBT0ssTUFBTVMsYUFBZSxFQUM1QmxCLE9BQU9tQixXQUFZLFdBQ2JmLEVBQU9LLE1BQU1XLFFBQVUsT0FDdkJoQixFQUFPSyxNQUFNWSxlQUFlLFVBQzVCakIsRUFBT0ssTUFBTVksZUFBZSxlQUM1QmpCLEVBQU9LLE1BQU1ZLGVBQWUsa0JBQzVCakIsRUFBT0ssTUFBTVksZUFBZSxjQUM1QmpCLEVBQU9LLE1BQU1ZLGVBQWUsaUJBQzVCakIsRUFBT0ssTUFBTVksZUFBZSxZQUM1QmpCLEVBQU9LLE1BQU1ZLGVBQWUsdUJBQzVCakIsRUFBT0ssTUFBTVksZUFBZSx3QkFFL0JoQixJQUdEaUIsVUFBWSxTQUFDbEIsR0FBeUIsSUFBakJDLEVBQWlCLEVBQUFDLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFSLElBRWhDRixFQUFPSyxNQUFNWSxlQUFlLFdBQzVCLElBQUlELEVBQVVwQixPQUFPdUIsaUJBQWlCbkIsR0FBUWdCLFFBRTlDaEIsRUFBT0ssTUFBTVcsUUFE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QUlFLEVBQVE5RixFQUFFLFNBQVUsQ0FDdEIrRixNQUFTLG9CQUNSQyxZQUFZUCxHQUVOcEYsRUFBSSxFQUFHQSxFQUFJaUYsRUFBaUJqRixJQUNuQ0wsRUFBRSxTQUFVLENBQ1Y0RixLQUFNUCxFQUFNcEUsU0FBUyxVQUFVNEUsR0FBR3hGLEdBQUd1RixPQUNyQ0ssSUFBS1osRUFBTXBFLFNBQVMsVUFBVTRFLEdBQUd4RixHQUFHNkYsUUFDbkNDLFNBQVNMLEdBR2QsSUFBSU0sRUFBYU4sRUFBTTdFLFNBQVMsTUFFaEN3RSxFQUFjaEUsTUFBTSxTQUFTbkMsR0FDM0JBLEVBQUUrRyxrQkFDRnJHLEVBQUUsNkJBQTZCMEIsSUFBSWhDLE1BQU0wRixLQUFLLFdBQzVDcEYsRUFBRU4sTUFBTWtDLFlBQVksVUFBVThELEtBQUssc0JBQXNCaEosUUFBUSxPQUVuRXNELEVBQUVOLE1BQU02RCxZQUFZLFVBQVVtQyxLQUFLLHNCQUFzQjNILFlBQVksT0FHdkVxSSxFQUFXM0UsTUFBTSxTQUFTbkMsR0FDeEJBLEVBQUUrRyxrQkFDRlosRUFBYzFELEtBQUssUUFBUTZELEtBQUs1RixFQUFFTixNQUFNa0csUUFBUWhFLFlBQVksVUFDNUR5RCxFQUFNYSxJQUFJbEcsRUFBRU4sTUFBTTRHLEtBQUssUUFDdkJSLEVBQU1wSixRQUFRLE9BR2hCc0QsRUFBRTdCLFVBQVVzRCxNQUFNLFdBQ2hCZ0UsRUFBYzdELFlBQVksVUFDMUJrRSxFQUFNcEosUUFBUSIsImZpbGUiOiJtYWluLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFNjcm9sbCB0byB0aGUgdG9wIGJlZm9yZSB0aGUgcGFnZSBsb2Fkc1xyXG53aW5kb3cub25iZWZvcmV1bmxvYWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgd2luZG93LnNjcm9sbFRvKDAsIDApO1xyXG59XHJcblxyXG5sZXQgc2xpZGVVcCA9ICh0YXJnZXQsIGR1cmF0aW9uPTUwMCkgPT4ge1xyXG5cclxuICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gJ2hlaWdodCwgbWFyZ2luLCBwYWRkaW5nJztcclxuICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gZHVyYXRpb24gKyAnbXMnO1xyXG4gIHRhcmdldC5zdHlsZS5oZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0ICsgJ3B4JztcclxuICB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gIHRhcmdldC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gIHRhcmdldC5zdHlsZS5oZWlnaHQgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuICB0YXJnZXQuc3R5bGUucGFkZGluZ0JvdHRvbSA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpblRvcCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XHJcbiAgd2luZG93LnNldFRpbWVvdXQoICgpID0+IHtcclxuICAgICAgICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy10b3AnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctYm90dG9tJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tdG9wJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tYm90dG9tJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1kdXJhdGlvbicpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1wcm9wZXJ0eScpO1xyXG4gICAgICAgIC8vYWxlcnQoXCIhXCIpO1xyXG4gIH0sIGR1cmF0aW9uKTtcclxufVxyXG5cclxubGV0IHNsaWRlRG93biA9ICh0YXJnZXQsIGR1cmF0aW9uPTUwMCkgPT4ge1xyXG5cclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2Rpc3BsYXknKTtcclxuICBsZXQgZGlzcGxheSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZGlzcGxheTtcclxuICBpZiAoZGlzcGxheSA9PT0gJ25vbmUnKSBkaXNwbGF5ID0gJ2Jsb2NrJztcclxuICB0YXJnZXQuc3R5bGUuZGlzcGxheSA9IGRpc3BsYXk7XHJcbiAgbGV0IGhlaWdodCA9IHRhcmdldC5vZmZzZXRIZWlnaHQ7XHJcbiAgdGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5wYWRkaW5nQm90dG9tID0gMDtcclxuICB0YXJnZXQuc3R5bGUubWFyZ2luVG9wID0gMDtcclxuICB0YXJnZXQuc3R5bGUubWFyZ2luQm90dG9tID0gMDtcclxuICB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSBcImhlaWdodCwgbWFyZ2luLCBwYWRkaW5nXCI7XHJcbiAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uICsgJ21zJztcclxuICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gaGVpZ2h0ICsgJ3B4JztcclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xyXG4gIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLXRvcCcpO1xyXG4gIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xyXG4gIHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiB7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ2hlaWdodCcpO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdvdmVyZmxvdycpO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcclxuICB9LCBkdXJhdGlvbik7XHJcbn1cclxuXHJcbnZhciBzbGlkZVRvZ2dsZSA9ICh0YXJnZXQsIGR1cmF0aW9uID0gNTAwKSA9PiB7XHJcbiAgaWYgKHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKHRhcmdldCkuZGlzcGxheSA9PT0gJ25vbmUnKSB7XHJcbiAgICByZXR1cm4gc2xpZGVEb3duKHRhcmdldCwgZHVyYXRpb24pO1xyXG4gIH0gZWxzZSB7XHJcbiAgICByZXR1cm4gc2xpZGVVcCh0YXJnZXQsIGR1cmF0aW9uKTtcclxuICB9XHJcbn1cclxuXHJcbndpbmRvdy5vbmxvYWQgPSAoKSA9PiB7XHJcbiAgLy8gVmFyaWFiZWxzXHJcbiAgbGV0IGJ1cmdlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuYnVyZ2VyXCIpO1xyXG4gIGxldCBoZWFkZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhlYWRlclwiKTtcclxuICBsZXQgdGVjaG5vbG9neUNhcmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVjaG5vbG9neS1jYXJkJyk7XHJcbiAgbGV0IHRlY2hub2xvZ3lDYXJkQm9keSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKVxyXG4gIGxldCB0YWJDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50YWJzX19pdGVtXCIpO1xyXG4gIGxldCB0YWJJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50YWJzX190cmlnZ2VyXCIpO1xyXG4gIGxldCB0YWJEcm9wZG93blRyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRyZWF0bWVudHMgLmRyb3Bkb3duX190cmlnZ2VyIC5kcm9wZG93bl9fdHJpZ2dlci10ZXh0XCIpO1xyXG4gIGxldCB0cmVhdG1lbnRzRHJvcGRvd24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRyZWF0bWVudHMgLmRyb3Bkb3duXCIpO1xyXG4gIGxldCB0cmVhdG1lbnRzRHJvcGRvd25MaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmVhdG1lbnRzIC5kcm9wZG93bl9fbGlzdFwiKVxyXG5cclxuICAvLyBTY3JvbGwgdG8gY29udGFjdHMtZm9ybVxyXG4gIGNvbnN0IGxpbmtzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5oZWFkZXItY29udGFjdHNfX2xpbmtcIik7XHJcblxyXG4gIGZvciAoY29uc3QgbGluayBvZiBsaW5rcykge1xyXG4gICAgbGluay5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgY2xpY2tIYW5kbGVyKTtcclxuICB9XHJcblxyXG4gIGZ1bmN0aW9uIGNsaWNrSGFuZGxlcihlKSB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBjb25zdCBocmVmID0gdGhpcy5nZXRBdHRyaWJ1dGUoXCJocmVmXCIpO1xyXG4gICAgY29uc3Qgb2Zmc2V0VG9wID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihocmVmKS5vZmZzZXRUb3A7XHJcblxyXG4gICAgc2Nyb2xsKHtcclxuICAgICAgdG9wOiBvZmZzZXRUb3AgLSAxMDAsXHJcbiAgICAgIGJlaGF2aW9yOiBcInNtb290aFwiXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIC8vIE1hbmlwdWxhdGlvbnMgd2l0aCBoZWFkZXIgY2xhc3NlcyBvbiBzY3JvbGxcclxuICBsZXQgc2Nyb2xsQ2hhbmdlID0gMTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gICAgbGV0IHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuXHJcbiAgICBpZiAoc2Nyb2xsID49IHNjcm9sbENoYW5nZSkge1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZChcImpzLXNjcm9sbC1kb3duXCIpO1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLXNjcm9sbC10b3BcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZChcImpzLXNjcm9sbC10b3BcIik7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwianMtc2Nyb2xsLWRvd25cIiwgXCJqcy1uYXYtb3BlblwiLCBcImpzLW5hdi1jbG9zZVwiKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gVGFic1xyXG4gIGZvciAobGV0IGkgPSAwOyBpIDwgdGFiSXRlbS5sZW5ndGg7IGkrKykge1xyXG4gICAgdGFiSXRlbVtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG5cclxuICAgICAgdGFiQ29udGVudC5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgICAgaXRlbS5jbGFzc0xpc3QucmVtb3ZlKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRhYkl0ZW0uZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0YWJDb250ZW50W2ldLmNsYXNzTGlzdC5hZGQoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIHRhYkl0ZW1baV0uY2xhc3NMaXN0LmFkZChcImpzLWFjdGl2ZVwiKTtcclxuXHJcbiAgICAgIHRhYkRyb3Bkb3duVHJpZ2dlci50ZXh0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFic19fdHJpZ2dlci5qcy1hY3RpdmVcIikudGV4dENvbnRlbnRcclxuICAgIH0pO1xyXG4gIH0gXHJcbiAgXHJcbiAgaWYgKHRhYkRyb3Bkb3duVHJpZ2dlcikge1xyXG4gICAgdGFiRHJvcGRvd25UcmlnZ2VyLnRleHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YWJzX190cmlnZ2VyLmpzLWFjdGl2ZVwiKS50ZXh0Q29udGVudFxyXG4gIH1cclxuICAvLyBDdXN0b20gc2Nyb2xsYmFyIGluIHRvb3RoIHRhYmxlXHJcbiAgT3ZlcmxheVNjcm9sbGJhcnMoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b290aFwiKSwge30pO1xyXG5cclxuICAvLyBGaWxlcyBpbnB1dFxyXG4gIGxldCBmaWxlc1RyaWdnZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZScpO1xyXG4gIGxldCBmaWxlc1RhYmxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLmZpbGVzX190YWJsZScpO1xyXG4gIFxyXG4gIGxldCB1cGRhdGVGaWxlc0xpc3QgPSAoKSA9PiB7XHJcbiAgICBsZXQgY2hpbGRyZW4gPSBcIlwiO1xyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmaWxlc1RyaWdnZXIuZmlsZXMubGVuZ3RoOyArK2kpIHtcclxuICAgICAgY2hpbGRyZW4gKz0gICc8ZGl2IGNsYXNzPVwiZmlsZXNfX3dyYXBwZXJcIj4nICsgJzxkaXYgY2xhc3M9XCJmaWxlcy1pdGVtXCI+JyArICc8aSBjbGFzcz1cImljb24tZmlsZVwiPjwvaT4nICsgJzxzcGFuIGNsYXNzPVwiZmlsZXMtaXRlbV9fbmFtZVwiPicgKyBmaWxlc1RyaWdnZXIuZmlsZXMuaXRlbShpKS5uYW1lICsgJzwvc3Bhbi8+JyArICc8aSBjbGFzcz1cImZpbGVzLWl0ZW1fX3JlbW92ZSBpY29uLXRyYXNoLWNhblwiIG9uY2xpY2s9XCJyZXR1cm4gdGhpcy5wYXJlbnROb2RlLnBhcmVudE5vZGUucmVtb3ZlKCk7XCI+PC9pPicgKyAnPC9kaXY+JyArICc8L2Rpdj4nXHJcbiAgICB9XHJcbiAgICBmaWxlc1RhYmxlLmlubmVySFRNTCA9IGNoaWxkcmVuO1xyXG4gICAgaWYgKGNoaWxkcmVuLmxlbmd0aCA+PSAwKSB7XHJcbiAgICAgIGZpbGVzVGFibGUuc3R5bGUuZGlzcGxheSA9ICdmbGV4J1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgZmlsZXNUYWJsZS5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAoZmlsZXNUcmlnZ2VyKSB7XHJcbiAgICBmaWxlc1RyaWdnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNoYW5nZVwiLCAoKSA9PiB7XHJcbiAgICAgIHVwZGF0ZUZpbGVzTGlzdCgpXHJcbiAgICB9KVxyXG4gIH1cclxuICBcclxuICAvLyBNZWRpYSA5OTIgPT09PT0+XHJcbiAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogOTkycHgpXCIpLm1hdGNoZXMpIHtcclxuICAgIC8vIE9wZW5pbmcgZGVza3RvcCBtZW51IHdpdGggYnVyZ2VyXHJcbiAgICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKGhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1uYXYtb3BlblwiKSkge1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwianMtbmF2LW9wZW5cIik7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1uYXYtY2xvc2VcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1uYXYtb3BlblwiKTtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLW5hdi1jbG9zZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gT3BlbmluZyB0ZWNobm9sb2d5IGFjY29yZGlvblxyXG4gICAgJCgnLnRlY2hub2xvZ3lfX3dyYXBwZXInKS5jbGljayhmdW5jdGlvbiAoKSB7XHJcbiAgICAgICQoXCIudGVjaG5vbG9neV9fd3JhcHBlclwiKS5ub3QoJCh0aGlzKS5jbG9zZXN0KFwiLnRlY2hub2xvZ3lfX3dyYXBwZXJcIikpLnJlbW92ZUNsYXNzKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICAkKHRoaXMpLmNsb3Nlc3QoXCIudGVjaG5vbG9neV9fd3JhcHBlclwiKS5hZGRDbGFzcyhcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgaWYgKCQodGhpcykuaGFzQ2xhc3MoJ2pzLWFjdGl2ZScpKSB7XHJcbiAgICAgICAgJCgnLnRlY2hub2xvZ3ktY2FyZF9fYm9keScpLm5vdCgkKHRoaXMpLmZpbmQoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKSkuc2xpZGVVcCgzMDApO1xyXG4gICAgICAgICQodGhpcykuZmluZCgnLnRlY2hub2xvZ3ktY2FyZF9fYm9keScpLnNsaWRlRG93bigzMDApO1xyXG4gICAgICB9XHJcbiAgICB9KVxyXG5cclxuICAgIC8vIGZvciAobGV0IGkgPSAwOyBpIDwgdGVjaG5vbG9neUNhcmQubGVuZ3RoOyBpKyspIHtcclxuICAgIC8vICAgdGVjaG5vbG9neUNhcmRbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIC8vICAgICB0ZWNobm9sb2d5Q2FyZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAvLyAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAvLyAgICAgfSk7XHJcblxyXG4gICAgLy8gICAgIHRlY2hub2xvZ3lDYXJkW2ldLmNsYXNzTGlzdC5hZGQoJ2pzLWFjdGl2ZScpO1xyXG5cclxuICAgIC8vICAgICAvLyBBZGQgY2xhc3MgdG8gdGhlIGVsZW1lbnQgdGhhdCB3YXMgY2xpY2tlZFxyXG4gICAgLy8gICAgIHNsaWRlRG93bih0ZWNobm9sb2d5Q2FyZEJvZHlbaV0sIDMwMClcclxuICAgIC8vICAgfSk7XHJcbiAgICAvLyB9XHJcbiAgICBcclxuICAgIC8vIENoZWNraW5nIGlmIHRoZSBhY3RpdmUgcGFnZSBpcyB0aGUgaG9tZSBwYWdlXHJcbiAgICAvLyB3aW5kb3cuaG9tZXBhZ2VjaGVjayA9ICgpID0+IHtcclxuICAgIC8vICAgdmFyIGNoZWNrID0gZmFsc2U7XHJcbiAgICAvLyAgIGlmKGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lID09PSBcIi9cIiB8fCBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSA9PT0gXCIvaW5kZXguaHRtbFwiKXtcclxuICAgIC8vICAgICBjaGVjaz10cnVlO1xyXG4gICAgLy8gICAgIH1cclxuICAgIC8vICAgcmV0dXJuIGNoZWNrO1xyXG4gICAgLy8gfVxyXG4gICAgbGV0IGhvcml6b250YWxTY3JvbGwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaG9yaXpvbnRhbC1zY3JvbGwnKVxyXG5cclxuICAgIGlmIChob3Jpem9udGFsU2Nyb2xsKSB7XHJcbiAgICAgIC8vIEhvcml6b250YWwgc2Nyb2xsIGluIFRyZWF0bWVudHMgPT09PT0+XHJcbiAgICAgIGdzYXAucmVnaXN0ZXJQbHVnaW4oU2Nyb2xsVHJpZ2dlcik7XHJcbiAgXHJcbiAgICAgIGNvbnN0IHNlY3Rpb25zID0gZ3NhcC51dGlscy50b0FycmF5KFwiLmhvcml6b250YWwtc2Nyb2xsXCIpO1xyXG4gICAgICBsZXQgbWF4V2lkdGggPSAwO1xyXG4gIFxyXG4gICAgICBjb25zdCBnZXRNYXhXaWR0aCA9ICgpID0+IHtcclxuICAgICAgICBtYXhXaWR0aCA9IDA7XHJcbiAgICAgICAgc2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xyXG4gICAgICAgICAgbWF4V2lkdGggKz0gc2VjdGlvbi5vZmZzZXRXaWR0aDtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgZ2V0TWF4V2lkdGgoKTtcclxuICAgICAgU2Nyb2xsVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwicmVmcmVzaEluaXRcIiwgZ2V0TWF4V2lkdGgpO1xyXG4gIFxyXG4gICAgICBsZXQgdHJpZ2dlckl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJlYXRtZW50cycpO1xyXG4gIFxyXG4gICAgICBnc2FwLnRvKHNlY3Rpb25zLCB7XHJcbiAgICAgICAgeDogKCkgPT4gYC0ke21heFdpZHRoIC0gd2luZG93LmlubmVyV2lkdGh9YCxcclxuICAgICAgICBlYXNlOiBcIm5vbmVcIixcclxuICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XHJcbiAgICAgICAgICBzdGFydDogXCItMTIwcHggdG9wXCIsXHJcbiAgICAgICAgICB0cmlnZ2VyOiB0cmlnZ2VySXRlbSxcclxuICAgICAgICAgIHBpbjogdHJ1ZSxcclxuICAgICAgICAgIHNjcnViOiB0cnVlLFxyXG4gICAgICAgICAgZW5kOiAoKSA9PiBgKz0ke21heFdpZHRofWAsXHJcbiAgICAgICAgICBpbnZhbGlkYXRlT25SZWZyZXNoOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgc2VjdGlvbnMuZm9yRWFjaCgoc2N0LCBpKSA9PiB7XHJcbiAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xyXG4gICAgICAgICAgdHJpZ2dlcjogc2N0LFxyXG4gICAgICAgICAgc3RhcnQ6ICgpID0+ICd0b3AgdG9wLT0nICsgKHNjdC5vZmZzZXRMZWZ0IC0gd2luZG93LmlubmVyV2lkdGgvMikgKiAobWF4V2lkdGggLyAobWF4V2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aCkpLFxyXG4gICAgICAgICAgZW5kOiAoKSA9PiAnKz0nICsgc2N0Lm9mZnNldFdpZHRoICogKG1heFdpZHRoIC8gKG1heFdpZHRoIC0gd2luZG93LmlubmVyV2lkdGgpKSxcclxuICAgICAgICAgIHRvZ2dsZUNsYXNzOiB7dGFyZ2V0czogc2N0LCBjbGFzc05hbWU6IFwiYWN0aXZlXCJ9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgfSBlbHNlIHtcclxuICAgIC8vIFRvZ2dsZSB2aXNpYmxlIGVsZW1lbnRzXHJcbiAgICBsZXQgc2hvd1RyaWdnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNob3dfX3RyaWdnZXJcIik7XHJcbiAgICBsZXQgc2hvd0l0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNob3dfX2l0ZW1cIik7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBzaG93VHJpZ2dlci5sZW5ndGg7IGkrKykge1xyXG4gICAgICBzaG93VHJpZ2dlcltpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIHNob3dUcmlnZ2VyW2ldLmNsYXNzTGlzdC50b2dnbGUoJ2pzLWFjdGl2ZScpXHJcblxyXG4gICAgICAgIGlmIChzaG93VHJpZ2dlcltpXS5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1hY3RpdmVcIikpIHtcclxuICAgICAgICAgIHNob3dUcmlnZ2VyW2ldLnRleHRDb250ZW50ID0gJ1NlZSBsZXNzJ1xyXG4gICAgICAgICAgc2hvd0l0ZW0uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcImJsb2NrXCJcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBzaG93VHJpZ2dlcltpXS50ZXh0Q29udGVudCA9ICdTZWUgYWxsJ1xyXG4gICAgICAgICAgc2hvd0l0ZW0uZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgICBlbGVtZW50LnN0eWxlLmRpc3BsYXkgPSBcIm5vbmVcIlxyXG4gICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBUcmVhdG1lbnRzIHBhZ2UgdGFicyBuYXZpZ2F0aW9uXHJcbiAgICBpZiAodHJlYXRtZW50c0Ryb3Bkb3duICYmIHRyZWF0bWVudHNEcm9wZG93bkxpc3QpIHtcclxuICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gICAgICAgIGxldCBvZmZzZXRJdGVtMSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5oZWFkZXInKS5vZmZzZXRIZWlnaHRcclxuICAgIFxyXG4gICAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+IG9mZnNldEl0ZW0xICsgNjQgKSB7XHJcbiAgICAgICAgICB0cmVhdG1lbnRzRHJvcGRvd24uY2xhc3NMaXN0LmFkZChcImpzLXNjcm9sbC1kb3duXCIpO1xyXG4gICAgICAgICAgdHJlYXRtZW50c0Ryb3Bkb3duTGlzdC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgIHRyZWF0bWVudHNEcm9wZG93bi5jbGFzc0xpc3QucmVtb3ZlKFwianMtc2Nyb2xsLWRvd25cIik7XHJcbiAgICAgICAgICB0cmVhdG1lbnRzRHJvcGRvd25MaXN0LnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuXHJcbiAgICAgIHRyZWF0bWVudHNEcm9wZG93bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICBpZiAodHJlYXRtZW50c0Ryb3Bkb3duLmNsYXNzTGlzdC5jb250YWlucyhcImpzLXNjcm9sbC1kb3duXCIpKSB7XHJcbiAgICAgICAgICBzbGlkZVRvZ2dsZSh0cmVhdG1lbnRzRHJvcGRvd25MaXN0LCAzMDApO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBudWxsXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBPcGVuaW5nIG1vYmlsZSBtZW51IHdpdGggYnVyZ2VyXHJcbiAgICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC50b2dnbGUoXCJqcy1uYXYtb3BlblwiKTtcclxuICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QudG9nZ2xlKFwianMtbG9ja1wiKTtcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9wZW5pbmcgdGVjaG5vbG9neSBhY2NvcmRpb25zICEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISFcclxuICAgIC8vICQoJy50ZWNobm9sb2d5X193cmFwcGVyIC50ZWNobm9sb2d5LWNhcmQnKS5ub3QoJCgnLnRlY2hub2xvZ3lfX3dyYXBwZXIuc2Vjb25kYXJ5IC50ZWNobm9sb2d5LWNhcmQnKSkucmVtb3ZlQ2xhc3MoJ2pzLWFjdGl2ZScpXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRlY2hub2xvZ3lDYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIHRlY2hub2xvZ3lDYXJkW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgICAgLy8gUmVtb3ZlIGNsYXNzIGZyb20gYWxsIGVsZW1lbnRzXHJcbiAgICAgICAgdGVjaG5vbG9neUNhcmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBZGQgY2xhc3MgdG8gdGhlIGVsZW1lbnQgdGhhdCB3YXMgY2xpY2tlZFxyXG4gICAgICAgIHRlY2hub2xvZ3lDYXJkW2ldLmNsYXNzTGlzdC5hZGQoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEJsb2NrIHNsaWRlciAnVHJlYXRtZW50cydcclxuICAgIGNvbnN0IHNsaWRlclRyZWF0bWVudHMgPSBuZXcgU3dpcGVyKCcudHJlYXRtZW50cy1zbGlkZXInLCB7XHJcbiAgICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgICBuZXh0RWw6IFwiLnRyZWF0bWVudHMtYnV0dG9uLW5leHRcIixcclxuICAgICAgICBwcmV2RWw6IFwiLnRyZWF0bWVudHMtYnV0dG9uLXByZXZcIixcclxuICAgICAgfSxcclxuICAgICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICAgIGVsOiBcIi50cmVhdG1lbnRzLXBhZ2luYXRpb25cIixcclxuICAgICAgfSxcclxuICAgICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgICA3Njg6IHtcclxuICAgICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgICAgfSxcclxuICAgICAgfVxyXG4gICAgfSlcclxuICB9XHJcblxyXG4gIC8vIEJsb2NrIHNsaWRlciAnUHJhY3RpY2VzJ1xyXG4gIGNvbnN0IHNsaWRlclByYWN0aWNlcyA9IG5ldyBTd2lwZXIoJy5wcmFjdGljZXMtc2xpZGVyJywge1xyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogNDAsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIucHJhY3RpY2VzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIucHJhY3RpY2VzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIucHJhY3RpY2VzLXBhZ2luYXRpb25cIixcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICB9LFxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIC8vIEJsb2NrIHNsaWRlciAnVGVzdGltb25pYWxzJ1xyXG4gIGNvbnN0IHNsaWRlclRlc3RpbW9uaWFscyA9IG5ldyBTd2lwZXIoJy50ZXN0aW1vbmlhbHMtc2xpZGVyJywge1xyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICBsb29wOiB0cnVlLFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLnRlc3RpbW9uaWFscy1idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLnRlc3RpbW9uaWFscy1idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLnRlc3RpbW9uaWFscy1wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNzY4OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgfSxcclxuICAgICAgOTkyOiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogJ2F1dG8nLFxyXG4gICAgICAgIGNlbnRlcmVkU2xpZGVzOiB0cnVlLFxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLy8gQmxvY2sgc2xpZGVyICdDYXNlcydcclxuICBjb25zdCBzbGlkZXJDYXNlcyA9IG5ldyBTd2lwZXIoJy5jYXNlcy1zbGlkZXInLCB7XHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi5jYXNlcy1idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLmNhc2VzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIuY2FzZXMtcGFnaW5hdGlvblwiLFxyXG4gICAgfSxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLy8gQmxvY2sgc2xpZGVyICdTb2NpYWxzJ1xyXG4gIGNvbnN0IHNsaWRlclNvY2lhbHMgPSBuZXcgU3dpcGVyKCcuc29jaWFsc19fc2xpZGVyJywge1xyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIuc29jaWFscy1idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLnNvY2lhbHMtYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi5zb2NpYWxzLXBhZ2luYXRpb25cIixcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICB9LFxyXG4gICAgfVxyXG4gIH0pXHJcbn0iLCIvLyBBdXRvIHNpemUgdGV4dGFyZWEgPT09PT0+XHJcbnZhciB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XHJcblxyXG5pZiAodGV4dGFyZWEpIHtcclxuICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXV0b3NpemVUZXh0YXJlYSk7XHJcbn0gZWxzZSB7XHJcbiAgbnVsbFxyXG59XHJcblxyXG5mdW5jdGlvbiBhdXRvc2l6ZVRleHRhcmVhKCl7XHJcblx0dmFyIGVsID0gdGhpcztcclxuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRlbC5zdHlsZS5jc3NUZXh0ID0gJ2hlaWdodDphdXRvOyBwYWRkaW5nOjAnO1xyXG5cdFx0ZWwuc3R5bGUuY3NzVGV4dCA9ICctbW96LWJveC1zaXppbmc6Y29udGVudC1ib3gnO1xyXG5cdFx0ZWwuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6JyArIGVsLnNjcm9sbEhlaWdodCArICdweCc7XHJcblx0fSwwKTtcclxufVxyXG5cclxuLy8gQ3VzdG9tIHNlbGVjdCA9PT09PT5cclxuJCgnc2VsZWN0JykuZWFjaChmdW5jdGlvbigpe1xyXG4gIHZhciAkdGhpcyA9ICQodGhpcyksIG51bWJlck9mT3B0aW9ucyA9ICQodGhpcykuY2hpbGRyZW4oJ29wdGlvbicpLmxlbmd0aDtcclxuXHJcbiAgJHRoaXMuYWRkQ2xhc3MoJ3NlbGVjdF9faGlkZGVuJyk7IFxyXG4gICR0aGlzLndyYXAoJzxkaXYgY2xhc3M9XCJzZWxlY3RcIj48L2Rpdj4nKTtcclxuICAkdGhpcy5hZnRlcignPGRpdiBjbGFzcz1cInNlbGVjdF9fc3R5bGVkXCI+PC9kaXY+Jyk7XHJcblxyXG4gIHZhciAkc3R5bGVkU2VsZWN0ID0gJHRoaXMubmV4dCgnZGl2LnNlbGVjdF9fc3R5bGVkJyk7XHJcbiAgJHN0eWxlZFNlbGVjdC5hcHBlbmQoJzxzcGFuPjwvc3Bhbj48aSBjbGFzcz1cImljb24tYXJyb3ctZHJvcGRvd25cIj48L2k+JylcclxuICAkc3R5bGVkU2VsZWN0LmZpbmQoJ3NwYW4nKS50ZXh0KCR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcSgwKS50ZXh0KCkpO1xyXG5cclxuICB2YXIgJGxpc3QgPSAkKCc8dWwgLz4nLCB7XHJcbiAgICAnY2xhc3MnOiAnc2VsZWN0X19vcHRpb25zJ1xyXG4gIH0pLmluc2VydEFmdGVyKCRzdHlsZWRTZWxlY3QpO1xyXG5cclxuICBmb3IgKHZhciBpID0gMDsgaSA8IG51bWJlck9mT3B0aW9uczsgaSsrKSB7XHJcbiAgICAkKCc8bGkgLz4nLCB7XHJcbiAgICAgIHRleHQ6ICR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcShpKS50ZXh0KCksXHJcbiAgICAgIHJlbDogJHRoaXMuY2hpbGRyZW4oJ29wdGlvbicpLmVxKGkpLnZhbCgpXHJcbiAgICB9KS5hcHBlbmRUbygkbGlzdCk7XHJcbiAgfVxyXG5cclxuICB2YXIgJGxpc3RJdGVtcyA9ICRsaXN0LmNoaWxkcmVuKCdsaScpO1xyXG5cclxuICAkc3R5bGVkU2VsZWN0LmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAkKCdkaXYuc2VsZWN0X19zdHlsZWQuYWN0aXZlJykubm90KHRoaXMpLmVhY2goZnVuY3Rpb24oKXtcclxuICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcygnYWN0aXZlJykubmV4dCgndWwuc2VsZWN0X19vcHRpb25zJykuc2xpZGVVcCgzMDApO1xyXG4gICAgfSk7XHJcbiAgICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdhY3RpdmUnKS5uZXh0KCd1bC5zZWxlY3RfX29wdGlvbnMnKS5zbGlkZVRvZ2dsZSgzMDApO1xyXG4gIH0pO1xyXG5cclxuICAkbGlzdEl0ZW1zLmNsaWNrKGZ1bmN0aW9uKGUpIHtcclxuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XHJcbiAgICAkc3R5bGVkU2VsZWN0LmZpbmQoJ3NwYW4nKS50ZXh0KCQodGhpcykudGV4dCgpKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkdGhpcy52YWwoJCh0aGlzKS5hdHRyKCdyZWwnKSk7XHJcbiAgICAkbGlzdC5zbGlkZVVwKDMwMCk7XHJcbiAgfSk7XHJcblxyXG4gICQoZG9jdW1lbnQpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJHN0eWxlZFNlbGVjdC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkbGlzdC5zbGlkZVVwKDMwMCk7XHJcbiAgfSk7XHJcblxyXG59KTsiXX0=