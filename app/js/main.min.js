"use strict";var slideUp=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideDown=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.removeProperty("display");var n=window.getComputedStyle(e).display;e.style.display=n="none"===n?"block":n;n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideToggle=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;return("none"===window.getComputedStyle(e).display?slideDown:slideUp)(e,t)};window.onload=function(){var e=document.querySelector(".burger"),t=document.querySelector(".header"),n=document.querySelectorAll(".technology-card"),o=(document.querySelectorAll(".technology-card__body"),document.querySelectorAll(".tabs__item")),i=document.querySelectorAll(".tabs__trigger"),s=document.querySelector(".treatments .dropdown__trigger .dropdown__trigger-text"),r=document.querySelector(".treatments .dropdown"),a=document.querySelector(".treatments .dropdown__list");window.addEventListener("scroll",function(){1<=$(window).scrollTop()?(t.classList.add("js-scroll-down"),t.classList.remove("js-scroll-top")):(t.classList.add("js-scroll-top"),t.classList.remove("js-scroll-down","js-nav-open","js-nav-close"))});for(var l,c,d,p=0;p<i.length;p++)!function(e){i[e].addEventListener("click",function(){o.forEach(function(e){e.classList.remove("js-active")}),i.forEach(function(e){e.classList.remove("js-active")}),o[e].classList.add("js-active"),i[e].classList.add("js-active"),s.textContent=document.querySelector(".tabs__trigger.js-active").textContent})}(p);if(window.matchMedia("(min-width: 992px)").matches)e.addEventListener("click",function(){t.classList.contains("js-nav-open")?(t.classList.remove("js-nav-open"),t.classList.add("js-nav-close")):(t.classList.add("js-nav-open"),t.classList.remove("js-nav-close"))}),$(".technology-card").click(function(){$(".technology-card").not($(this).closest(".technology-card")).removeClass("js-active"),$(this).closest(".technology-card").addClass("js-active"),$(this).hasClass("js-active")&&($(".technology-card__body").not($(this).find(".technology-card__body")).slideUp(300),$(this).find(".technology-card__body").slideDown(300))}),window.homepagecheck=function(){var e=!1;return e="/"===document.location.pathname||"/index.html"===document.location.pathname?!0:e},window.homepagecheck()&&(gsap.registerPlugin(ScrollTrigger),l=gsap.utils.toArray(".treatments-horizontal"),c=0,(d=function(){c=0,l.forEach(function(e){c+=e.offsetWidth})})(),ScrollTrigger.addEventListener("refreshInit",d),d=document.querySelector(".treatments"),gsap.to(l,{x:function(){return"-".concat(c-window.innerWidth)},ease:"none",scrollTrigger:{start:"-120px top",trigger:d,pin:!0,scrub:!0,end:function(){return"+=".concat(c)},invalidateOnRefresh:!0}}),l.forEach(function(e,t){ScrollTrigger.create({trigger:e,start:function(){return"top top-="+(e.offsetLeft-window.innerWidth/2)*(c/(c-window.innerWidth))},end:function(){return"+="+e.offsetWidth*(c/(c-window.innerWidth))},toggleClass:{targets:e,className:"active"}})}));else{window.addEventListener("scroll",function(){var e=document.querySelector(".header").offsetHeight;window.scrollY>e+64?(r.classList.add("js-scroll-down"),a.style.display="none"):(r.classList.remove("js-scroll-down"),a.style.display="block")}),r.addEventListener("click",function(){r.classList.contains("js-scroll-down")&&slideToggle(a,300)}),e.addEventListener("click",function(){t.classList.toggle("js-nav-open"),document.body.classList.toggle("js-lock")});for(var u=0;u<n.length;u++)!function(e){n[e].addEventListener("click",function(){n.forEach(function(e){e.classList.remove("js-active")}),n[e].classList.add("js-active")})}(u);new Swiper(".treatments-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".treatments-button-next",prevEl:".treatments-button-prev"},pagination:{el:".treatments-pagination"},breakpoints:{768:{slidesPerView:2}}})}new Swiper(".practices-slider",{slidesPerView:1,spaceBetween:40,navigation:{nextEl:".practices-button-next",prevEl:".practices-button-prev"},pagination:{el:".practices-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".testimonials-slider",{slidesPerView:1,spaceBetween:30,loop:!0,navigation:{nextEl:".testimonials-button-next",prevEl:".testimonials-button-prev"},pagination:{el:".testimonials-pagination"},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:"auto",centeredSlides:!0}}}),new Swiper(".cases-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".cases-button-next",prevEl:".cases-button-prev"},pagination:{el:".cases-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".socials__slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".socials-button-next",prevEl:".socials-button-prev"},pagination:{el:".socials-pagination"},breakpoints:{768:{slidesPerView:2}}})};var textarea=document.querySelector("textarea");function autosizeTextarea(){var e=this;setTimeout(function(){e.style.cssText="height:auto; padding:0",e.style.cssText="-moz-box-sizing:content-box",e.style.cssText="height:"+e.scrollHeight+"px"},0)}function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,r=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){r=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(r)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}textarea&&textarea.addEventListener("keydown",autosizeTextarea),$("select").each(function(){var t=$(this),e=$(this).children("option").length;t.addClass("select__hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select__styled"></div>');var n=t.next("div.select__styled");n.text(t.children("option").eq(0).text()),n.append('<i class="icon-arrow-dropdown"></i>');for(var o=$("<ul />",{class:"select__options"}).insertAfter(n),i=0;i<e;i++)$("<li />",{text:t.children("option").eq(i).text(),rel:t.children("option").eq(i).val()}).appendTo(o);var s=o.children("li");n.click(function(e){e.stopPropagation(),$("div.select__styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select__options").slideUp(300)}),$(this).toggleClass("active").next("ul.select__options").slideToggle(300)}),s.click(function(e){e.stopPropagation(),n.text($(this).text()).removeClass("active"),t.val($(this).attr("rel")),o.slideUp(300)}),$(document).click(function(){n.removeClass("active"),o.slideUp(300)})}),$(".show__trigger").click(function(){$(this).parent().find(".show__item").toggle(),$(this).toggleClass("js-active"),$(this).hasClass("js-active")?$(this).find("span").text("See less"):$(this).find("span").text("See all")}),document.addEventListener("DOMContentLoaded",function(){OverlayScrollbars(document.querySelectorAll(".tooth"),{})});var dt=new DataTransfer;$(".files-trigger__input").on("change",function(e){for(var t=0;t<this.files.length;t++){var n=$("<div/>",{class:"files__wrapper"}),o=$("<div/>",{class:"files-item"}),i=$("<span/>",{class:"files-item__name",text:this.files.item(t).name});o.append('<i class="icon-file"></i>').append(i).append('<i class="files-item__remove icon-trash-can"></i>'),n.append(o),$(".files__table").append(n).css("display","flex"),$(".files").css("margin-bottom","48px")}var s,r=_createForOfIteratorHelper(this.files);try{for(r.s();!(s=r.n()).done;){var a=s.value;dt.items.add(a)}}catch(e){r.e(e)}finally{r.f()}this.files=dt.files,$(".files-item__remove").click(function(){var e=$(this).next(".files-item__name").text();$(this).parents(".files__wrapper").remove();for(var t=0;t<dt.items.length;t++)e!==dt.items[t].getAsFile().name||dt.items.remove(t);document.getElementsByClassName("files-trigger__input").files=dt.files})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJVSS9jb250YWN0cy1mb3JtL2NvbnRhY3RzLWZvcm0uanMiLCJibG9ja3MvY29udGFjdHMtcGFnZS9jb250YWN0cy9jb250YWN0cy5qcyIsImJsb2Nrcy9yZWZlcmluZy1wYWdlL2NvbnRhY3RzL2NvbnRhY3RzLmpzIl0sIm5hbWVzIjpbInNsaWRlVXAiLCJ0YXJnZXQiLCJkdXJhdGlvbiIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsInN0eWxlIiwidHJhbnNpdGlvblByb3BlcnR5IiwidHJhbnNpdGlvbkR1cmF0aW9uIiwiaGVpZ2h0Iiwib2Zmc2V0SGVpZ2h0Iiwib3ZlcmZsb3ciLCJwYWRkaW5nVG9wIiwicGFkZGluZ0JvdHRvbSIsIm1hcmdpblRvcCIsIm1hcmdpbkJvdHRvbSIsIndpbmRvdyIsInNldFRpbWVvdXQiLCJkaXNwbGF5IiwicmVtb3ZlUHJvcGVydHkiLCJzbGlkZURvd24iLCJnZXRDb21wdXRlZFN0eWxlIiwic2xpZGVUb2dnbGUiLCJvbmxvYWQiLCJidXJnZXIiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJoZWFkZXIiLCJ0ZWNobm9sb2d5Q2FyZCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJ0YWJDb250ZW50IiwidGFiSXRlbSIsInRhYkRyb3Bkb3duVHJpZ2dlciIsInRyZWF0bWVudHNEcm9wZG93biIsInRyZWF0bWVudHNEcm9wZG93bkxpc3QiLCJhZGRFdmVudExpc3RlbmVyIiwiJCIsInNjcm9sbFRvcCIsImNsYXNzTGlzdCIsImFkZCIsInJlbW92ZSIsInNlY3Rpb25zIiwibWF4V2lkdGgiLCJ0cmlnZ2VySXRlbSIsImkiLCJmb3JFYWNoIiwiaXRlbSIsInRleHRDb250ZW50IiwiX2xvb3AiLCJtYXRjaE1lZGlhIiwibWF0Y2hlcyIsImNvbnRhaW5zIiwiY2xpY2siLCJub3QiLCJ0aGlzIiwiY2xvc2VzdCIsInJlbW92ZUNsYXNzIiwiYWRkQ2xhc3MiLCJoYXNDbGFzcyIsImZpbmQiLCJob21lcGFnZWNoZWNrIiwiY2hlY2siLCJsb2NhdGlvbiIsInBhdGhuYW1lIiwiZ3NhcCIsInJlZ2lzdGVyUGx1Z2luIiwiU2Nyb2xsVHJpZ2dlciIsInV0aWxzIiwidG9BcnJheSIsImdldE1heFdpZHRoIiwic2VjdGlvbiIsIm9mZnNldFdpZHRoIiwidG8iLCJ4IiwiY29uY2F0IiwiaW5uZXJXaWR0aCIsImVhc2UiLCJzY3JvbGxUcmlnZ2VyIiwic3RhcnQiLCJ0cmlnZ2VyIiwicGluIiwic2NydWIiLCJlbmQiLCJpbnZhbGlkYXRlT25SZWZyZXNoIiwic2N0IiwiY3JlYXRlIiwib2Zmc2V0TGVmdCIsInRvZ2dsZUNsYXNzIiwidGFyZ2V0cyIsImNsYXNzTmFtZSIsIm9mZnNldEl0ZW0xIiwic2Nyb2xsWSIsInRvZ2dsZSIsImJvZHkiLCJlbGVtZW50IiwiX2xvb3AyIiwiU3dpcGVyIiwic2xpZGVzUGVyVmlldyIsInNwYWNlQmV0d2VlbiIsIm5hdmlnYXRpb24iLCJuZXh0RWwiLCJwcmV2RWwiLCJwYWdpbmF0aW9uIiwiZWwiLCJicmVha3BvaW50cyIsIjc2OCIsImxvb3AiLCI5OTIiLCJjZW50ZXJlZFNsaWRlcyIsInRleHRhcmVhIiwiYXV0b3NpemVUZXh0YXJlYSIsImNzc1RleHQiLCJzY3JvbGxIZWlnaHQiLCJlYWNoIiwiJHRoaXMiLCJudW1iZXJPZk9wdGlvbnMiLCJjaGlsZHJlbiIsIndyYXAiLCJhZnRlciIsIiRzdHlsZWRTZWxlY3QiLCJuZXh0IiwidGV4dCIsImVxIiwiYXBwZW5kIiwiJGxpc3QiLCJjbGFzcyIsImluc2VydEFmdGVyIiwicmVsIiwidmFsIiwiYXBwZW5kVG8iLCIkbGlzdEl0ZW1zIiwiZSIsInN0b3BQcm9wYWdhdGlvbiIsImF0dHIiLCJwYXJlbnQiLCJPdmVybGF5U2Nyb2xsYmFycyIsImR0IiwiRGF0YVRyYW5zZmVyIiwib24iLCJmaWxlcyIsImZpbGVzV3JhcHBlciIsImZpbGVzSXRlbSIsImZpbGVOYW1lIiwibmFtZSIsImNzcyIsIl9zdGVwIiwiX2l0ZXJhdG9yIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJzIiwibiIsImRvbmUiLCJmaWxlIiwidmFsdWUiLCJpdGVtcyIsImVyciIsImYiLCJwYXJlbnRzIiwiZ2V0QXNGaWxlIiwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZSJdLCJtYXBwaW5ncyI6ImFBS0EsSUFBSUEsUUFBVSxTQUFDQyxHQUF5QixJQUFqQkMsRUFBaUIsRUFBQUMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQVIsSUFFOUJGLEVBQU9LLE1BQU1DLG1CQUFxQiwwQkFDbENOLEVBQU9LLE1BQU1FLG1CQUFxQk4sRUFBVyxLQUM3Q0QsRUFBT0ssTUFBTUcsT0FBU1IsRUFBT1MsYUFBZSxLQUM1Q1QsRUFBT1MsYUFDUFQsRUFBT0ssTUFBTUssU0FBVyxTQUN4QlYsRUFBT0ssTUFBTUcsT0FBUyxFQUN0QlIsRUFBT0ssTUFBTU0sV0FBYSxFQUMxQlgsRUFBT0ssTUFBTU8sY0FBZ0IsRUFDN0JaLEVBQU9LLE1BQU1RLFVBQVksRUFDekJiLEVBQU9LLE1BQU1TLGFBQWUsRUFDNUJDLE9BQU9DLFdBQVksV0FDYmhCLEVBQU9LLE1BQU1ZLFFBQVUsT0FDdkJqQixFQUFPSyxNQUFNYSxlQUFlLFVBQzVCbEIsRUFBT0ssTUFBTWEsZUFBZSxlQUM1QmxCLEVBQU9LLE1BQU1hLGVBQWUsa0JBQzVCbEIsRUFBT0ssTUFBTWEsZUFBZSxjQUM1QmxCLEVBQU9LLE1BQU1hLGVBQWUsaUJBQzVCbEIsRUFBT0ssTUFBTWEsZUFBZSxZQUM1QmxCLEVBQU9LLE1BQU1hLGVBQWUsdUJBQzVCbEIsRUFBT0ssTUFBTWEsZUFBZSx3QkFFL0JqQixJQUdEa0IsVUFBWSxTQUFDbkIsR0FBeUIsSUFBakJDLEVBQWlCLEVBQUFDLFVBQUFDLGFBQUFDLElBQUFGLFVBQUEsR0FBQUEsVUFBQSxHQUFSLElBRWhDRixFQUFPSyxNQUFNYSxlQUFlLFdBQzVCLElBQUlELEVBQVVGLE9BQU9LLGlCQUFpQnBCLEdBQVFpQixRQUU5Q2pCLEVBQU9LLE1BQU1ZLFFBRFdB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QU8sbUJBQ2pDZ0IsRUFBWXpHLEVBQUUsU0FBVSxDQUFDeUYsTUFBTyxlQUNyQ2lCLEVBQVcxRyxFQUFFLFVBQVcsQ0FBQ3lGLE1BQU8sbUJBQW9CSixLQUFNbkUsS0FBS3FGLE1BQU03RixLQUFLRixHQUFHbUcsT0FDOUVGLEVBQVVsQixPQUFPLDZCQUNmQSxPQUFPbUIsR0FDSm5CLE9BQU8scURBQ1ZpQixFQUFhakIsT0FBT2tCLEdBQ3RCekcsRUFBRSxpQkFBaUJ1RixPQUFPaUIsR0FBY0ksSUFBSSxVQUFXLFFBQ3JENUcsRUFBRSxVQUFVNEcsSUFBSSxnQkFBaUIsUUFWYyxJQUFBQyxFQUFBQyxFQUFBQywyQkFZakM3RixLQUFLcUYsT0FaNEIsSUFZbEQsSUFBQU8sRUFBQUUsTUFBQUgsRUFBQUMsRUFBQUcsS0FBQUMsTUFBNkIsQ0FBQSxJQUFwQkMsRUFBb0JOLEVBQUFPLE1BQzVCaEIsR0FBR2lCLE1BQU1sSCxJQUFJZ0gsSUFib0MsTUFBQUcsR0FBQVIsRUFBQWYsRUFBQXVCLEdBQUEsUUFBQVIsRUFBQVMsSUFlbERyRyxLQUFLcUYsTUFBUUgsR0FBR0csTUFFaEJ2RyxFQUFFLHVCQUF1QmdCLE1BQU0sV0FDOUIsSUFBSTJGLEVBQU8zRyxFQUFFa0IsTUFBTWtFLEtBQUsscUJBQXFCQyxPQUM3Q3JGLEVBQUVrQixNQUFNc0csUUFBUSxtQkFBbUJwSCxTQUNuQyxJQUFJLElBQUlJLEVBQUksRUFBR0EsRUFBSTRGLEdBQUdpQixNQUFNckosT0FBUXdDLElBQ2hDbUcsSUFBU1AsR0FBR2lCLE1BQU03RyxHQUFHaUgsWUFBWWQsTUFDbkNQLEdBQUdpQixNQUFNakgsT0FBT0ksR0FJbEJuQixTQUFTcUksdUJBQXVCLHdCQUF3Qm5CLE1BQVFILEdBQUdHIiwiZmlsZSI6Im1haW4ubWluLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8gU2Nyb2xsIHRvIHRoZSB0b3AgYmVmb3JlIHRoZSBwYWdlIGxvYWRzXHJcbi8vIHdpbmRvdy5vbmJlZm9yZXVubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuLy8gICB3aW5kb3cuc2Nyb2xsVG8oMCwgMCk7XHJcbi8vIH1cclxuXHJcbmxldCBzbGlkZVVwID0gKHRhcmdldCwgZHVyYXRpb249NTAwKSA9PiB7XHJcblxyXG4gIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uUHJvcGVydHkgPSAnaGVpZ2h0LCBtYXJnaW4sIHBhZGRpbmcnO1xyXG4gIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdtcyc7XHJcbiAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9IHRhcmdldC5vZmZzZXRIZWlnaHQgKyAncHgnO1xyXG4gIHRhcmdldC5vZmZzZXRIZWlnaHQ7XHJcbiAgdGFyZ2V0LnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XHJcbiAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdUb3AgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5wYWRkaW5nQm90dG9tID0gMDtcclxuICB0YXJnZXQuc3R5bGUubWFyZ2luVG9wID0gMDtcclxuICB0YXJnZXQuc3R5bGUubWFyZ2luQm90dG9tID0gMDtcclxuICB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLXRvcCcpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy1ib3R0b20nKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi10b3AnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi1ib3R0b20nKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ292ZXJmbG93Jyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLWR1cmF0aW9uJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLXByb3BlcnR5Jyk7XHJcbiAgICAgICAgLy9hbGVydChcIiFcIik7XHJcbiAgfSwgZHVyYXRpb24pO1xyXG59XHJcblxyXG5sZXQgc2xpZGVEb3duID0gKHRhcmdldCwgZHVyYXRpb249NTAwKSA9PiB7XHJcblxyXG4gIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnZGlzcGxheScpO1xyXG4gIGxldCBkaXNwbGF5ID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUodGFyZ2V0KS5kaXNwbGF5O1xyXG4gIGlmIChkaXNwbGF5ID09PSAnbm9uZScpIGRpc3BsYXkgPSAnYmxvY2snO1xyXG4gIHRhcmdldC5zdHlsZS5kaXNwbGF5ID0gZGlzcGxheTtcclxuICBsZXQgaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICB0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gMDtcclxuICB0YXJnZXQuc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdCb3R0b20gPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5tYXJnaW5Ub3AgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAwO1xyXG4gIHRhcmdldC5vZmZzZXRIZWlnaHQ7XHJcbiAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9IFwiaGVpZ2h0LCBtYXJnaW4sIHBhZGRpbmdcIjtcclxuICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvbkR1cmF0aW9uID0gZHVyYXRpb24gKyAnbXMnO1xyXG4gIHRhcmdldC5zdHlsZS5oZWlnaHQgPSBoZWlnaHQgKyAncHgnO1xyXG4gIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy10b3AnKTtcclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctYm90dG9tJyk7XHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tdG9wJyk7XHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdtYXJnaW4tYm90dG9tJyk7XHJcbiAgd2luZG93LnNldFRpbWVvdXQoICgpID0+IHtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnaGVpZ2h0Jyk7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ292ZXJmbG93Jyk7XHJcbiAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tZHVyYXRpb24nKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1wcm9wZXJ0eScpO1xyXG4gIH0sIGR1cmF0aW9uKTtcclxufVxyXG5cclxudmFyIHNsaWRlVG9nZ2xlID0gKHRhcmdldCwgZHVyYXRpb24gPSA1MDApID0+IHtcclxuICBpZiAod2luZG93LmdldENvbXB1dGVkU3R5bGUodGFyZ2V0KS5kaXNwbGF5ID09PSAnbm9uZScpIHtcclxuICAgIHJldHVybiBzbGlkZURvd24odGFyZ2V0LCBkdXJhdGlvbik7XHJcbiAgfSBlbHNlIHtcclxuICAgIHJldHVybiBzbGlkZVVwKHRhcmdldCwgZHVyYXRpb24pO1xyXG4gIH1cclxufVxyXG5cclxud2luZG93Lm9ubG9hZCA9ICgpID0+IHtcclxuICAvLyBWYXJpYWJlbHNcclxuICBsZXQgYnVyZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5idXJnZXJcIik7XHJcbiAgbGV0IGhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaGVhZGVyXCIpO1xyXG4gIGxldCB0ZWNobm9sb2d5Q2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy50ZWNobm9sb2d5LWNhcmQnKTtcclxuICBsZXQgdGVjaG5vbG9neUNhcmRCb2R5ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRlY2hub2xvZ3ktY2FyZF9fYm9keScpXHJcbiAgbGV0IHRhYkNvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhYnNfX2l0ZW1cIik7XHJcbiAgbGV0IHRhYkl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnRhYnNfX3RyaWdnZXJcIik7XHJcbiAgbGV0IHRhYkRyb3Bkb3duVHJpZ2dlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJlYXRtZW50cyAuZHJvcGRvd25fX3RyaWdnZXIgLmRyb3Bkb3duX190cmlnZ2VyLXRleHRcIik7XHJcbiAgbGV0IHRyZWF0bWVudHNEcm9wZG93biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJlYXRtZW50cyAuZHJvcGRvd25cIik7XHJcbiAgbGV0IHRyZWF0bWVudHNEcm9wZG93bkxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRyZWF0bWVudHMgLmRyb3Bkb3duX19saXN0XCIpXHJcblxyXG4gIC8vIE1hbmlwdWxhdGlvbnMgd2l0aCBoZWFkZXIgY2xhc3NlcyBvbiBzY3JvbGxcclxuICBsZXQgc2Nyb2xsQ2hhbmdlID0gMTtcclxuXHJcbiAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gICAgbGV0IHNjcm9sbCA9ICQod2luZG93KS5zY3JvbGxUb3AoKTtcclxuXHJcbiAgICBpZiAoc2Nyb2xsID49IHNjcm9sbENoYW5nZSkge1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZChcImpzLXNjcm9sbC1kb3duXCIpO1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLXNjcm9sbC10b3BcIik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LmFkZChcImpzLXNjcm9sbC10b3BcIik7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwianMtc2Nyb2xsLWRvd25cIiwgXCJqcy1uYXYtb3BlblwiLCBcImpzLW5hdi1jbG9zZVwiKTtcclxuICAgIH1cclxuICB9KTtcclxuXHJcbiAgLy8gVHJlYXRtZW50cyBwYWdlIHRhYnNcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYkl0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgIHRhYkl0ZW1baV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHJcbiAgICAgIHRhYkNvbnRlbnQuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0YWJJdGVtLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGFiQ29udGVudFtpXS5jbGFzc0xpc3QuYWRkKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICB0YWJJdGVtW2ldLmNsYXNzTGlzdC5hZGQoXCJqcy1hY3RpdmVcIik7XHJcblxyXG4gICAgICB0YWJEcm9wZG93blRyaWdnZXIudGV4dENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhYnNfX3RyaWdnZXIuanMtYWN0aXZlXCIpLnRleHRDb250ZW50XHJcbiAgICB9KTtcclxuICB9XHJcbiAgXHJcbiAgLy8g0JvQvtC80LDQtdGCINCy0YHRkSEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhXHJcbiAgLy8gdGFiRHJvcGRvd25UcmlnZ2VyLnRleHRDb250ZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50YWJzX190cmlnZ2VyLmpzLWFjdGl2ZVwiKS50ZXh0Q29udGVudFxyXG5cclxuICAvLyBNZWRpYSA5OTIgPT09PT0+XHJcbiAgaWYgKHdpbmRvdy5tYXRjaE1lZGlhKFwiKG1pbi13aWR0aDogOTkycHgpXCIpLm1hdGNoZXMpIHtcclxuICAgIC8vIE9wZW5pbmcgZGVza3RvcCBtZW51IHdpdGggYnVyZ2VyXHJcbiAgICBidXJnZXIuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgaWYgKGhlYWRlci5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1uYXYtb3BlblwiKSkge1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QucmVtb3ZlKFwianMtbmF2LW9wZW5cIik7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1uYXYtY2xvc2VcIik7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1uYXYtb3BlblwiKTtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLW5hdi1jbG9zZVwiKTtcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gT3BlbmluZyB0ZWNobm9sb2d5IGFjY29yZGlvblxyXG4gICAgJCgnLnRlY2hub2xvZ3ktY2FyZCcpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAgICAgJChcIi50ZWNobm9sb2d5LWNhcmRcIikubm90KCQodGhpcykuY2xvc2VzdChcIi50ZWNobm9sb2d5LWNhcmRcIikpLnJlbW92ZUNsYXNzKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICAkKHRoaXMpLmNsb3Nlc3QoXCIudGVjaG5vbG9neS1jYXJkXCIpLmFkZENsYXNzKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICBpZiAoJCh0aGlzKS5oYXNDbGFzcygnanMtYWN0aXZlJykpIHtcclxuICAgICAgICAkKCcudGVjaG5vbG9neS1jYXJkX19ib2R5Jykubm90KCQodGhpcykuZmluZCgnLnRlY2hub2xvZ3ktY2FyZF9fYm9keScpKS5zbGlkZVVwKDMwMCk7XHJcbiAgICAgICAgJCh0aGlzKS5maW5kKCcudGVjaG5vbG9neS1jYXJkX19ib2R5Jykuc2xpZGVEb3duKDMwMCk7XHJcbiAgICAgIH1cclxuICAgIH0pXHJcblxyXG4gICAgLy8gZm9yIChsZXQgaSA9IDA7IGkgPCB0ZWNobm9sb2d5Q2FyZC5sZW5ndGg7IGkrKykge1xyXG4gICAgLy8gICB0ZWNobm9sb2d5Q2FyZFtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgLy8gICAgIHRlY2hub2xvZ3lDYXJkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgIC8vICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImpzLWFjdGl2ZVwiKTtcclxuICAgIC8vICAgICB9KTtcclxuXHJcbiAgICAvLyAgICAgdGVjaG5vbG9neUNhcmRbaV0uY2xhc3NMaXN0LmFkZCgnanMtYWN0aXZlJyk7XHJcblxyXG4gICAgLy8gICAgIC8vIEFkZCBjbGFzcyB0byB0aGUgZWxlbWVudCB0aGF0IHdhcyBjbGlja2VkXHJcbiAgICAvLyAgICAgc2xpZGVEb3duKHRlY2hub2xvZ3lDYXJkQm9keVtpXSwgMzAwKVxyXG4gICAgLy8gICB9KTtcclxuICAgIC8vIH1cclxuICAgIFxyXG4gICAgLy8gQ2hlY2tpbmcgaWYgdGhlIGFjdGl2ZSBwYWdlIGlzIHRoZSBob21lIHBhZ2VcclxuICAgIHdpbmRvdy5ob21lcGFnZWNoZWNrID0gKCkgPT4ge1xyXG4gICAgICB2YXIgY2hlY2sgPSBmYWxzZTtcclxuICAgICAgaWYoZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUgPT09IFwiL1wiIHx8IGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lID09PSBcIi9pbmRleC5odG1sXCIpe1xyXG4gICAgICAgIGNoZWNrPXRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICByZXR1cm4gY2hlY2s7XHJcbiAgICB9XHJcbiAgXHJcbiAgICBpZih3aW5kb3cuaG9tZXBhZ2VjaGVjaygpKXtcclxuICAgICAgLy8gSG9yaXpvbnRhbCBzY3JvbGwgaW4gVHJlYXRtZW50cyA9PT09PT5cclxuICAgICAgZ3NhcC5yZWdpc3RlclBsdWdpbihTY3JvbGxUcmlnZ2VyKTtcclxuICBcclxuICAgICAgY29uc3Qgc2VjdGlvbnMgPSBnc2FwLnV0aWxzLnRvQXJyYXkoXCIudHJlYXRtZW50cy1ob3Jpem9udGFsXCIpO1xyXG4gICAgICBsZXQgbWF4V2lkdGggPSAwO1xyXG4gIFxyXG4gICAgICBjb25zdCBnZXRNYXhXaWR0aCA9ICgpID0+IHtcclxuICAgICAgICBtYXhXaWR0aCA9IDA7XHJcbiAgICAgICAgc2VjdGlvbnMuZm9yRWFjaCgoc2VjdGlvbikgPT4ge1xyXG4gICAgICAgICAgbWF4V2lkdGggKz0gc2VjdGlvbi5vZmZzZXRXaWR0aDtcclxuICAgICAgICB9KTtcclxuICAgICAgfTtcclxuICAgICAgZ2V0TWF4V2lkdGgoKTtcclxuICAgICAgU2Nyb2xsVHJpZ2dlci5hZGRFdmVudExpc3RlbmVyKFwicmVmcmVzaEluaXRcIiwgZ2V0TWF4V2lkdGgpO1xyXG4gIFxyXG4gICAgICBsZXQgdHJpZ2dlckl0ZW0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudHJlYXRtZW50cycpO1xyXG4gIFxyXG4gICAgICBnc2FwLnRvKHNlY3Rpb25zLCB7XHJcbiAgICAgICAgeDogKCkgPT4gYC0ke21heFdpZHRoIC0gd2luZG93LmlubmVyV2lkdGh9YCxcclxuICAgICAgICBlYXNlOiBcIm5vbmVcIixcclxuICAgICAgICBzY3JvbGxUcmlnZ2VyOiB7XHJcbiAgICAgICAgICBzdGFydDogXCItMTIwcHggdG9wXCIsXHJcbiAgICAgICAgICB0cmlnZ2VyOiB0cmlnZ2VySXRlbSxcclxuICAgICAgICAgIHBpbjogdHJ1ZSxcclxuICAgICAgICAgIHNjcnViOiB0cnVlLFxyXG4gICAgICAgICAgZW5kOiAoKSA9PiBgKz0ke21heFdpZHRofWAsXHJcbiAgICAgICAgICBpbnZhbGlkYXRlT25SZWZyZXNoOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICBcclxuICAgICAgc2VjdGlvbnMuZm9yRWFjaCgoc2N0LCBpKSA9PiB7XHJcbiAgICAgICAgU2Nyb2xsVHJpZ2dlci5jcmVhdGUoe1xyXG4gICAgICAgICAgdHJpZ2dlcjogc2N0LFxyXG4gICAgICAgICAgc3RhcnQ6ICgpID0+ICd0b3AgdG9wLT0nICsgKHNjdC5vZmZzZXRMZWZ0IC0gd2luZG93LmlubmVyV2lkdGgvMikgKiAobWF4V2lkdGggLyAobWF4V2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aCkpLFxyXG4gICAgICAgICAgZW5kOiAoKSA9PiAnKz0nICsgc2N0Lm9mZnNldFdpZHRoICogKG1heFdpZHRoIC8gKG1heFdpZHRoIC0gd2luZG93LmlubmVyV2lkdGgpKSxcclxuICAgICAgICAgIHRvZ2dsZUNsYXNzOiB7dGFyZ2V0czogc2N0LCBjbGFzc05hbWU6IFwiYWN0aXZlXCJ9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgbnVsbFxyXG4gICAgfVxyXG5cclxuICB9IGVsc2Uge1xyXG4gICAgLy8gVHJlYXRtZW50cyBwYWdlIHRhYnMgbmF2aWdhdGlvblxyXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJzY3JvbGxcIiwgKCkgPT4ge1xyXG4gICAgICBsZXQgb2Zmc2V0SXRlbTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJykub2Zmc2V0SGVpZ2h0XHJcbiAgXHJcbiAgICAgIGlmICh3aW5kb3cuc2Nyb2xsWSA+IG9mZnNldEl0ZW0xICsgNjQgKSB7XHJcbiAgICAgICAgdHJlYXRtZW50c0Ryb3Bkb3duLmNsYXNzTGlzdC5hZGQoXCJqcy1zY3JvbGwtZG93blwiKTtcclxuICAgICAgICB0cmVhdG1lbnRzRHJvcGRvd25MaXN0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSdcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICB0cmVhdG1lbnRzRHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZShcImpzLXNjcm9sbC1kb3duXCIpO1xyXG4gICAgICAgIHRyZWF0bWVudHNEcm9wZG93bkxpc3Quc3R5bGUuZGlzcGxheSA9ICdibG9jaydcclxuICAgICAgfVxyXG4gICAgfSk7XHJcblxyXG4gICAgdHJlYXRtZW50c0Ryb3Bkb3duLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICBpZiAodHJlYXRtZW50c0Ryb3Bkb3duLmNsYXNzTGlzdC5jb250YWlucyhcImpzLXNjcm9sbC1kb3duXCIpKSB7XHJcbiAgICAgICAgc2xpZGVUb2dnbGUodHJlYXRtZW50c0Ryb3Bkb3duTGlzdCwgMzAwKTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICBudWxsXHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9wZW5pbmcgbW9iaWxlIG1lbnUgd2l0aCBidXJnZXJcclxuICAgIGJ1cmdlci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnRvZ2dsZShcImpzLW5hdi1vcGVuXCIpO1xyXG4gICAgICBkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC50b2dnbGUoXCJqcy1sb2NrXCIpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gT3BlbmluZyB0ZWNobm9sb2d5IGFjY29yZGlvbnMgISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhIVxyXG4gICAgLy8gJCgnLnRlY2hub2xvZ3lfX3dyYXBwZXIgLnRlY2hub2xvZ3ktY2FyZCcpLm5vdCgkKCcudGVjaG5vbG9neV9fd3JhcHBlci5zZWNvbmRhcnkgLnRlY2hub2xvZ3ktY2FyZCcpKS5yZW1vdmVDbGFzcygnanMtYWN0aXZlJylcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVjaG5vbG9neUNhcmQubGVuZ3RoOyBpKyspIHtcclxuICAgICAgdGVjaG5vbG9neUNhcmRbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICAvLyBSZW1vdmUgY2xhc3MgZnJvbSBhbGwgZWxlbWVudHNcclxuICAgICAgICB0ZWNobm9sb2d5Q2FyZC5mb3JFYWNoKChlbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICBlbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBjbGFzcyB0byB0aGUgZWxlbWVudCB0aGF0IHdhcyBjbGlja2VkXHJcbiAgICAgICAgdGVjaG5vbG9neUNhcmRbaV0uY2xhc3NMaXN0LmFkZChcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gQmxvY2sgc2xpZGVyICdUcmVhdG1lbnRzJ1xyXG4gICAgY29uc3Qgc2xpZGVyVHJlYXRtZW50cyA9IG5ldyBTd2lwZXIoJy50cmVhdG1lbnRzLXNsaWRlcicsIHtcclxuICAgICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICAgIG5leHRFbDogXCIudHJlYXRtZW50cy1idXR0b24tbmV4dFwiLFxyXG4gICAgICAgIHByZXZFbDogXCIudHJlYXRtZW50cy1idXR0b24tcHJldlwiLFxyXG4gICAgICB9LFxyXG4gICAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgICAgZWw6IFwiLnRyZWF0bWVudHMtcGFnaW5hdGlvblwiLFxyXG4gICAgICB9LFxyXG4gICAgICBicmVha3BvaW50czoge1xyXG4gICAgICAgIDc2ODoge1xyXG4gICAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgICB9LFxyXG4gICAgICB9XHJcbiAgICB9KVxyXG4gIH1cclxuXHJcbiAgLy8gQmxvY2sgc2xpZGVyICdQcmFjdGljZXMnXHJcbiAgY29uc3Qgc2xpZGVyUHJhY3RpY2VzID0gbmV3IFN3aXBlcignLnByYWN0aWNlcy1zbGlkZXInLCB7XHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiA0MCxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi5wcmFjdGljZXMtYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi5wcmFjdGljZXMtYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi5wcmFjdGljZXMtcGFnaW5hdGlvblwiLFxyXG4gICAgfSxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgfSlcclxuXHJcbiAgLy8gQmxvY2sgc2xpZGVyICdUZXN0aW1vbmlhbHMnXHJcbiAgY29uc3Qgc2xpZGVyVGVzdGltb25pYWxzID0gbmV3IFN3aXBlcignLnRlc3RpbW9uaWFscy1zbGlkZXInLCB7XHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgIGxvb3A6IHRydWUsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIudGVzdGltb25pYWxzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIudGVzdGltb25pYWxzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIudGVzdGltb25pYWxzLXBhZ2luYXRpb25cIixcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICB9LFxyXG4gICAgICA5OTI6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAnYXV0bycsXHJcbiAgICAgICAgY2VudGVyZWRTbGlkZXM6IHRydWUsXHJcbiAgICAgIH1cclxuICAgIH1cclxuICB9KVxyXG5cclxuICAvLyBCbG9jayBzbGlkZXIgJ0Nhc2VzJ1xyXG4gIGNvbnN0IHNsaWRlckNhc2VzID0gbmV3IFN3aXBlcignLmNhc2VzLXNsaWRlcicsIHtcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLmNhc2VzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIuY2FzZXMtYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi5jYXNlcy1wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNzY4OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAvLyBCbG9jayBzbGlkZXIgJ1NvY2lhbHMnXHJcbiAgY29uc3Qgc2xpZGVyU29jaWFscyA9IG5ldyBTd2lwZXIoJy5zb2NpYWxzX19zbGlkZXInLCB7XHJcbiAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgc3BhY2VCZXR3ZWVuOiAzMCxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi5zb2NpYWxzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgIHByZXZFbDogXCIuc29jaWFscy1idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLnNvY2lhbHMtcGFnaW5hdGlvblwiLFxyXG4gICAgfSxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICB9XHJcbiAgfSlcclxufVxyXG4iLCIvLyBBdXRvIHNpemUgdGV4dGFyZWEgPT09PT0+XHJcbnZhciB0ZXh0YXJlYSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XHJcblxyXG5pZiAodGV4dGFyZWEpIHtcclxuICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXV0b3NpemVUZXh0YXJlYSk7XHJcbn0gZWxzZSB7XHJcbiAgbnVsbFxyXG59XHJcblxyXG5mdW5jdGlvbiBhdXRvc2l6ZVRleHRhcmVhKCl7XHJcblx0dmFyIGVsID0gdGhpcztcclxuXHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7XHJcblx0XHRlbC5zdHlsZS5jc3NUZXh0ID0gJ2hlaWdodDphdXRvOyBwYWRkaW5nOjAnO1xyXG5cdFx0ZWwuc3R5bGUuY3NzVGV4dCA9ICctbW96LWJveC1zaXppbmc6Y29udGVudC1ib3gnO1xyXG5cdFx0ZWwuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6JyArIGVsLnNjcm9sbEhlaWdodCArICdweCc7XHJcblx0fSwwKTtcclxufVxyXG5cclxuLy8gQ3VzdG9tIHNlbGVjdCA9PT09PT5cclxuJCgnc2VsZWN0JykuZWFjaChmdW5jdGlvbigpe1xyXG4gIHZhciAkdGhpcyA9ICQodGhpcyksIG51bWJlck9mT3B0aW9ucyA9ICQodGhpcykuY2hpbGRyZW4oJ29wdGlvbicpLmxlbmd0aDtcclxuXHJcbiAgJHRoaXMuYWRkQ2xhc3MoJ3NlbGVjdF9faGlkZGVuJyk7IFxyXG4gICR0aGlzLndyYXAoJzxkaXYgY2xhc3M9XCJzZWxlY3RcIj48L2Rpdj4nKTtcclxuICAkdGhpcy5hZnRlcignPGRpdiBjbGFzcz1cInNlbGVjdF9fc3R5bGVkXCI+PC9kaXY+Jyk7XHJcblxyXG4gIHZhciAkc3R5bGVkU2VsZWN0ID0gJHRoaXMubmV4dCgnZGl2LnNlbGVjdF9fc3R5bGVkJyk7XHJcbiAgJHN0eWxlZFNlbGVjdC50ZXh0KCR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcSgwKS50ZXh0KCkpO1xyXG4gICRzdHlsZWRTZWxlY3QuYXBwZW5kKCc8aSBjbGFzcz1cImljb24tYXJyb3ctZHJvcGRvd25cIj48L2k+JylcclxuXHJcbiAgdmFyICRsaXN0ID0gJCgnPHVsIC8+Jywge1xyXG4gICAgJ2NsYXNzJzogJ3NlbGVjdF9fb3B0aW9ucydcclxuICB9KS5pbnNlcnRBZnRlcigkc3R5bGVkU2VsZWN0KTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJPZk9wdGlvbnM7IGkrKykge1xyXG4gICAgJCgnPGxpIC8+Jywge1xyXG4gICAgICB0ZXh0OiAkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoaSkudGV4dCgpLFxyXG4gICAgICByZWw6ICR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcShpKS52YWwoKVxyXG4gICAgfSkuYXBwZW5kVG8oJGxpc3QpO1xyXG4gIH1cclxuXHJcbiAgdmFyICRsaXN0SXRlbXMgPSAkbGlzdC5jaGlsZHJlbignbGknKTtcclxuXHJcbiAgJHN0eWxlZFNlbGVjdC5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgJCgnZGl2LnNlbGVjdF9fc3R5bGVkLmFjdGl2ZScpLm5vdCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLm5leHQoJ3VsLnNlbGVjdF9fb3B0aW9ucycpLnNsaWRlVXAoMzAwKTtcclxuICAgIH0pO1xyXG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJykubmV4dCgndWwuc2VsZWN0X19vcHRpb25zJykuc2xpZGVUb2dnbGUoMzAwKTtcclxuICB9KTtcclxuXHJcbiAgJGxpc3RJdGVtcy5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgJHN0eWxlZFNlbGVjdC50ZXh0KCQodGhpcykudGV4dCgpKS5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkdGhpcy52YWwoJCh0aGlzKS5hdHRyKCdyZWwnKSk7XHJcbiAgICAkbGlzdC5zbGlkZVVwKDMwMCk7XHJcbiAgfSk7XHJcblxyXG4gICQoZG9jdW1lbnQpLmNsaWNrKGZ1bmN0aW9uKCkge1xyXG4gICAgJHN0eWxlZFNlbGVjdC5yZW1vdmVDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAkbGlzdC5zbGlkZVVwKDMwMCk7XHJcbiAgfSk7XHJcblxyXG59KTsiLCIkKCcuc2hvd19fdHJpZ2dlcicpLmNsaWNrKGZ1bmN0aW9uICgpIHtcclxuICAkKHRoaXMpLnBhcmVudCgpLmZpbmQoJy5zaG93X19pdGVtJykudG9nZ2xlKClcclxuICAkKHRoaXMpLnRvZ2dsZUNsYXNzKCdqcy1hY3RpdmUnKVxyXG4gIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdqcy1hY3RpdmUnKSkge1xyXG4gICAgJCh0aGlzKS5maW5kKCdzcGFuJykudGV4dCgnU2VlIGxlc3MnKVxyXG4gIH0gZWxzZSB7XHJcbiAgICAkKHRoaXMpLmZpbmQoJ3NwYW4nKS50ZXh0KCdTZWUgYWxsJylcclxuICB9XHJcbn0pIiwiLy8gQ3VzdG9tIHNjcm9sbGJhciBpbiB0b290aCB0YWJsZSA9PT09PT5cclxuZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIiwgZnVuY3Rpb24oKSB7XHJcblx0T3ZlcmxheVNjcm9sbGJhcnMoZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi50b290aFwiKSwge30pO1xyXG59KTtcclxuXHJcbi8vIElucHV0IEZpbGVzID09PT09PlxyXG5jb25zdCBkdCA9IG5ldyBEYXRhVHJhbnNmZXIoKTtcclxuXHJcbiQoXCIuZmlsZXMtdHJpZ2dlcl9faW5wdXRcIikub24oJ2NoYW5nZScsIGZ1bmN0aW9uKGUpe1xyXG5cdGZvcih2YXIgaSA9IDA7IGkgPCB0aGlzLmZpbGVzLmxlbmd0aDsgaSsrKXtcclxuXHRcdGxldCBmaWxlc1dyYXBwZXIgPSAkKCc8ZGl2Lz4nLCB7Y2xhc3M6ICdmaWxlc19fd3JhcHBlcid9KTtcclxuICAgIGxldCBmaWxlc0l0ZW0gPSAkKCc8ZGl2Lz4nLCB7Y2xhc3M6ICdmaWxlcy1pdGVtJ30pLFxyXG5cdFx0XHRmaWxlTmFtZSA9ICQoJzxzcGFuLz4nLCB7Y2xhc3M6ICdmaWxlcy1pdGVtX19uYW1lJywgdGV4dDogdGhpcy5maWxlcy5pdGVtKGkpLm5hbWV9KTtcclxuXHRcdGZpbGVzSXRlbS5hcHBlbmQoJzxpIGNsYXNzPVwiaWNvbi1maWxlXCI+PC9pPicpXHJcblx0XHRcdC5hcHBlbmQoZmlsZU5hbWUpXHJcbiAgICAgIC5hcHBlbmQoJzxpIGNsYXNzPVwiZmlsZXMtaXRlbV9fcmVtb3ZlIGljb24tdHJhc2gtY2FuXCI+PC9pPicpO1xyXG4gICAgZmlsZXNXcmFwcGVyLmFwcGVuZChmaWxlc0l0ZW0pXHJcblx0XHQkKFwiLmZpbGVzX190YWJsZVwiKS5hcHBlbmQoZmlsZXNXcmFwcGVyKS5jc3MoJ2Rpc3BsYXknLCAnZmxleCcpO1xyXG4gICAgJCgnLmZpbGVzJykuY3NzKCdtYXJnaW4tYm90dG9tJywgJzQ4cHgnKVxyXG5cdH07XHJcblx0Zm9yIChsZXQgZmlsZSBvZiB0aGlzLmZpbGVzKSB7XHJcblx0XHRkdC5pdGVtcy5hZGQoZmlsZSk7XHJcblx0fVxyXG5cdHRoaXMuZmlsZXMgPSBkdC5maWxlcztcclxuXHJcblx0JCgnLmZpbGVzLWl0ZW1fX3JlbW92ZScpLmNsaWNrKGZ1bmN0aW9uKCl7XHJcblx0XHRsZXQgbmFtZSA9ICQodGhpcykubmV4dCgnLmZpbGVzLWl0ZW1fX25hbWUnKS50ZXh0KCk7XHJcblx0XHQkKHRoaXMpLnBhcmVudHMoJy5maWxlc19fd3JhcHBlcicpLnJlbW92ZSgpO1xyXG5cdFx0Zm9yKGxldCBpID0gMDsgaSA8IGR0Lml0ZW1zLmxlbmd0aDsgaSsrKXtcclxuXHRcdFx0aWYobmFtZSA9PT0gZHQuaXRlbXNbaV0uZ2V0QXNGaWxlKCkubmFtZSl7XHJcblx0XHRcdFx0ZHQuaXRlbXMucmVtb3ZlKGkpO1xyXG5cdFx0XHRcdGNvbnRpbnVlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRkb2N1bWVudC5nZXRFbGVtZW50c0J5Q2xhc3NOYW1lKCdmaWxlcy10cmlnZ2VyX19pbnB1dCcpLmZpbGVzID0gZHQuZmlsZXM7XHJcblx0fSk7XHJcbn0pOyJdfQ==