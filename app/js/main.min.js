"use strict";function _createForOfIteratorHelper(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,t=function(){};return{s:t,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,r=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw r}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(n="Object"===n&&e.constructor?e.constructor.name:n)||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}var slideUp=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=e.offsetHeight+"px",e.offsetHeight,e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout(function(){e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideDown=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;e.style.removeProperty("display");var n=window.getComputedStyle(e).display;e.style.display=n="none"===n?"block":n;n=e.offsetHeight;e.style.overflow="hidden",e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=n+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout(function(){e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")},t)},slideToggle=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:500;return("none"===window.getComputedStyle(e).display?slideDown:slideUp)(e,t)};window.onload=function(){var e,r=document.querySelector(".burger"),i=document.querySelector(".header"),s=document.querySelectorAll(".technology-card"),t=(document.querySelectorAll(".technology-card__body"),document.querySelectorAll(".tabs__item")),n=document.querySelectorAll(".tabs__trigger"),o=document.querySelector(".treatments .dropdown__trigger .dropdown__trigger-text"),a=document.querySelector(".treatments .dropdown"),l=document.querySelector(".treatments .dropdown__list"),c=_createForOfIteratorHelper(document.querySelectorAll(".header-contacts__link"));try{for(c.s();!(e=c.n()).done;)e.value.addEventListener("click",d)}catch(e){c.e(e)}finally{c.f()}function d(e){e.preventDefault();e=this.getAttribute("href"),e=document.querySelector(e).offsetTop;scroll({top:e-100,behavior:"smooth"})}window.addEventListener("scroll",function(){1<=$(window).scrollTop()?(i.classList.add("js-scroll-down"),i.classList.remove("js-scroll-top")):(i.classList.add("js-scroll-top"),i.classList.remove("js-scroll-down","js-nav-open","js-nav-close"))});for(var p=0;p<n.length;p++)!function(e){n[e].addEventListener("click",function(){t.forEach(function(e){e.classList.remove("js-active")}),n.forEach(function(e){e.classList.remove("js-active")}),t[e].classList.add("js-active"),n[e].classList.add("js-active"),o.textContent=document.querySelector(".tabs__trigger.js-active").textContent})}(p);o&&(o.textContent=document.querySelector(".tabs__trigger.js-active").textContent),OverlayScrollbars(document.querySelectorAll(".tooth"),{});var u,y,v,g=document.getElementById("file"),f=document.querySelector(".files__table");g&&g.addEventListener("change",function(){!function(){for(var e="",t=0;t<g.files.length;++t)e+='<div class="files__wrapper"><div class="files-item"><i class="icon-file"></i><span class="files-item__name">'+g.files.item(t).name+'</span/><i class="files-item__remove icon-trash-can" onclick="return this.parentNode.parentNode.remove();"></i></div></div>';0<=(f.innerHTML=e).length?f.style.display="flex":f.style.display="none"}()}),window.matchMedia("(min-width: 992px)").matches?(r.addEventListener("click",function(){i.classList.contains("js-nav-open")?(i.classList.remove("js-nav-open"),i.classList.add("js-nav-close")):(i.classList.add("js-nav-open"),i.classList.remove("js-nav-close"))}),$(".technology__wrapper").click(function(){$(".technology__wrapper").not($(this).closest(".technology__wrapper")).removeClass("js-active"),$(this).closest(".technology__wrapper").addClass("js-active"),$(this).hasClass("js-active")&&($(".technology-card__body").not($(this).find(".technology-card__body")).slideUp(300),$(this).find(".technology-card__body").slideDown(300))}),window.homepagecheck=function(){var e=!1;return e="/"===document.location.pathname||"/index.html"===document.location.pathname?!0:e},window.homepagecheck()&&(gsap.registerPlugin(ScrollTrigger),u=gsap.utils.toArray(".treatments-horizontal"),y=0,(v=function(){y=0,u.forEach(function(e){y+=e.offsetWidth})})(),ScrollTrigger.addEventListener("refreshInit",v),v=document.querySelector(".treatments"),gsap.to(u,{x:function(){return"-".concat(y-window.innerWidth)},ease:"none",scrollTrigger:{start:"-120px top",trigger:v,pin:!0,scrub:!0,end:function(){return"+=".concat(y)},invalidateOnRefresh:!0}}),u.forEach(function(e,t){ScrollTrigger.create({trigger:e,start:function(){return"top top-="+(e.offsetLeft-window.innerWidth/2)*(y/(y-window.innerWidth))},end:function(){return"+="+e.offsetWidth*(y/(y-window.innerWidth))},toggleClass:{targets:e,className:"active"}})}))):function(){for(var t=document.querySelectorAll(".show__trigger"),n=document.querySelectorAll(".show__item"),e=0;e<t.length;e++)!function(e){t[e].addEventListener("click",function(){t[e].classList.toggle("js-active"),t[e].classList.contains("js-active")?(t[e].textContent="See less",n.forEach(function(e){e.style.display="block"})):(t[e].textContent="See all",n.forEach(function(e){e.style.display="none"}))})}(e);a&&l&&(window.addEventListener("scroll",function(){var e=document.querySelector(".header").offsetHeight;window.scrollY>e+64?(a.classList.add("js-scroll-down"),l.style.display="none"):(a.classList.remove("js-scroll-down"),l.style.display="block")}),a.addEventListener("click",function(){a.classList.contains("js-scroll-down")&&slideToggle(l,300)})),r.addEventListener("click",function(){i.classList.toggle("js-nav-open"),document.body.classList.toggle("js-lock")});for(var o=0;o<s.length;o++)!function(e){s[e].addEventListener("click",function(){s.forEach(function(e){e.classList.remove("js-active")}),s[e].classList.add("js-active")})}(o);new Swiper(".treatments-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".treatments-button-next",prevEl:".treatments-button-prev"},pagination:{el:".treatments-pagination"},breakpoints:{768:{slidesPerView:2}}})}();new Swiper(".practices-slider",{slidesPerView:1,spaceBetween:40,navigation:{nextEl:".practices-button-next",prevEl:".practices-button-prev"},pagination:{el:".practices-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".testimonials-slider",{slidesPerView:1,spaceBetween:30,loop:!0,navigation:{nextEl:".testimonials-button-next",prevEl:".testimonials-button-prev"},pagination:{el:".testimonials-pagination"},breakpoints:{768:{slidesPerView:2},992:{slidesPerView:"auto",centeredSlides:!0}}}),new Swiper(".cases-slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".cases-button-next",prevEl:".cases-button-prev"},pagination:{el:".cases-pagination"},breakpoints:{768:{slidesPerView:2}}}),new Swiper(".socials__slider",{slidesPerView:1,spaceBetween:30,navigation:{nextEl:".socials-button-next",prevEl:".socials-button-prev"},pagination:{el:".socials-pagination"},breakpoints:{768:{slidesPerView:2}}})};var textarea=document.querySelector("textarea");function autosizeTextarea(){var e=this;setTimeout(function(){e.style.cssText="height:auto; padding:0",e.style.cssText="-moz-box-sizing:content-box",e.style.cssText="height:"+e.scrollHeight+"px"},0)}textarea&&textarea.addEventListener("keydown",autosizeTextarea),$("select").each(function(){var t=$(this),e=$(this).children("option").length;t.addClass("select__hidden"),t.wrap('<div class="select"></div>'),t.after('<div class="select__styled"></div>');var n=t.next("div.select__styled");n.append('<span></span><i class="icon-arrow-dropdown"></i>'),n.find("span").text(t.children("option").eq(0).text());for(var o=$("<ul />",{class:"select__options"}).insertAfter(n),r=0;r<e;r++)$("<li />",{text:t.children("option").eq(r).text(),rel:t.children("option").eq(r).val()}).appendTo(o);var i=o.children("li");n.click(function(e){e.stopPropagation(),$("div.select__styled.active").not(this).each(function(){$(this).removeClass("active").next("ul.select__options").slideUp(300)}),$(this).toggleClass("active").next("ul.select__options").slideToggle(300)}),i.click(function(e){e.stopPropagation(),n.find("span").text($(this).text()).removeClass("active"),t.val($(this).attr("rel")),o.slideUp(300)}),$(document).click(function(){n.removeClass("active"),o.slideUp(300)})});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm1haW4uanMiLCJVSS9jb250YWN0cy1mb3JtL2NvbnRhY3RzLWZvcm0uanMiXSwibmFtZXMiOlsic2xpZGVVcCIsInRhcmdldCIsImR1cmF0aW9uIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwic3R5bGUiLCJ0cmFuc2l0aW9uUHJvcGVydHkiLCJ0cmFuc2l0aW9uRHVyYXRpb24iLCJoZWlnaHQiLCJvZmZzZXRIZWlnaHQiLCJvdmVyZmxvdyIsInBhZGRpbmdUb3AiLCJwYWRkaW5nQm90dG9tIiwibWFyZ2luVG9wIiwibWFyZ2luQm90dG9tIiwid2luZG93Iiwic2V0VGltZW91dCIsImRpc3BsYXkiLCJyZW1vdmVQcm9wZXJ0eSIsInNsaWRlRG93biIsImdldENvbXB1dGVkU3R5bGUiLCJzbGlkZVRvZ2dsZSIsIm9ubG9hZCIsIl9zdGVwIiwiYnVyZ2VyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiaGVhZGVyIiwidGVjaG5vbG9neUNhcmQiLCJxdWVyeVNlbGVjdG9yQWxsIiwidGFiQ29udGVudCIsInRhYkl0ZW0iLCJ0YWJEcm9wZG93blRyaWdnZXIiLCJ0cmVhdG1lbnRzRHJvcGRvd24iLCJ0cmVhdG1lbnRzRHJvcGRvd25MaXN0IiwiX2l0ZXJhdG9yIiwiX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIiLCJzIiwibiIsImRvbmUiLCJ2YWx1ZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjbGlja0hhbmRsZXIiLCJlcnIiLCJlIiwiZiIsInByZXZlbnREZWZhdWx0IiwiaHJlZiIsInRoaXMiLCJnZXRBdHRyaWJ1dGUiLCJvZmZzZXRUb3AiLCJzY3JvbGwiLCJ0b3AiLCJiZWhhdmlvciIsIiQiLCJzY3JvbGxUb3AiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJpIiwiZm9yRWFjaCIsIml0ZW0iLCJ0ZXh0Q29udGVudCIsIl9sb29wIiwiT3ZlcmxheVNjcm9sbGJhcnMiLCJzZWN0aW9ucyIsIm1heFdpZHRoIiwidHJpZ2dlckl0ZW0iLCJmaWxlc1RyaWdnZXIiLCJnZXRFbGVtZW50QnlJZCIsImZpbGVzVGFibGUiLCJjaGlsZHJlbiIsImZpbGVzIiwibmFtZSIsImlubmVySFRNTCIsInVwZGF0ZUZpbGVzTGlzdCIsIm1hdGNoTWVkaWEiLCJtYXRjaGVzIiwiY29udGFpbnMiLCJjbGljayIsIm5vdCIsImNsb3Nlc3QiLCJyZW1vdmVDbGFzcyIsImFkZENsYXNzIiwiaGFzQ2xhc3MiLCJmaW5kIiwiaG9tZXBhZ2VjaGVjayIsImNoZWNrIiwibG9jYXRpb24iLCJwYXRobmFtZSIsImdzYXAiLCJyZWdpc3RlclBsdWdpbiIsIlNjcm9sbFRyaWdnZXIiLCJ1dGlscyIsInRvQXJyYXkiLCJnZXRNYXhXaWR0aCIsInNlY3Rpb24iLCJvZmZzZXRXaWR0aCIsInRvIiwieCIsImNvbmNhdCIsImlubmVyV2lkdGgiLCJlYXNlIiwic2Nyb2xsVHJpZ2dlciIsInN0YXJ0IiwidHJpZ2dlciIsInBpbiIsInNjcnViIiwiZW5kIiwiaW52YWxpZGF0ZU9uUmVmcmVzaCIsInNjdCIsImNyZWF0ZSIsIm9mZnNldExlZnQiLCJ0b2dnbGVDbGFzcyIsInRhcmdldHMiLCJjbGFzc05hbWUiLCJzaG93VHJpZ2dlciIsInNob3dJdGVtIiwidG9nZ2xlIiwiZWxlbWVudCIsIl9sb29wMiIsIm9mZnNldEl0ZW0xIiwic2Nyb2xsWSIsImJvZHkiLCJfbG9vcDMiLCJTd2lwZXIiLCJzbGlkZXNQZXJWaWV3Iiwic3BhY2VCZXR3ZWVuIiwibmF2aWdhdGlvbiIsIm5leHRFbCIsInByZXZFbCIsInBhZ2luYXRpb24iLCJlbCIsImJyZWFrcG9pbnRzIiwiNzY4IiwibG9vcCIsIjk5MiIsImNlbnRlcmVkU2xpZGVzIiwidGV4dGFyZWEiLCJhdXRvc2l6ZVRleHRhcmVhIiwiY3NzVGV4dCIsInNjcm9sbEhlaWdodCIsImVhY2giLCIkdGhpcyIsIm51bWJlck9mT3B0aW9ucyIsIndyYXAiLCJhZnRlciIsIiRzdHlsZWRTZWxlY3QiLCJuZXh0IiwiYXBwZW5kIiwidGV4dCIsImVxIiwiJGxpc3QiLCJjbGFzcyIsImluc2VydEFmdGVyIiwicmVsIiwidmFsIiwiYXBwZW5kVG8iLCIkbGlzdEl0ZW1zIiwic3RvcFByb3BhZ2F0aW9uIiwiYXR0ciJdLCJtYXBwaW5ncyI6Im1wQ0FLQSxJQUFJQSxRQUFVLFNBQUNDLEdBQXlCLElBQWpCQyxFQUFpQixFQUFBQyxVQUFBQyxhQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBUixJQUU5QkYsRUFBT0ssTUFBTUMsbUJBQXFCLDBCQUNsQ04sRUFBT0ssTUFBTUUsbUJBQXFCTixFQUFXLEtBQzdDRCxFQUFPSyxNQUFNRyxPQUFTUixFQUFPUyxhQUFlLEtBQzVDVCxFQUFPUyxhQUNQVCxFQUFPSyxNQUFNSyxTQUFXLFNBQ3hCVixFQUFPSyxNQUFNRyxPQUFTLEVBQ3RCUixFQUFPSyxNQUFNTSxXQUFhLEVBQzFCWCxFQUFPSyxNQUFNTyxjQUFnQixFQUM3QlosRUFBT0ssTUFBTVEsVUFBWSxFQUN6QmIsRUFBT0ssTUFBTVMsYUFBZSxFQUM1QkMsT0FBT0MsV0FBWSxXQUNiaEIsRUFBT0ssTUFBTVksUUFBVSxPQUN2QmpCLEVBQU9LLE1BQU1hLGVBQWUsVUFDNUJsQixFQUFPSyxNQUFNYSxlQUFlLGVBQzVCbEIsRUFBT0ssTUFBTWEsZUFBZSxrQkFDNUJsQixFQUFPSyxNQUFNYSxlQUFlLGNBQzVCbEIsRUFBT0ssTUFBTWEsZUFBZSxpQkFDNUJsQixFQUFPSyxNQUFNYSxlQUFlLFlBQzVCbEIsRUFBT0ssTUFBTWEsZUFBZSx1QkFDNUJsQixFQUFPSyxNQUFNYSxlQUFlLHdCQUUvQmpCLElBR0RrQixVQUFZLFNBQUNuQixHQUF5QixJQUFqQkMsRUFBaUIsRUFBQUMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQVIsSUFFaENGLEVBQU9LLE1BQU1hLGVBQWUsV0FDNUIsSUFBSUQsRUFBVUYsT0FBT0ssaUJBQWlCcEIsR0FBUWlCLFFBRTlDakIsRUFBT0ssTUFBTVksUUFEV0EsRUFBUixTQUFaQSxFQUE4QixRQUNYQSxF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QU8sb0RBQ3JCRixFQUFjOUQsS0FBSyxRQUFRaUUsS0FBS1AsRUFBTXhFLFNBQVMsVUFBVWdGLEdBQUcsR0FBR0QsUUFNL0QsSUFKQSxJQUFJRSxFQUFRbEcsRUFBRSxTQUFVLENBQ3RCbUcsTUFBUyxvQkFDUkMsWUFBWVAsR0FFTnhGLEVBQUksRUFBR0EsRUFBSXFGLEVBQWlCckYsSUFDbkNMLEVBQUUsU0FBVSxDQUNWZ0csS0FBTVAsRUFBTXhFLFNBQVMsVUFBVWdGLEdBQUc1RixHQUFHMkYsT0FDckNLLElBQUtaLEVBQU14RSxTQUFTLFVBQVVnRixHQUFHNUYsR0FBR2lHLFFBQ25DQyxTQUFTTCxHQUdkLElBQUlNLEVBQWFOLEVBQU1qRixTQUFTLE1BRWhDNEUsRUFBY3BFLE1BQU0sU0FBU25DLEdBQzNCQSxFQUFFbUgsa0JBQ0Z6RyxFQUFFLDZCQUE2QjBCLElBQUloQyxNQUFNOEYsS0FBSyxXQUM1Q3hGLEVBQUVOLE1BQU1rQyxZQUFZLFVBQVVrRSxLQUFLLHNCQUFzQnJKLFFBQVEsT0FFbkV1RCxFQUFFTixNQUFNaUUsWUFBWSxVQUFVbUMsS0FBSyxzQkFBc0IvSCxZQUFZLE9BR3ZFeUksRUFBVy9FLE1BQU0sU0FBU25DLEdBQ3hCQSxFQUFFbUgsa0JBQ0ZaLEVBQWM5RCxLQUFLLFFBQVFpRSxLQUFLaEcsRUFBRU4sTUFBTXNHLFFBQVFwRSxZQUFZLFVBQzVENkQsRUFBTWEsSUFBSXRHLEVBQUVOLE1BQU1nSCxLQUFLLFFBQ3ZCUixFQUFNekosUUFBUSxPQUdoQnVELEVBQUU3QixVQUFVc0QsTUFBTSxXQUNoQm9FLEVBQWNqRSxZQUFZLFVBQzFCc0UsRUFBTXpKLFFBQVEiLCJmaWxlIjoibWFpbi5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIvLyBTY3JvbGwgdG8gdGhlIHRvcCBiZWZvcmUgdGhlIHBhZ2UgbG9hZHNcclxuLy8gd2luZG93Lm9uYmVmb3JldW5sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4vLyAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTtcclxuLy8gfVxyXG5cclxubGV0IHNsaWRlVXAgPSAodGFyZ2V0LCBkdXJhdGlvbj01MDApID0+IHtcclxuXHJcbiAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25Qcm9wZXJ0eSA9ICdoZWlnaHQsIG1hcmdpbiwgcGFkZGluZyc7XHJcbiAgdGFyZ2V0LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IGR1cmF0aW9uICsgJ21zJztcclxuICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gdGFyZ2V0Lm9mZnNldEhlaWdodCArICdweCc7XHJcbiAgdGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICB0YXJnZXQuc3R5bGUub3ZlcmZsb3cgPSAnaGlkZGVuJztcclxuICB0YXJnZXQuc3R5bGUuaGVpZ2h0ID0gMDtcclxuICB0YXJnZXQuc3R5bGUucGFkZGluZ1RvcCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLnBhZGRpbmdCb3R0b20gPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5tYXJnaW5Ub3AgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5tYXJnaW5Cb3R0b20gPSAwO1xyXG4gIHdpbmRvdy5zZXRUaW1lb3V0KCAoKSA9PiB7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3BhZGRpbmctdG9wJyk7XHJcbiAgICAgICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLWJvdHRvbScpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLXRvcCcpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnbWFyZ2luLWJvdHRvbScpO1xyXG4gICAgICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tZHVyYXRpb24nKTtcclxuICAgICAgICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ3RyYW5zaXRpb24tcHJvcGVydHknKTtcclxuICAgICAgICAvL2FsZXJ0KFwiIVwiKTtcclxuICB9LCBkdXJhdGlvbik7XHJcbn1cclxuXHJcbmxldCBzbGlkZURvd24gPSAodGFyZ2V0LCBkdXJhdGlvbj01MDApID0+IHtcclxuXHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdkaXNwbGF5Jyk7XHJcbiAgbGV0IGRpc3BsYXkgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmRpc3BsYXk7XHJcbiAgaWYgKGRpc3BsYXkgPT09ICdub25lJykgZGlzcGxheSA9ICdibG9jayc7XHJcbiAgdGFyZ2V0LnN0eWxlLmRpc3BsYXkgPSBkaXNwbGF5O1xyXG4gIGxldCBoZWlnaHQgPSB0YXJnZXQub2Zmc2V0SGVpZ2h0O1xyXG4gIHRhcmdldC5zdHlsZS5vdmVyZmxvdyA9ICdoaWRkZW4nO1xyXG4gIHRhcmdldC5zdHlsZS5oZWlnaHQgPSAwO1xyXG4gIHRhcmdldC5zdHlsZS5wYWRkaW5nVG9wID0gMDtcclxuICB0YXJnZXQuc3R5bGUucGFkZGluZ0JvdHRvbSA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpblRvcCA9IDA7XHJcbiAgdGFyZ2V0LnN0eWxlLm1hcmdpbkJvdHRvbSA9IDA7XHJcbiAgdGFyZ2V0Lm9mZnNldEhlaWdodDtcclxuICB0YXJnZXQuc3R5bGUudHJhbnNpdGlvblByb3BlcnR5ID0gXCJoZWlnaHQsIG1hcmdpbiwgcGFkZGluZ1wiO1xyXG4gIHRhcmdldC5zdHlsZS50cmFuc2l0aW9uRHVyYXRpb24gPSBkdXJhdGlvbiArICdtcyc7XHJcbiAgdGFyZ2V0LnN0eWxlLmhlaWdodCA9IGhlaWdodCArICdweCc7XHJcbiAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdwYWRkaW5nLXRvcCcpO1xyXG4gIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgncGFkZGluZy1ib3R0b20nKTtcclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi10b3AnKTtcclxuICB0YXJnZXQuc3R5bGUucmVtb3ZlUHJvcGVydHkoJ21hcmdpbi1ib3R0b20nKTtcclxuICB3aW5kb3cuc2V0VGltZW91dCggKCkgPT4ge1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCdoZWlnaHQnKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgnb3ZlcmZsb3cnKTtcclxuICAgIHRhcmdldC5zdHlsZS5yZW1vdmVQcm9wZXJ0eSgndHJhbnNpdGlvbi1kdXJhdGlvbicpO1xyXG4gICAgdGFyZ2V0LnN0eWxlLnJlbW92ZVByb3BlcnR5KCd0cmFuc2l0aW9uLXByb3BlcnR5Jyk7XHJcbiAgfSwgZHVyYXRpb24pO1xyXG59XHJcblxyXG52YXIgc2xpZGVUb2dnbGUgPSAodGFyZ2V0LCBkdXJhdGlvbiA9IDUwMCkgPT4ge1xyXG4gIGlmICh3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSh0YXJnZXQpLmRpc3BsYXkgPT09ICdub25lJykge1xyXG4gICAgcmV0dXJuIHNsaWRlRG93bih0YXJnZXQsIGR1cmF0aW9uKTtcclxuICB9IGVsc2Uge1xyXG4gICAgcmV0dXJuIHNsaWRlVXAodGFyZ2V0LCBkdXJhdGlvbik7XHJcbiAgfVxyXG59XHJcblxyXG53aW5kb3cub25sb2FkID0gKCkgPT4ge1xyXG4gIC8vIFZhcmlhYmVsc1xyXG4gIGxldCBidXJnZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmJ1cmdlclwiKTtcclxuICBsZXQgaGVhZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJcIik7XHJcbiAgbGV0IHRlY2hub2xvZ3lDYXJkID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLnRlY2hub2xvZ3ktY2FyZCcpO1xyXG4gIGxldCB0ZWNobm9sb2d5Q2FyZEJvZHkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcudGVjaG5vbG9neS1jYXJkX19ib2R5JylcclxuICBsZXQgdGFiQ29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFic19faXRlbVwiKTtcclxuICBsZXQgdGFiSXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudGFic19fdHJpZ2dlclwiKTtcclxuICBsZXQgdGFiRHJvcGRvd25UcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmVhdG1lbnRzIC5kcm9wZG93bl9fdHJpZ2dlciAuZHJvcGRvd25fX3RyaWdnZXItdGV4dFwiKTtcclxuICBsZXQgdHJlYXRtZW50c0Ryb3Bkb3duID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50cmVhdG1lbnRzIC5kcm9wZG93blwiKTtcclxuICBsZXQgdHJlYXRtZW50c0Ryb3Bkb3duTGlzdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudHJlYXRtZW50cyAuZHJvcGRvd25fX2xpc3RcIilcclxuXHJcbiAgLy8gU2Nyb2xsIHRvIGNvbnRhY3RzLWZvcm1cclxuICBjb25zdCBsaW5rcyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaGVhZGVyLWNvbnRhY3RzX19saW5rXCIpO1xyXG5cclxuICBmb3IgKGNvbnN0IGxpbmsgb2YgbGlua3MpIHtcclxuICAgIGxpbmsuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIGNsaWNrSGFuZGxlcik7XHJcbiAgfVxyXG5cclxuICBmdW5jdGlvbiBjbGlja0hhbmRsZXIoZSkge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgY29uc3QgaHJlZiA9IHRoaXMuZ2V0QXR0cmlidXRlKFwiaHJlZlwiKTtcclxuICAgIGNvbnN0IG9mZnNldFRvcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoaHJlZikub2Zmc2V0VG9wO1xyXG5cclxuICAgIHNjcm9sbCh7XHJcbiAgICAgIHRvcDogb2Zmc2V0VG9wIC0gMTAwLFxyXG4gICAgICBiZWhhdmlvcjogXCJzbW9vdGhcIlxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICAvLyBNYW5pcHVsYXRpb25zIHdpdGggaGVhZGVyIGNsYXNzZXMgb24gc2Nyb2xsXHJcbiAgbGV0IHNjcm9sbENoYW5nZSA9IDE7XHJcblxyXG4gIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsICgpID0+IHtcclxuICAgIGxldCBzY3JvbGwgPSAkKHdpbmRvdykuc2Nyb2xsVG9wKCk7XHJcblxyXG4gICAgaWYgKHNjcm9sbCA+PSBzY3JvbGxDaGFuZ2UpIHtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1zY3JvbGwtZG93blwiKTtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1zY3JvbGwtdG9wXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgaGVhZGVyLmNsYXNzTGlzdC5hZGQoXCJqcy1zY3JvbGwtdG9wXCIpO1xyXG4gICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLXNjcm9sbC1kb3duXCIsIFwianMtbmF2LW9wZW5cIiwgXCJqcy1uYXYtY2xvc2VcIik7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIC8vIFRhYnNcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IHRhYkl0ZW0ubGVuZ3RoOyBpKyspIHtcclxuICAgIHRhYkl0ZW1baV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuXHJcbiAgICAgIHRhYkNvbnRlbnQuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICAgIGl0ZW0uY2xhc3NMaXN0LnJlbW92ZShcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0YWJJdGVtLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgICBpdGVtLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIH0pO1xyXG5cclxuICAgICAgdGFiQ29udGVudFtpXS5jbGFzc0xpc3QuYWRkKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICB0YWJJdGVtW2ldLmNsYXNzTGlzdC5hZGQoXCJqcy1hY3RpdmVcIik7XHJcblxyXG4gICAgICB0YWJEcm9wZG93blRyaWdnZXIudGV4dENvbnRlbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhYnNfX3RyaWdnZXIuanMtYWN0aXZlXCIpLnRleHRDb250ZW50XHJcbiAgICB9KTtcclxuICB9IFxyXG4gIFxyXG4gIGlmICh0YWJEcm9wZG93blRyaWdnZXIpIHtcclxuICAgIHRhYkRyb3Bkb3duVHJpZ2dlci50ZXh0Q29udGVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFic19fdHJpZ2dlci5qcy1hY3RpdmVcIikudGV4dENvbnRlbnRcclxuICB9XHJcbiAgLy8gQ3VzdG9tIHNjcm9sbGJhciBpbiB0b290aCB0YWJsZVxyXG4gIE92ZXJsYXlTY3JvbGxiYXJzKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIudG9vdGhcIiksIHt9KTtcclxuXHJcbiAgLy8gRmlsZXMgaW5wdXRcclxuICBsZXQgZmlsZXNUcmlnZ2VyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2ZpbGUnKTtcclxuICBsZXQgZmlsZXNUYWJsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5maWxlc19fdGFibGUnKTtcclxuICBcclxuICBsZXQgdXBkYXRlRmlsZXNMaXN0ID0gKCkgPT4ge1xyXG4gICAgbGV0IGNoaWxkcmVuID0gXCJcIjtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmlsZXNUcmlnZ2VyLmZpbGVzLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgIGNoaWxkcmVuICs9ICAnPGRpdiBjbGFzcz1cImZpbGVzX193cmFwcGVyXCI+JyArICc8ZGl2IGNsYXNzPVwiZmlsZXMtaXRlbVwiPicgKyAnPGkgY2xhc3M9XCJpY29uLWZpbGVcIj48L2k+JyArICc8c3BhbiBjbGFzcz1cImZpbGVzLWl0ZW1fX25hbWVcIj4nICsgZmlsZXNUcmlnZ2VyLmZpbGVzLml0ZW0oaSkubmFtZSArICc8L3NwYW4vPicgKyAnPGkgY2xhc3M9XCJmaWxlcy1pdGVtX19yZW1vdmUgaWNvbi10cmFzaC1jYW5cIiBvbmNsaWNrPVwicmV0dXJuIHRoaXMucGFyZW50Tm9kZS5wYXJlbnROb2RlLnJlbW92ZSgpO1wiPjwvaT4nICsgJzwvZGl2PicgKyAnPC9kaXY+J1xyXG4gICAgfVxyXG4gICAgZmlsZXNUYWJsZS5pbm5lckhUTUwgPSBjaGlsZHJlbjtcclxuICAgIGlmIChjaGlsZHJlbi5sZW5ndGggPj0gMCkge1xyXG4gICAgICBmaWxlc1RhYmxlLnN0eWxlLmRpc3BsYXkgPSAnZmxleCdcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGZpbGVzVGFibGUuc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgaWYgKGZpbGVzVHJpZ2dlcikge1xyXG4gICAgZmlsZXNUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjaGFuZ2VcIiwgKCkgPT4ge1xyXG4gICAgICB1cGRhdGVGaWxlc0xpc3QoKVxyXG4gICAgfSlcclxuICB9XHJcbiAgXHJcbiAgLy8gTWVkaWEgOTkyID09PT09PlxyXG4gIGlmICh3aW5kb3cubWF0Y2hNZWRpYShcIihtaW4td2lkdGg6IDk5MnB4KVwiKS5tYXRjaGVzKSB7XHJcbiAgICAvLyBPcGVuaW5nIGRlc2t0b3AgbWVudSB3aXRoIGJ1cmdlclxyXG4gICAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGlmIChoZWFkZXIuY2xhc3NMaXN0LmNvbnRhaW5zKFwianMtbmF2LW9wZW5cIikpIHtcclxuICAgICAgICBoZWFkZXIuY2xhc3NMaXN0LnJlbW92ZShcImpzLW5hdi1vcGVuXCIpO1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwianMtbmF2LWNsb3NlXCIpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGhlYWRlci5jbGFzc0xpc3QuYWRkKFwianMtbmF2LW9wZW5cIik7XHJcbiAgICAgICAgaGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoXCJqcy1uYXYtY2xvc2VcIik7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIE9wZW5pbmcgdGVjaG5vbG9neSBhY2NvcmRpb25cclxuICAgICQoJy50ZWNobm9sb2d5X193cmFwcGVyJykuY2xpY2soZnVuY3Rpb24gKCkge1xyXG4gICAgICAkKFwiLnRlY2hub2xvZ3lfX3dyYXBwZXJcIikubm90KCQodGhpcykuY2xvc2VzdChcIi50ZWNobm9sb2d5X193cmFwcGVyXCIpKS5yZW1vdmVDbGFzcyhcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgJCh0aGlzKS5jbG9zZXN0KFwiLnRlY2hub2xvZ3lfX3dyYXBwZXJcIikuYWRkQ2xhc3MoXCJqcy1hY3RpdmVcIik7XHJcbiAgICAgIGlmICgkKHRoaXMpLmhhc0NsYXNzKCdqcy1hY3RpdmUnKSkge1xyXG4gICAgICAgICQoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKS5ub3QoJCh0aGlzKS5maW5kKCcudGVjaG5vbG9neS1jYXJkX19ib2R5JykpLnNsaWRlVXAoMzAwKTtcclxuICAgICAgICAkKHRoaXMpLmZpbmQoJy50ZWNobm9sb2d5LWNhcmRfX2JvZHknKS5zbGlkZURvd24oMzAwKTtcclxuICAgICAgfVxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IHRlY2hub2xvZ3lDYXJkLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAvLyAgIHRlY2hub2xvZ3lDYXJkW2ldLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAvLyAgICAgdGVjaG5vbG9neUNhcmQuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG4gICAgLy8gICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwianMtYWN0aXZlXCIpO1xyXG4gICAgLy8gICAgIH0pO1xyXG5cclxuICAgIC8vICAgICB0ZWNobm9sb2d5Q2FyZFtpXS5jbGFzc0xpc3QuYWRkKCdqcy1hY3RpdmUnKTtcclxuXHJcbiAgICAvLyAgICAgLy8gQWRkIGNsYXNzIHRvIHRoZSBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWRcclxuICAgIC8vICAgICBzbGlkZURvd24odGVjaG5vbG9neUNhcmRCb2R5W2ldLCAzMDApXHJcbiAgICAvLyAgIH0pO1xyXG4gICAgLy8gfVxyXG4gICAgXHJcbiAgICAvLyBDaGVja2luZyBpZiB0aGUgYWN0aXZlIHBhZ2UgaXMgdGhlIGhvbWUgcGFnZVxyXG4gICAgd2luZG93LmhvbWVwYWdlY2hlY2sgPSAoKSA9PiB7XHJcbiAgICAgIHZhciBjaGVjayA9IGZhbHNlO1xyXG4gICAgICBpZihkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSA9PT0gXCIvXCIgfHwgZG9jdW1lbnQubG9jYXRpb24ucGF0aG5hbWUgPT09IFwiL2luZGV4Lmh0bWxcIil7XHJcbiAgICAgICAgY2hlY2s9dHJ1ZTtcclxuICAgICAgICB9XHJcbiAgICAgIHJldHVybiBjaGVjaztcclxuICAgIH1cclxuICBcclxuICAgIGlmKHdpbmRvdy5ob21lcGFnZWNoZWNrKCkpe1xyXG4gICAgICAvLyBIb3Jpem9udGFsIHNjcm9sbCBpbiBUcmVhdG1lbnRzID09PT09PlxyXG4gICAgICBnc2FwLnJlZ2lzdGVyUGx1Z2luKFNjcm9sbFRyaWdnZXIpO1xyXG4gIFxyXG4gICAgICBjb25zdCBzZWN0aW9ucyA9IGdzYXAudXRpbHMudG9BcnJheShcIi50cmVhdG1lbnRzLWhvcml6b250YWxcIik7XHJcbiAgICAgIGxldCBtYXhXaWR0aCA9IDA7XHJcbiAgXHJcbiAgICAgIGNvbnN0IGdldE1heFdpZHRoID0gKCkgPT4ge1xyXG4gICAgICAgIG1heFdpZHRoID0gMDtcclxuICAgICAgICBzZWN0aW9ucy5mb3JFYWNoKChzZWN0aW9uKSA9PiB7XHJcbiAgICAgICAgICBtYXhXaWR0aCArPSBzZWN0aW9uLm9mZnNldFdpZHRoO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICB9O1xyXG4gICAgICBnZXRNYXhXaWR0aCgpO1xyXG4gICAgICBTY3JvbGxUcmlnZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWZyZXNoSW5pdFwiLCBnZXRNYXhXaWR0aCk7XHJcbiAgXHJcbiAgICAgIGxldCB0cmlnZ2VySXRlbSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy50cmVhdG1lbnRzJyk7XHJcbiAgXHJcbiAgICAgIGdzYXAudG8oc2VjdGlvbnMsIHtcclxuICAgICAgICB4OiAoKSA9PiBgLSR7bWF4V2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aH1gLFxyXG4gICAgICAgIGVhc2U6IFwibm9uZVwiLFxyXG4gICAgICAgIHNjcm9sbFRyaWdnZXI6IHtcclxuICAgICAgICAgIHN0YXJ0OiBcIi0xMjBweCB0b3BcIixcclxuICAgICAgICAgIHRyaWdnZXI6IHRyaWdnZXJJdGVtLFxyXG4gICAgICAgICAgcGluOiB0cnVlLFxyXG4gICAgICAgICAgc2NydWI6IHRydWUsXHJcbiAgICAgICAgICBlbmQ6ICgpID0+IGArPSR7bWF4V2lkdGh9YCxcclxuICAgICAgICAgIGludmFsaWRhdGVPblJlZnJlc2g6IHRydWVcclxuICAgICAgICB9XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICBzZWN0aW9ucy5mb3JFYWNoKChzY3QsIGkpID0+IHtcclxuICAgICAgICBTY3JvbGxUcmlnZ2VyLmNyZWF0ZSh7XHJcbiAgICAgICAgICB0cmlnZ2VyOiBzY3QsXHJcbiAgICAgICAgICBzdGFydDogKCkgPT4gJ3RvcCB0b3AtPScgKyAoc2N0Lm9mZnNldExlZnQgLSB3aW5kb3cuaW5uZXJXaWR0aC8yKSAqIChtYXhXaWR0aCAvIChtYXhXaWR0aCAtIHdpbmRvdy5pbm5lcldpZHRoKSksXHJcbiAgICAgICAgICBlbmQ6ICgpID0+ICcrPScgKyBzY3Qub2Zmc2V0V2lkdGggKiAobWF4V2lkdGggLyAobWF4V2lkdGggLSB3aW5kb3cuaW5uZXJXaWR0aCkpLFxyXG4gICAgICAgICAgdG9nZ2xlQ2xhc3M6IHt0YXJnZXRzOiBzY3QsIGNsYXNzTmFtZTogXCJhY3RpdmVcIn1cclxuICAgICAgICB9KTtcclxuICAgICAgfSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBudWxsXHJcbiAgICB9XHJcblxyXG4gIH0gZWxzZSB7XHJcbiAgICAvLyBUb2dnbGUgdmlzaWJsZSBlbGVtZW50c1xyXG4gICAgbGV0IHNob3dUcmlnZ2VyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaG93X190cmlnZ2VyXCIpO1xyXG4gICAgbGV0IHNob3dJdGVtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zaG93X19pdGVtXCIpO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgc2hvd1RyaWdnZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgc2hvd1RyaWdnZXJbaV0uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgICBzaG93VHJpZ2dlcltpXS5jbGFzc0xpc3QudG9nZ2xlKCdqcy1hY3RpdmUnKVxyXG5cclxuICAgICAgICBpZiAoc2hvd1RyaWdnZXJbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKFwianMtYWN0aXZlXCIpKSB7XHJcbiAgICAgICAgICBzaG93VHJpZ2dlcltpXS50ZXh0Q29udGVudCA9ICdTZWUgbGVzcydcclxuICAgICAgICAgIHNob3dJdGVtLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJibG9ja1wiXHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgc2hvd1RyaWdnZXJbaV0udGV4dENvbnRlbnQgPSAnU2VlIGFsbCdcclxuICAgICAgICAgIHNob3dJdGVtLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5kaXNwbGF5ID0gXCJub25lXCJcclxuICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgfSlcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gVHJlYXRtZW50cyBwYWdlIHRhYnMgbmF2aWdhdGlvblxyXG4gICAgaWYgKHRyZWF0bWVudHNEcm9wZG93biAmJiB0cmVhdG1lbnRzRHJvcGRvd25MaXN0KSB7XHJcbiAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwic2Nyb2xsXCIsICgpID0+IHtcclxuICAgICAgICBsZXQgb2Zmc2V0SXRlbTEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuaGVhZGVyJykub2Zmc2V0SGVpZ2h0XHJcbiAgICBcclxuICAgICAgICBpZiAod2luZG93LnNjcm9sbFkgPiBvZmZzZXRJdGVtMSArIDY0ICkge1xyXG4gICAgICAgICAgdHJlYXRtZW50c0Ryb3Bkb3duLmNsYXNzTGlzdC5hZGQoXCJqcy1zY3JvbGwtZG93blwiKTtcclxuICAgICAgICAgIHRyZWF0bWVudHNEcm9wZG93bkxpc3Quc3R5bGUuZGlzcGxheSA9ICdub25lJ1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICB0cmVhdG1lbnRzRHJvcGRvd24uY2xhc3NMaXN0LnJlbW92ZShcImpzLXNjcm9sbC1kb3duXCIpO1xyXG4gICAgICAgICAgdHJlYXRtZW50c0Ryb3Bkb3duTGlzdC5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJ1xyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcblxyXG4gICAgICB0cmVhdG1lbnRzRHJvcGRvd24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgaWYgKHRyZWF0bWVudHNEcm9wZG93bi5jbGFzc0xpc3QuY29udGFpbnMoXCJqcy1zY3JvbGwtZG93blwiKSkge1xyXG4gICAgICAgICAgc2xpZGVUb2dnbGUodHJlYXRtZW50c0Ryb3Bkb3duTGlzdCwgMzAwKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgbnVsbFxyXG4gICAgICAgIH1cclxuICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gT3BlbmluZyBtb2JpbGUgbWVudSB3aXRoIGJ1cmdlclxyXG4gICAgYnVyZ2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIGhlYWRlci5jbGFzc0xpc3QudG9nZ2xlKFwianMtbmF2LW9wZW5cIik7XHJcbiAgICAgIGRvY3VtZW50LmJvZHkuY2xhc3NMaXN0LnRvZ2dsZShcImpzLWxvY2tcIik7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBPcGVuaW5nIHRlY2hub2xvZ3kgYWNjb3JkaW9ucyAhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhISEhXHJcbiAgICAvLyAkKCcudGVjaG5vbG9neV9fd3JhcHBlciAudGVjaG5vbG9neS1jYXJkJykubm90KCQoJy50ZWNobm9sb2d5X193cmFwcGVyLnNlY29uZGFyeSAudGVjaG5vbG9neS1jYXJkJykpLnJlbW92ZUNsYXNzKCdqcy1hY3RpdmUnKVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0ZWNobm9sb2d5Q2FyZC5sZW5ndGg7IGkrKykge1xyXG4gICAgICB0ZWNobm9sb2d5Q2FyZFtpXS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gICAgICAgIC8vIFJlbW92ZSBjbGFzcyBmcm9tIGFsbCBlbGVtZW50c1xyXG4gICAgICAgIHRlY2hub2xvZ3lDYXJkLmZvckVhY2goKGVsZW1lbnQpID0+IHtcclxuICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcImpzLWFjdGl2ZVwiKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGNsYXNzIHRvIHRoZSBlbGVtZW50IHRoYXQgd2FzIGNsaWNrZWRcclxuICAgICAgICB0ZWNobm9sb2d5Q2FyZFtpXS5jbGFzc0xpc3QuYWRkKFwianMtYWN0aXZlXCIpO1xyXG4gICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvLyBCbG9jayBzbGlkZXIgJ1RyZWF0bWVudHMnXHJcbiAgICBjb25zdCBzbGlkZXJUcmVhdG1lbnRzID0gbmV3IFN3aXBlcignLnRyZWF0bWVudHMtc2xpZGVyJywge1xyXG4gICAgICBzbGlkZXNQZXJWaWV3OiAxLFxyXG4gICAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgICAgbmV4dEVsOiBcIi50cmVhdG1lbnRzLWJ1dHRvbi1uZXh0XCIsXHJcbiAgICAgICAgcHJldkVsOiBcIi50cmVhdG1lbnRzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgICBlbDogXCIudHJlYXRtZW50cy1wYWdpbmF0aW9uXCIsXHJcbiAgICAgIH0sXHJcbiAgICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgICAgNzY4OiB7XHJcbiAgICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH1cclxuICAgIH0pXHJcbiAgfVxyXG5cclxuICAvLyBCbG9jayBzbGlkZXIgJ1ByYWN0aWNlcydcclxuICBjb25zdCBzbGlkZXJQcmFjdGljZXMgPSBuZXcgU3dpcGVyKCcucHJhY3RpY2VzLXNsaWRlcicsIHtcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDQwLFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLnByYWN0aWNlcy1idXR0b24tbmV4dFwiLFxyXG4gICAgICBwcmV2RWw6IFwiLnByYWN0aWNlcy1idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLnByYWN0aWNlcy1wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNzY4OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9KVxyXG5cclxuICAvLyBCbG9jayBzbGlkZXIgJ1Rlc3RpbW9uaWFscydcclxuICBjb25zdCBzbGlkZXJUZXN0aW1vbmlhbHMgPSBuZXcgU3dpcGVyKCcudGVzdGltb25pYWxzLXNsaWRlcicsIHtcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgbG9vcDogdHJ1ZSxcclxuICAgIG5hdmlnYXRpb246IHtcclxuICAgICAgbmV4dEVsOiBcIi50ZXN0aW1vbmlhbHMtYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi50ZXN0aW1vbmlhbHMtYnV0dG9uLXByZXZcIixcclxuICAgIH0sXHJcbiAgICBwYWdpbmF0aW9uOiB7XHJcbiAgICAgIGVsOiBcIi50ZXN0aW1vbmlhbHMtcGFnaW5hdGlvblwiLFxyXG4gICAgfSxcclxuICAgIGJyZWFrcG9pbnRzOiB7XHJcbiAgICAgIDc2ODoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6IDIsXHJcbiAgICAgIH0sXHJcbiAgICAgIDk5Mjoge1xyXG4gICAgICAgIHNsaWRlc1BlclZpZXc6ICdhdXRvJyxcclxuICAgICAgICBjZW50ZXJlZFNsaWRlczogdHJ1ZSxcclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIC8vIEJsb2NrIHNsaWRlciAnQ2FzZXMnXHJcbiAgY29uc3Qgc2xpZGVyQ2FzZXMgPSBuZXcgU3dpcGVyKCcuY2FzZXMtc2xpZGVyJywge1xyXG4gICAgc2xpZGVzUGVyVmlldzogMSxcclxuICAgIHNwYWNlQmV0d2VlbjogMzAsXHJcbiAgICBuYXZpZ2F0aW9uOiB7XHJcbiAgICAgIG5leHRFbDogXCIuY2FzZXMtYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi5jYXNlcy1idXR0b24tcHJldlwiLFxyXG4gICAgfSxcclxuICAgIHBhZ2luYXRpb246IHtcclxuICAgICAgZWw6IFwiLmNhc2VzLXBhZ2luYXRpb25cIixcclxuICAgIH0sXHJcbiAgICBicmVha3BvaW50czoge1xyXG4gICAgICA3Njg6IHtcclxuICAgICAgICBzbGlkZXNQZXJWaWV3OiAyLFxyXG4gICAgICB9LFxyXG4gICAgfVxyXG4gIH0pXHJcblxyXG4gIC8vIEJsb2NrIHNsaWRlciAnU29jaWFscydcclxuICBjb25zdCBzbGlkZXJTb2NpYWxzID0gbmV3IFN3aXBlcignLnNvY2lhbHNfX3NsaWRlcicsIHtcclxuICAgIHNsaWRlc1BlclZpZXc6IDEsXHJcbiAgICBzcGFjZUJldHdlZW46IDMwLFxyXG4gICAgbmF2aWdhdGlvbjoge1xyXG4gICAgICBuZXh0RWw6IFwiLnNvY2lhbHMtYnV0dG9uLW5leHRcIixcclxuICAgICAgcHJldkVsOiBcIi5zb2NpYWxzLWJ1dHRvbi1wcmV2XCIsXHJcbiAgICB9LFxyXG4gICAgcGFnaW5hdGlvbjoge1xyXG4gICAgICBlbDogXCIuc29jaWFscy1wYWdpbmF0aW9uXCIsXHJcbiAgICB9LFxyXG4gICAgYnJlYWtwb2ludHM6IHtcclxuICAgICAgNzY4OiB7XHJcbiAgICAgICAgc2xpZGVzUGVyVmlldzogMixcclxuICAgICAgfSxcclxuICAgIH1cclxuICB9KVxyXG59IiwiLy8gQXV0byBzaXplIHRleHRhcmVhID09PT09PlxyXG52YXIgdGV4dGFyZWEgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xyXG5cclxuaWYgKHRleHRhcmVhKSB7XHJcbiAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGF1dG9zaXplVGV4dGFyZWEpO1xyXG59IGVsc2Uge1xyXG4gIG51bGxcclxufVxyXG5cclxuZnVuY3Rpb24gYXV0b3NpemVUZXh0YXJlYSgpe1xyXG5cdHZhciBlbCA9IHRoaXM7XHJcblx0c2V0VGltZW91dChmdW5jdGlvbigpe1xyXG5cdFx0ZWwuc3R5bGUuY3NzVGV4dCA9ICdoZWlnaHQ6YXV0bzsgcGFkZGluZzowJztcclxuXHRcdGVsLnN0eWxlLmNzc1RleHQgPSAnLW1vei1ib3gtc2l6aW5nOmNvbnRlbnQtYm94JztcclxuXHRcdGVsLnN0eWxlLmNzc1RleHQgPSAnaGVpZ2h0OicgKyBlbC5zY3JvbGxIZWlnaHQgKyAncHgnO1xyXG5cdH0sMCk7XHJcbn1cclxuXHJcbi8vIEN1c3RvbSBzZWxlY3QgPT09PT0+XHJcbiQoJ3NlbGVjdCcpLmVhY2goZnVuY3Rpb24oKXtcclxuICB2YXIgJHRoaXMgPSAkKHRoaXMpLCBudW1iZXJPZk9wdGlvbnMgPSAkKHRoaXMpLmNoaWxkcmVuKCdvcHRpb24nKS5sZW5ndGg7XHJcblxyXG4gICR0aGlzLmFkZENsYXNzKCdzZWxlY3RfX2hpZGRlbicpOyBcclxuICAkdGhpcy53cmFwKCc8ZGl2IGNsYXNzPVwic2VsZWN0XCI+PC9kaXY+Jyk7XHJcbiAgJHRoaXMuYWZ0ZXIoJzxkaXYgY2xhc3M9XCJzZWxlY3RfX3N0eWxlZFwiPjwvZGl2PicpO1xyXG5cclxuICB2YXIgJHN0eWxlZFNlbGVjdCA9ICR0aGlzLm5leHQoJ2Rpdi5zZWxlY3RfX3N0eWxlZCcpO1xyXG4gICRzdHlsZWRTZWxlY3QuYXBwZW5kKCc8c3Bhbj48L3NwYW4+PGkgY2xhc3M9XCJpY29uLWFycm93LWRyb3Bkb3duXCI+PC9pPicpXHJcbiAgJHN0eWxlZFNlbGVjdC5maW5kKCdzcGFuJykudGV4dCgkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoMCkudGV4dCgpKTtcclxuXHJcbiAgdmFyICRsaXN0ID0gJCgnPHVsIC8+Jywge1xyXG4gICAgJ2NsYXNzJzogJ3NlbGVjdF9fb3B0aW9ucydcclxuICB9KS5pbnNlcnRBZnRlcigkc3R5bGVkU2VsZWN0KTtcclxuXHJcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1iZXJPZk9wdGlvbnM7IGkrKykge1xyXG4gICAgJCgnPGxpIC8+Jywge1xyXG4gICAgICB0ZXh0OiAkdGhpcy5jaGlsZHJlbignb3B0aW9uJykuZXEoaSkudGV4dCgpLFxyXG4gICAgICByZWw6ICR0aGlzLmNoaWxkcmVuKCdvcHRpb24nKS5lcShpKS52YWwoKVxyXG4gICAgfSkuYXBwZW5kVG8oJGxpc3QpO1xyXG4gIH1cclxuXHJcbiAgdmFyICRsaXN0SXRlbXMgPSAkbGlzdC5jaGlsZHJlbignbGknKTtcclxuXHJcbiAgJHN0eWxlZFNlbGVjdC5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgJCgnZGl2LnNlbGVjdF9fc3R5bGVkLmFjdGl2ZScpLm5vdCh0aGlzKS5lYWNoKGZ1bmN0aW9uKCl7XHJcbiAgICAgICQodGhpcykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpLm5leHQoJ3VsLnNlbGVjdF9fb3B0aW9ucycpLnNsaWRlVXAoMzAwKTtcclxuICAgIH0pO1xyXG4gICAgJCh0aGlzKS50b2dnbGVDbGFzcygnYWN0aXZlJykubmV4dCgndWwuc2VsZWN0X19vcHRpb25zJykuc2xpZGVUb2dnbGUoMzAwKTtcclxuICB9KTtcclxuXHJcbiAgJGxpc3RJdGVtcy5jbGljayhmdW5jdGlvbihlKSB7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgJHN0eWxlZFNlbGVjdC5maW5kKCdzcGFuJykudGV4dCgkKHRoaXMpLnRleHQoKSkucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJHRoaXMudmFsKCQodGhpcykuYXR0cigncmVsJykpO1xyXG4gICAgJGxpc3Quc2xpZGVVcCgzMDApO1xyXG4gIH0pO1xyXG5cclxuICAkKGRvY3VtZW50KS5jbGljayhmdW5jdGlvbigpIHtcclxuICAgICRzdHlsZWRTZWxlY3QucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgJGxpc3Quc2xpZGVVcCgzMDApO1xyXG4gIH0pO1xyXG5cclxufSk7Il19